{"version":3,"file":"index.es.js","sources":["src/spine-core/Utils.js","src/spine-core/attachments/Attachment.js","src/spine-core/Animation.js","src/spine-core/AnimationState.js","src/spine-core/AnimationStateData.js","src/spine-core/attachments/BoundingBoxAttachment.js","src/spine-core/attachments/ClippingAttachment.js","src/spine-core/Texture.js","src/spine-core/TextureAtlas.js","src/spine-core/attachments/MeshAttachment.js","src/spine-core/attachments/PathAttachment.js","src/spine-core/attachments/PointAttachment.js","src/spine-core/attachments/RegionAttachment.js","src/spine-core/AtlasAttachmentLoader.js","src/spine-core/BoneData.js","src/spine-core/Bone.js","src/spine-core/ConstraintData.js","src/spine-core/AssetManagerBase.js","src/spine-core/Event.js","src/spine-core/EventData.js","src/spine-core/IkConstraint.js","src/spine-core/IkConstraintData.js","src/spine-core/PathConstraintData.js","src/spine-core/PathConstraint.js","src/spine-core/Slot.js","src/spine-core/TransformConstraint.js","src/spine-core/Skeleton.js","src/spine-core/SkeletonData.js","src/spine-core/Skin.js","src/spine-core/SlotData.js","src/spine-core/TransformConstraintData.js","src/spine-core/SkeletonBinary.js","src/spine-core/SkeletonJson.js","src/spine-core/polyfills.js","src/spine-core/vertexeffects/SwirlEffect.js","src/spine-canvas/SkeletonRenderer.js","src/spine-canvas/CanvasTexture.js","src/spine-canvas/AssetManager.js","src/spine.js"],"sourcesContent":["/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nexport class IntSet {\n    constructor() {\n        this.array = new Array();\n    }\n    add(value) {\n        let contains = this.contains(value);\n        this.array[value | 0] = value | 0;\n        return !contains;\n    }\n    contains(value) {\n        return this.array[value | 0] != undefined;\n    }\n    remove(value) {\n        this.array[value | 0] = undefined;\n    }\n    clear() {\n        this.array.length = 0;\n    }\n}\nexport class StringSet {\n    constructor() {\n        this.entries = {};\n        this.size = 0;\n    }\n    add(value) {\n        let contains = this.entries[value];\n        this.entries[value] = true;\n        if (!contains) {\n            this.size++;\n            return true;\n        }\n        return false;\n    }\n    addAll(values) {\n        let oldSize = this.size;\n        for (var i = 0, n = values.length; i < n; i++)\n            this.add(values[i]);\n        return oldSize != this.size;\n    }\n    contains(value) {\n        return this.entries[value];\n    }\n    clear() {\n        this.entries = {};\n        this.size = 0;\n    }\n}\nexport class Color {\n    constructor(r = 0, g = 0, b = 0, a = 0) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n    set(r, g, b, a) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n        return this.clamp();\n    }\n    setFromColor(c) {\n        this.r = c.r;\n        this.g = c.g;\n        this.b = c.b;\n        this.a = c.a;\n        return this;\n    }\n    setFromString(hex) {\n        hex = hex.charAt(0) == '#' ? hex.substr(1) : hex;\n        this.r = parseInt(hex.substr(0, 2), 16) / 255;\n        this.g = parseInt(hex.substr(2, 2), 16) / 255;\n        this.b = parseInt(hex.substr(4, 2), 16) / 255;\n        this.a = hex.length != 8 ? 1 : parseInt(hex.substr(6, 2), 16) / 255;\n        return this;\n    }\n    add(r, g, b, a) {\n        this.r += r;\n        this.g += g;\n        this.b += b;\n        this.a += a;\n        return this.clamp();\n    }\n    clamp() {\n        if (this.r < 0)\n            this.r = 0;\n        else if (this.r > 1)\n            this.r = 1;\n        if (this.g < 0)\n            this.g = 0;\n        else if (this.g > 1)\n            this.g = 1;\n        if (this.b < 0)\n            this.b = 0;\n        else if (this.b > 1)\n            this.b = 1;\n        if (this.a < 0)\n            this.a = 0;\n        else if (this.a > 1)\n            this.a = 1;\n        return this;\n    }\n    static rgba8888ToColor(color, value) {\n        color.r = ((value & 0xff000000) >>> 24) / 255;\n        color.g = ((value & 0x00ff0000) >>> 16) / 255;\n        color.b = ((value & 0x0000ff00) >>> 8) / 255;\n        color.a = ((value & 0x000000ff)) / 255;\n    }\n    static rgb888ToColor(color, value) {\n        color.r = ((value & 0x00ff0000) >>> 16) / 255;\n        color.g = ((value & 0x0000ff00) >>> 8) / 255;\n        color.b = ((value & 0x000000ff)) / 255;\n    }\n    static fromString(hex) {\n        return new Color().setFromString(hex);\n    }\n}\nColor.WHITE = new Color(1, 1, 1, 1);\nColor.RED = new Color(1, 0, 0, 1);\nColor.GREEN = new Color(0, 1, 0, 1);\nColor.BLUE = new Color(0, 0, 1, 1);\nColor.MAGENTA = new Color(1, 0, 1, 1);\nexport class MathUtils {\n    static clamp(value, min, max) {\n        if (value < min)\n            return min;\n        if (value > max)\n            return max;\n        return value;\n    }\n    static cosDeg(degrees) {\n        return Math.cos(degrees * MathUtils.degRad);\n    }\n    static sinDeg(degrees) {\n        return Math.sin(degrees * MathUtils.degRad);\n    }\n    static signum(value) {\n        return value > 0 ? 1 : value < 0 ? -1 : 0;\n    }\n    static toInt(x) {\n        return x > 0 ? Math.floor(x) : Math.ceil(x);\n    }\n    static cbrt(x) {\n        let y = Math.pow(Math.abs(x), 1 / 3);\n        return x < 0 ? -y : y;\n    }\n    static randomTriangular(min, max) {\n        return MathUtils.randomTriangularWith(min, max, (min + max) * 0.5);\n    }\n    static randomTriangularWith(min, max, mode) {\n        let u = Math.random();\n        let d = max - min;\n        if (u <= (mode - min) / d)\n            return min + Math.sqrt(u * d * (mode - min));\n        return max - Math.sqrt((1 - u) * d * (max - mode));\n    }\n    static isPowerOfTwo(value) {\n        return value && (value & (value - 1)) === 0;\n    }\n}\nMathUtils.PI = 3.1415927;\nMathUtils.PI2 = MathUtils.PI * 2;\nMathUtils.radiansToDegrees = 180 / MathUtils.PI;\nMathUtils.radDeg = MathUtils.radiansToDegrees;\nMathUtils.degreesToRadians = MathUtils.PI / 180;\nMathUtils.degRad = MathUtils.degreesToRadians;\nexport class Interpolation {\n    apply(start, end, a) {\n        return start + (end - start) * this.applyInternal(a);\n    }\n}\nexport class Pow extends Interpolation {\n    constructor(power) {\n        super();\n        this.power = 2;\n        this.power = power;\n    }\n    applyInternal(a) {\n        if (a <= 0.5)\n            return Math.pow(a * 2, this.power) / 2;\n        return Math.pow((a - 1) * 2, this.power) / (this.power % 2 == 0 ? -2 : 2) + 1;\n    }\n}\nexport class PowOut extends Pow {\n    constructor(power) {\n        super(power);\n    }\n    applyInternal(a) {\n        return Math.pow(a - 1, this.power) * (this.power % 2 == 0 ? -1 : 1) + 1;\n    }\n}\nexport class Utils {\n    static arrayCopy(source, sourceStart, dest, destStart, numElements) {\n        for (let i = sourceStart, j = destStart; i < sourceStart + numElements; i++, j++) {\n            dest[j] = source[i];\n        }\n    }\n    static arrayFill(array, fromIndex, toIndex, value) {\n        for (let i = fromIndex; i < toIndex; i++)\n            array[i] = value;\n    }\n    static setArraySize(array, size, value = 0) {\n        let oldSize = array.length;\n        if (oldSize == size)\n            return array;\n        array.length = size;\n        if (oldSize < size) {\n            for (let i = oldSize; i < size; i++)\n                array[i] = value;\n        }\n        return array;\n    }\n    static ensureArrayCapacity(array, size, value = 0) {\n        if (array.length >= size)\n            return array;\n        return Utils.setArraySize(array, size, value);\n    }\n    static newArray(size, defaultValue) {\n        let array = new Array(size);\n        for (let i = 0; i < size; i++)\n            array[i] = defaultValue;\n        return array;\n    }\n    static newFloatArray(size) {\n        if (Utils.SUPPORTS_TYPED_ARRAYS)\n            return new Float32Array(size);\n        else {\n            let array = new Array(size);\n            for (let i = 0; i < array.length; i++)\n                array[i] = 0;\n            return array;\n        }\n    }\n    static newShortArray(size) {\n        if (Utils.SUPPORTS_TYPED_ARRAYS)\n            return new Int16Array(size);\n        else {\n            let array = new Array(size);\n            for (let i = 0; i < array.length; i++)\n                array[i] = 0;\n            return array;\n        }\n    }\n    static toFloatArray(array) {\n        return Utils.SUPPORTS_TYPED_ARRAYS ? new Float32Array(array) : array;\n    }\n    static toSinglePrecision(value) {\n        return Utils.SUPPORTS_TYPED_ARRAYS ? Math.fround(value) : value;\n    }\n    // This function is used to fix WebKit 602 specific issue described at http://esotericsoftware.com/forum/iOS-10-disappearing-graphics-10109\n    static webkit602BugfixHelper(alpha, blend) {\n    }\n    static contains(array, element, identity = true) {\n        for (var i = 0; i < array.length; i++)\n            if (array[i] == element)\n                return true;\n        return false;\n    }\n    static enumValue(type, name) {\n        return type[name[0].toUpperCase() + name.slice(1)];\n    }\n}\nUtils.SUPPORTS_TYPED_ARRAYS = typeof (Float32Array) !== \"undefined\";\nexport class DebugUtils {\n    static logBones(skeleton) {\n        for (let i = 0; i < skeleton.bones.length; i++) {\n            let bone = skeleton.bones[i];\n            console.log(bone.data.name + \", \" + bone.a + \", \" + bone.b + \", \" + bone.c + \", \" + bone.d + \", \" + bone.worldX + \", \" + bone.worldY);\n        }\n    }\n}\nexport class Pool {\n    constructor(instantiator) {\n        this.items = new Array();\n        this.instantiator = instantiator;\n    }\n    obtain() {\n        return this.items.length > 0 ? this.items.pop() : this.instantiator();\n    }\n    free(item) {\n        if (item.reset)\n            item.reset();\n        this.items.push(item);\n    }\n    freeAll(items) {\n        for (let i = 0; i < items.length; i++)\n            this.free(items[i]);\n    }\n    clear() {\n        this.items.length = 0;\n    }\n}\nexport class Vector2 {\n    constructor(x = 0, y = 0) {\n        this.x = x;\n        this.y = y;\n    }\n    set(x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    }\n    length() {\n        let x = this.x;\n        let y = this.y;\n        return Math.sqrt(x * x + y * y);\n    }\n    normalize() {\n        let len = this.length();\n        if (len != 0) {\n            this.x /= len;\n            this.y /= len;\n        }\n        return this;\n    }\n}\nexport class TimeKeeper {\n    constructor() {\n        this.maxDelta = 0.064;\n        this.framesPerSecond = 0;\n        this.delta = 0;\n        this.totalTime = 0;\n        this.lastTime = Date.now() / 1000;\n        this.frameCount = 0;\n        this.frameTime = 0;\n    }\n    update() {\n        let now = Date.now() / 1000;\n        this.delta = now - this.lastTime;\n        this.frameTime += this.delta;\n        this.totalTime += this.delta;\n        if (this.delta > this.maxDelta)\n            this.delta = this.maxDelta;\n        this.lastTime = now;\n        this.frameCount++;\n        if (this.frameTime > 1) {\n            this.framesPerSecond = this.frameCount / this.frameTime;\n            this.frameTime = 0;\n            this.frameCount = 0;\n        }\n    }\n}\nexport class WindowedMean {\n    constructor(windowSize = 32) {\n        this.addedValues = 0;\n        this.lastValue = 0;\n        this.mean = 0;\n        this.dirty = true;\n        this.values = new Array(windowSize);\n    }\n    hasEnoughData() {\n        return this.addedValues >= this.values.length;\n    }\n    addValue(value) {\n        if (this.addedValues < this.values.length)\n            this.addedValues++;\n        this.values[this.lastValue++] = value;\n        if (this.lastValue > this.values.length - 1)\n            this.lastValue = 0;\n        this.dirty = true;\n    }\n    getMean() {\n        if (this.hasEnoughData()) {\n            if (this.dirty) {\n                let mean = 0;\n                for (let i = 0; i < this.values.length; i++)\n                    mean += this.values[i];\n                this.mean = mean / this.values.length;\n                this.dirty = false;\n            }\n            return this.mean;\n        }\n        return 0;\n    }\n}\n","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { Utils } from \"../Utils\";\n/** The base class for all attachments. */\nexport class Attachment {\n    constructor(name) {\n        if (!name)\n            throw new Error(\"name cannot be null.\");\n        this.name = name;\n    }\n}\n/** Base class for an attachment with vertices that are transformed by one or more bones and can be deformed by a slot's\n * {@link Slot#deform}. */\nexport class VertexAttachment extends Attachment {\n    constructor(name) {\n        super(name);\n        /** The unique ID for this attachment. */\n        this.id = VertexAttachment.nextID++;\n        /** The maximum number of world vertex values that can be output by\n         * {@link #computeWorldVertices()} using the `count` parameter. */\n        this.worldVerticesLength = 0;\n        /** Deform keys for the deform attachment are also applied to this attachment. May be null if no deform keys should be applied. */\n        this.deformAttachment = this;\n    }\n    /** Transforms the attachment's local {@link #vertices} to world coordinates. If the slot's {@link Slot#deform} is\n     * not empty, it is used to deform the vertices.\n     *\n     * See [World transforms](http://esotericsoftware.com/spine-runtime-skeletons#World-transforms) in the Spine\n     * Runtimes Guide.\n     * @param start The index of the first {@link #vertices} value to transform. Each vertex has 2 values, x and y.\n     * @param count The number of world vertex values to output. Must be <= {@link #worldVerticesLength} - `start`.\n     * @param worldVertices The output world vertices. Must have a length >= `offset` + `count` *\n     *           `stride` / 2.\n     * @param offset The `worldVertices` index to begin writing values.\n     * @param stride The number of `worldVertices` entries between the value pairs written. */\n    computeWorldVertices(slot, start, count, worldVertices, offset, stride) {\n        count = offset + (count >> 1) * stride;\n        let skeleton = slot.bone.skeleton;\n        let deformArray = slot.deform;\n        let vertices = this.vertices;\n        let bones = this.bones;\n        if (!bones) {\n            if (deformArray.length > 0)\n                vertices = deformArray;\n            let bone = slot.bone;\n            let x = bone.worldX;\n            let y = bone.worldY;\n            let a = bone.a, b = bone.b, c = bone.c, d = bone.d;\n            for (let v = start, w = offset; w < count; v += 2, w += stride) {\n                let vx = vertices[v], vy = vertices[v + 1];\n                worldVertices[w] = vx * a + vy * b + x;\n                worldVertices[w + 1] = vx * c + vy * d + y;\n            }\n            return;\n        }\n        let v = 0, skip = 0;\n        for (let i = 0; i < start; i += 2) {\n            let n = bones[v];\n            v += n + 1;\n            skip += n;\n        }\n        let skeletonBones = skeleton.bones;\n        if (deformArray.length == 0) {\n            for (let w = offset, b = skip * 3; w < count; w += stride) {\n                let wx = 0, wy = 0;\n                let n = bones[v++];\n                n += v;\n                for (; v < n; v++, b += 3) {\n                    let bone = skeletonBones[bones[v]];\n                    let vx = vertices[b], vy = vertices[b + 1], weight = vertices[b + 2];\n                    wx += (vx * bone.a + vy * bone.b + bone.worldX) * weight;\n                    wy += (vx * bone.c + vy * bone.d + bone.worldY) * weight;\n                }\n                worldVertices[w] = wx;\n                worldVertices[w + 1] = wy;\n            }\n        }\n        else {\n            let deform = deformArray;\n            for (let w = offset, b = skip * 3, f = skip << 1; w < count; w += stride) {\n                let wx = 0, wy = 0;\n                let n = bones[v++];\n                n += v;\n                for (; v < n; v++, b += 3, f += 2) {\n                    let bone = skeletonBones[bones[v]];\n                    let vx = vertices[b] + deform[f], vy = vertices[b + 1] + deform[f + 1], weight = vertices[b + 2];\n                    wx += (vx * bone.a + vy * bone.b + bone.worldX) * weight;\n                    wy += (vx * bone.c + vy * bone.d + bone.worldY) * weight;\n                }\n                worldVertices[w] = wx;\n                worldVertices[w + 1] = wy;\n            }\n        }\n    }\n    /** Does not copy id (generated) or name (set on construction). **/\n    copyTo(attachment) {\n        if (this.bones) {\n            attachment.bones = new Array(this.bones.length);\n            Utils.arrayCopy(this.bones, 0, attachment.bones, 0, this.bones.length);\n        }\n        else\n            attachment.bones = null;\n        if (this.vertices) {\n            attachment.vertices = Utils.newFloatArray(this.vertices.length);\n            Utils.arrayCopy(this.vertices, 0, attachment.vertices, 0, this.vertices.length);\n        }\n        else\n            attachment.vertices = null;\n        attachment.worldVerticesLength = this.worldVerticesLength;\n        attachment.deformAttachment = this.deformAttachment;\n    }\n}\nVertexAttachment.nextID = 0;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXR0YWNobWVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hdHRhY2htZW50cy9BdHRhY2htZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K0VBMkIrRTtBQUcvRSxPQUFPLEVBQW1CLEtBQUssRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUVsRCwwQ0FBMEM7QUFDMUMsTUFBTSxPQUFnQixVQUFVO0lBRy9CLFlBQWEsSUFBWTtRQUN4QixJQUFJLENBQUMsSUFBSTtZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUNuRCxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNsQixDQUFDO0NBR0Q7QUFFRDswQkFDMEI7QUFDMUIsTUFBTSxPQUFnQixnQkFBaUIsU0FBUSxVQUFVO0lBdUJ4RCxZQUFhLElBQVk7UUFDeEIsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBckJiLHlDQUF5QztRQUN6QyxPQUFFLEdBQUcsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLENBQUM7UUFZL0I7MEVBQ2tFO1FBQ2xFLHdCQUFtQixHQUFHLENBQUMsQ0FBQztRQUV4QixrSUFBa0k7UUFDbEkscUJBQWdCLEdBQXFCLElBQUksQ0FBQztJQUkxQyxDQUFDO0lBRUQ7Ozs7Ozs7Ozs7OEZBVTBGO0lBQzFGLG9CQUFvQixDQUFFLElBQVUsRUFBRSxLQUFhLEVBQUUsS0FBYSxFQUFFLGFBQThCLEVBQUUsTUFBYyxFQUFFLE1BQWM7UUFDN0gsS0FBSyxHQUFHLE1BQU0sR0FBRyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUM7UUFDdkMsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDbEMsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUM5QixJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMs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","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { VertexAttachment } from \"./attachments/Attachment\";\nimport { StringSet, Utils, MathUtils } from \"./Utils\";\n/** A simple container for a list of timelines and a name. */\nexport class Animation {\n    constructor(name, timelines, duration) {\n        if (!name)\n            throw new Error(\"name cannot be null.\");\n        this.name = name;\n        this.setTimelines(timelines);\n        this.duration = duration;\n    }\n    setTimelines(timelines) {\n        if (!timelines)\n            throw new Error(\"timelines cannot be null.\");\n        this.timelines = timelines;\n        this.timelineIds = new StringSet();\n        for (var i = 0; i < timelines.length; i++)\n            this.timelineIds.addAll(timelines[i].getPropertyIds());\n    }\n    hasTimeline(ids) {\n        for (let i = 0; i < ids.length; i++)\n            if (this.timelineIds.contains(ids[i]))\n                return true;\n        return false;\n    }\n    /** Applies all the animation's timelines to the specified skeleton.\n     *\n     * See Timeline {@link Timeline#apply(Skeleton, float, float, Array, float, MixBlend, MixDirection)}.\n     * @param loop If true, the animation repeats after {@link #getDuration()}.\n     * @param events May be null to ignore fired events. */\n    apply(skeleton, lastTime, time, loop, events, alpha, blend, direction) {\n        if (!skeleton)\n            throw new Error(\"skeleton cannot be null.\");\n        if (loop && this.duration != 0) {\n            time %= this.duration;\n            if (lastTime > 0)\n                lastTime %= this.duration;\n        }\n        let timelines = this.timelines;\n        for (let i = 0, n = timelines.length; i < n; i++)\n            timelines[i].apply(skeleton, lastTime, time, events, alpha, blend, direction);\n    }\n}\n/** Controls how a timeline value is mixed with the setup pose value or current pose value when a timeline's `alpha`\n * < 1.\n *\n * See Timeline {@link Timeline#apply(Skeleton, float, float, Array, float, MixBlend, MixDirection)}. */\nexport var MixBlend;\n(function (MixBlend) {\n    /** Transitions from the setup value to the timeline value (the current value is not used). Before the first key, the setup\n     * value is set. */\n    MixBlend[MixBlend[\"setup\"] = 0] = \"setup\";\n    /** Transitions from the current value to the timeline value. Before the first key, transitions from the current value to\n     * the setup value. Timelines which perform instant transitions, such as {@link DrawOrderTimeline} or\n     * {@link AttachmentTimeline}, use the setup value before the first key.\n     *\n     * `first` is intended for the first animations applied, not for animations layered on top of those. */\n    MixBlend[MixBlend[\"first\"] = 1] = \"first\";\n    /** Transitions from the current value to the timeline value. No change is made before the first key (the current value is\n     * kept until the first key).\n     *\n     * `replace` is intended for animations layered on top of others, not for the first animations applied. */\n    MixBlend[MixBlend[\"replace\"] = 2] = \"replace\";\n    /** Transitions from the current value to the current value plus the timeline value. No change is made before the first key\n     * (the current value is kept until the first key).\n     *\n     * `add` is intended for animations layered on top of others, not for the first animations applied. Properties\n     * keyed by additive animations must be set manually or by another animation before applying the additive animations, else\n     * the property values will increase continually. */\n    MixBlend[MixBlend[\"add\"] = 3] = \"add\";\n})(MixBlend || (MixBlend = {}));\n/** Indicates whether a timeline's `alpha` is mixing out over time toward 0 (the setup or current pose value) or\n * mixing in toward 1 (the timeline's value).\n *\n * See Timeline {@link Timeline#apply(Skeleton, float, float, Array, float, MixBlend, MixDirection)}. */\nexport var MixDirection;\n(function (MixDirection) {\n    MixDirection[MixDirection[\"mixIn\"] = 0] = \"mixIn\";\n    MixDirection[MixDirection[\"mixOut\"] = 1] = \"mixOut\";\n})(MixDirection || (MixDirection = {}));\nconst Property = {\n    rotate: 0,\n    x: 1,\n    y: 2,\n    scaleX: 3,\n    scaleY: 4,\n    shearX: 5,\n    shearY: 6,\n    rgb: 7,\n    alpha: 8,\n    rgb2: 9,\n    attachment: 10,\n    deform: 11,\n    event: 12,\n    drawOrder: 13,\n    ikConstraint: 14,\n    transformConstraint: 15,\n    pathConstraintPosition: 16,\n    pathConstraintSpacing: 17,\n    pathConstraintMix: 18\n};\n/** The interface for all timelines. */\nexport class Timeline {\n    constructor(frameCount, propertyIds) {\n        this.propertyIds = propertyIds;\n        this.frames = Utils.newFloatArray(frameCount * this.getFrameEntries());\n    }\n    getPropertyIds() {\n        return this.propertyIds;\n    }\n    getFrameEntries() {\n        return 1;\n    }\n    getFrameCount() {\n        return this.frames.length / this.getFrameEntries();\n    }\n    getDuration() {\n        return this.frames[this.frames.length - this.getFrameEntries()];\n    }\n    static search1(frames, time) {\n        let n = frames.length;\n        for (let i = 1; i < n; i++)\n            if (frames[i] > time)\n                return i - 1;\n        return n - 1;\n    }\n    static search(frames, time, step) {\n        let n = frames.length;\n        for (let i = step; i < n; i += step)\n            if (frames[i] > time)\n                return i - step;\n        return n - step;\n    }\n}\n/** The base class for timelines that use interpolation between key frame values. */\nexport class CurveTimeline extends Timeline {\n    constructor(frameCount, bezierCount, propertyIds) {\n        super(frameCount, propertyIds);\n        this.curves = Utils.newFloatArray(frameCount + bezierCount * 18 /*BEZIER_SIZE*/);\n        this.curves[frameCount - 1] = 1 /*STEPPED*/;\n    }\n    /** Sets the specified key frame to linear interpolation. */\n    setLinear(frame) {\n        this.curves[frame] = 0 /*LINEAR*/;\n    }\n    /** Sets the specified key frame to stepped interpolation. */\n    setStepped(frame) {\n        this.curves[frame] = 1 /*STEPPED*/;\n    }\n    /** Shrinks the storage for Bezier curves, for use when <code>bezierCount</code> (specified in the constructor) was larger\n     * than the actual number of Bezier curves. */\n    shrink(bezierCount) {\n        let size = this.getFrameCount() + bezierCount * 18 /*BEZIER_SIZE*/;\n        if (this.curves.length > size) {\n            let newCurves = Utils.newFloatArray(size);\n            Utils.arrayCopy(this.curves, 0, newCurves, 0, size);\n            this.curves = newCurves;\n        }\n    }\n    /** Stores the segments for the specified Bezier curve. For timelines that modify multiple values, there may be more than\n     * one curve per frame.\n     * @param bezier The ordinal of this Bezier curve for this timeline, between 0 and <code>bezierCount - 1</code> (specified\n     *           in the constructor), inclusive.\n     * @param frame Between 0 and <code>frameCount - 1</code>, inclusive.\n     * @param value The index of the value for this frame that this curve is used for.\n     * @param time1 The time for the first key.\n     * @param value1 The value for the first key.\n     * @param cx1 The time for the first Bezier handle.\n     * @param cy1 The value for the first Bezier handle.\n     * @param cx2 The time of the second Bezier handle.\n     * @param cy2 The value for the second Bezier handle.\n     * @param time2 The time for the second key.\n     * @param value2 The value for the second key. */\n    setBezier(bezier, frame, value, time1, value1, cx1, cy1, cx2, cy2, time2, value2) {\n        let curves = this.curves;\n        let i = this.getFrameCount() + bezier * 18 /*BEZIER_SIZE*/;\n        if (value == 0)\n            curves[frame] = 2 /*BEZIER*/ + i;\n        let tmpx = (time1 - cx1 * 2 + cx2) * 0.03, tmpy = (value1 - cy1 * 2 + cy2) * 0.03;\n        let dddx = ((cx1 - cx2) * 3 - time1 + time2) * 0.006, dddy = ((cy1 - cy2) * 3 - value1 + value2) * 0.006;\n        let ddx = tmpx * 2 + dddx, ddy = tmpy * 2 + dddy;\n        let dx = (cx1 - time1) * 0.3 + tmpx + dddx * 0.16666667, dy = (cy1 - value1) * 0.3 + tmpy + dddy * 0.16666667;\n        let x = time1 + dx, y = value1 + dy;\n        for (let n = i + 18 /*BEZIER_SIZE*/; i < n; i += 2) {\n            curves[i] = x;\n            curves[i + 1] = y;\n            dx += ddx;\n            dy += ddy;\n            ddx += dddx;\n            ddy += dddy;\n            x += dx;\n            y += dy;\n        }\n    }\n    /** Returns the Bezier interpolated value for the specified time.\n     * @param frameIndex The index into {@link #getFrames()} for the values of the frame before <code>time</code>.\n     * @param valueOffset The offset from <code>frameIndex</code> to the value this curve is used for.\n     * @param i The index of the Bezier segments. See {@link #getCurveType(int)}. */\n    getBezierValue(time, frameIndex, valueOffset, i) {\n        let curves = this.curves;\n        if (curves[i] > time) {\n            let x = this.frames[frameIndex], y = this.frames[frameIndex + valueOffset];\n            return y + (time - x) / (curves[i] - x) * (curves[i + 1] - y);\n        }\n        let n = i + 18 /*BEZIER_SIZE*/;\n        for (i += 2; i < n; i += 2) {\n            if (curves[i] >= time) {\n                let x = curves[i - 2], y = curves[i - 1];\n                return y + (time - x) / (curves[i] - x) * (curves[i + 1] - y);\n            }\n        }\n        frameIndex += this.getFrameEntries();\n        let x = curves[n - 2], y = curves[n - 1];\n        return y + (time - x) / (this.frames[frameIndex] - x) * (this.frames[frameIndex + valueOffset] - y);\n    }\n}\nexport class CurveTimeline1 extends CurveTimeline {\n    constructor(frameCount, bezierCount, propertyId) {\n        super(frameCount, bezierCount, [propertyId]);\n    }\n    getFrameEntries() {\n        return 2 /*ENTRIES*/;\n    }\n    /** Sets the time and value for the specified frame.\n     * @param frame Between 0 and <code>frameCount</code>, inclusive.\n     * @param time The frame time in seconds. */\n    setFrame(frame, time, value) {\n        frame <<= 1;\n        this.frames[frame] = time;\n        this.frames[frame + 1 /*VALUE*/] = value;\n    }\n    /** Returns the interpolated value for the specified time. */\n    getCurveValue(time) {\n        let frames = this.frames;\n        let i = frames.length - 2;\n        for (let ii = 2; ii <= i; ii += 2) {\n            if (frames[ii] > time) {\n                i = ii - 2;\n                break;\n            }\n        }\n        let curveType = this.curves[i >> 1];\n        switch (curveType) {\n            case 0 /*LINEAR*/:\n                let before = frames[i], value = frames[i + 1 /*VALUE*/];\n                return value + (time - before) / (frames[i + 2 /*ENTRIES*/] - before) * (frames[i + 2 /*ENTRIES*/ + 1 /*VALUE*/] - value);\n            case 1 /*STEPPED*/:\n                return frames[i + 1 /*VALUE*/];\n        }\n        return this.getBezierValue(time, i, 1 /*VALUE*/, curveType - 2 /*BEZIER*/);\n    }\n}\n/** The base class for a {@link CurveTimeline} which sets two properties. */\nexport class CurveTimeline2 extends CurveTimeline {\n    /** @param bezierCount The maximum number of Bezier curves. See {@link #shrink(int)}.\n     * @param propertyIds Unique identifiers for the properties the timeline modifies. */\n    constructor(frameCount, bezierCount, propertyId1, propertyId2) {\n        super(frameCount, bezierCount, [propertyId1, propertyId2]);\n    }\n    getFrameEntries() {\n        return 3 /*ENTRIES*/;\n    }\n    /** Sets the time and values for the specified frame.\n     * @param frame Between 0 and <code>frameCount</code>, inclusive.\n     * @param time The frame time in seconds. */\n    setFrame(frame, time, value1, value2) {\n        frame *= 3 /*ENTRIES*/;\n        this.frames[frame] = time;\n        this.frames[frame + 1 /*VALUE1*/] = value1;\n        this.frames[frame + 2 /*VALUE2*/] = value2;\n    }\n}\n/** Changes a bone's local {@link Bone#rotation}. */\nexport class RotateTimeline extends CurveTimeline1 {\n    constructor(frameCount, bezierCount, boneIndex) {\n        super(frameCount, bezierCount, Property.rotate + \"|\" + boneIndex);\n        this.boneIndex = 0;\n        this.boneIndex = boneIndex;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let bone = skeleton.bones[this.boneIndex];\n        if (!bone.active)\n            return;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            switch (blend) {\n                case MixBlend.setup:\n                    bone.rotation = bone.data.rotation;\n                    return;\n                case MixBlend.first:\n                    bone.rotation += (bone.data.rotation - bone.rotation) * alpha;\n            }\n            return;\n        }\n        let r = this.getCurveValue(time);\n        switch (blend) {\n            case MixBlend.setup:\n                bone.rotation = bone.data.rotation + r * alpha;\n                break;\n            case MixBlend.first:\n            case MixBlend.replace:\n                r += bone.data.rotation - bone.rotation;\n            case MixBlend.add:\n                bone.rotation += r * alpha;\n        }\n    }\n}\n/** Changes a bone's local {@link Bone#x} and {@link Bone#y}. */\nexport class TranslateTimeline extends CurveTimeline2 {\n    constructor(frameCount, bezierCount, boneIndex) {\n        super(frameCount, bezierCount, Property.x + \"|\" + boneIndex, Property.y + \"|\" + boneIndex);\n        this.boneIndex = 0;\n        this.boneIndex = boneIndex;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let bone = skeleton.bones[this.boneIndex];\n        if (!bone.active)\n            return;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            switch (blend) {\n                case MixBlend.setup:\n                    bone.x = bone.data.x;\n                    bone.y = bone.data.y;\n                    return;\n                case MixBlend.first:\n                    bone.x += (bone.data.x - bone.x) * alpha;\n                    bone.y += (bone.data.y - bone.y) * alpha;\n            }\n            return;\n        }\n        let x = 0, y = 0;\n        let i = Timeline.search(frames, time, 3 /*ENTRIES*/);\n        let curveType = this.curves[i / 3 /*ENTRIES*/];\n        switch (curveType) {\n            case 0 /*LINEAR*/:\n                let before = frames[i];\n                x = frames[i + 1 /*VALUE1*/];\n                y = frames[i + 2 /*VALUE2*/];\n                let t = (time - before) / (frames[i + 3 /*ENTRIES*/] - before);\n                x += (frames[i + 3 /*ENTRIES*/ + 1 /*VALUE1*/] - x) * t;\n                y += (frames[i + 3 /*ENTRIES*/ + 2 /*VALUE2*/] - y) * t;\n                break;\n            case 1 /*STEPPED*/:\n                x = frames[i + 1 /*VALUE1*/];\n                y = frames[i + 2 /*VALUE2*/];\n                break;\n            default:\n                x = this.getBezierValue(time, i, 1 /*VALUE1*/, curveType - 2 /*BEZIER*/);\n                y = this.getBezierValue(time, i, 2 /*VALUE2*/, curveType + 18 /*BEZIER_SIZE*/ - 2 /*BEZIER*/);\n        }\n        switch (blend) {\n            case MixBlend.setup:\n                bone.x = bone.data.x + x * alpha;\n                bone.y = bone.data.y + y * alpha;\n                break;\n            case MixBlend.first:\n            case MixBlend.replace:\n                bone.x += (bone.data.x + x - bone.x) * alpha;\n                bone.y += (bone.data.y + y - bone.y) * alpha;\n                break;\n            case MixBlend.add:\n                bone.x += x * alpha;\n                bone.y += y * alpha;\n        }\n    }\n}\n/** Changes a bone's local {@link Bone#x}. */\nexport class TranslateXTimeline extends CurveTimeline1 {\n    constructor(frameCount, bezierCount, boneIndex) {\n        super(frameCount, bezierCount, Property.x + \"|\" + boneIndex);\n        this.boneIndex = 0;\n        this.boneIndex = boneIndex;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let bone = skeleton.bones[this.boneIndex];\n        if (!bone.active)\n            return;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            switch (blend) {\n                case MixBlend.setup:\n                    bone.x = bone.data.x;\n                    return;\n                case MixBlend.first:\n                    bone.x += (bone.data.x - bone.x) * alpha;\n            }\n            return;\n        }\n        let x = this.getCurveValue(time);\n        switch (blend) {\n            case MixBlend.setup:\n                bone.x = bone.data.x + x * alpha;\n                break;\n            case MixBlend.first:\n            case MixBlend.replace:\n                bone.x += (bone.data.x + x - bone.x) * alpha;\n                break;\n            case MixBlend.add:\n                bone.x += x * alpha;\n        }\n    }\n}\n/** Changes a bone's local {@link Bone#x}. */\nexport class TranslateYTimeline extends CurveTimeline1 {\n    constructor(frameCount, bezierCount, boneIndex) {\n        super(frameCount, bezierCount, Property.y + \"|\" + boneIndex);\n        this.boneIndex = 0;\n        this.boneIndex = boneIndex;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let bone = skeleton.bones[this.boneIndex];\n        if (!bone.active)\n            return;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            switch (blend) {\n                case MixBlend.setup:\n                    bone.y = bone.data.y;\n                    return;\n                case MixBlend.first:\n                    bone.y += (bone.data.y - bone.y) * alpha;\n            }\n            return;\n        }\n        let y = this.getCurveValue(time);\n        switch (blend) {\n            case MixBlend.setup:\n                bone.y = bone.data.y + y * alpha;\n                break;\n            case MixBlend.first:\n            case MixBlend.replace:\n                bone.y += (bone.data.y + y - bone.y) * alpha;\n                break;\n            case MixBlend.add:\n                bone.y += y * alpha;\n        }\n    }\n}\n/** Changes a bone's local {@link Bone#scaleX)} and {@link Bone#scaleY}. */\nexport class ScaleTimeline extends CurveTimeline2 {\n    constructor(frameCount, bezierCount, boneIndex) {\n        super(frameCount, bezierCount, Property.scaleX + \"|\" + boneIndex, Property.scaleY + \"|\" + boneIndex);\n        this.boneIndex = 0;\n        this.boneIndex = boneIndex;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let bone = skeleton.bones[this.boneIndex];\n        if (!bone.active)\n            return;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            switch (blend) {\n                case MixBlend.setup:\n                    bone.scaleX = bone.data.scaleX;\n                    bone.scaleY = bone.data.scaleY;\n                    return;\n                case MixBlend.first:\n                    bone.scaleX += (bone.data.scaleX - bone.scaleX) * alpha;\n                    bone.scaleY += (bone.data.scaleY - bone.scaleY) * alpha;\n            }\n            return;\n        }\n        let x, y;\n        let i = Timeline.search(frames, time, 3 /*ENTRIES*/);\n        let curveType = this.curves[i / 3 /*ENTRIES*/];\n        switch (curveType) {\n            case 0 /*LINEAR*/:\n                let before = frames[i];\n                x = frames[i + 1 /*VALUE1*/];\n                y = frames[i + 2 /*VALUE2*/];\n                let t = (time - before) / (frames[i + 3 /*ENTRIES*/] - before);\n                x += (frames[i + 3 /*ENTRIES*/ + 1 /*VALUE1*/] - x) * t;\n                y += (frames[i + 3 /*ENTRIES*/ + 2 /*VALUE2*/] - y) * t;\n                break;\n            case 1 /*STEPPED*/:\n                x = frames[i + 1 /*VALUE1*/];\n                y = frames[i + 2 /*VALUE2*/];\n                break;\n            default:\n                x = this.getBezierValue(time, i, 1 /*VALUE1*/, curveType - 2 /*BEZIER*/);\n                y = this.getBezierValue(time, i, 2 /*VALUE2*/, curveType + 18 /*BEZIER_SIZE*/ - 2 /*BEZIER*/);\n        }\n        x *= bone.data.scaleX;\n        y *= bone.data.scaleY;\n        if (alpha == 1) {\n            if (blend == MixBlend.add) {\n                bone.scaleX += x - bone.data.scaleX;\n                bone.scaleY += y - bone.data.scaleY;\n            }\n            else {\n                bone.scaleX = x;\n                bone.scaleY = y;\n            }\n        }\n        else {\n            let bx = 0, by = 0;\n            if (direction == MixDirection.mixOut) {\n                switch (blend) {\n                    case MixBlend.setup:\n                        bx = bone.data.scaleX;\n                        by = bone.data.scaleY;\n                        bone.scaleX = bx + (Math.abs(x) * MathUtils.signum(bx) - bx) * alpha;\n                        bone.scaleY = by + (Math.abs(y) * MathUtils.signum(by) - by) * alpha;\n                        break;\n                    case MixBlend.first:\n                    case MixBlend.replace:\n                        bx = bone.scaleX;\n                        by = bone.scaleY;\n                        bone.scaleX = bx + (Math.abs(x) * MathUtils.signum(bx) - bx) * alpha;\n                        bone.scaleY = by + (Math.abs(y) * MathUtils.signum(by) - by) * alpha;\n                        break;\n                    case MixBlend.add:\n                        bone.scaleX = (x - bone.data.scaleX) * alpha;\n                        bone.scaleY = (y - bone.data.scaleY) * alpha;\n                }\n            }\n            else {\n                switch (blend) {\n                    case MixBlend.setup:\n                        bx = Math.abs(bone.data.scaleX) * MathUtils.signum(x);\n                        by = Math.abs(bone.data.scaleY) * MathUtils.signum(y);\n                        bone.scaleX = bx + (x - bx) * alpha;\n                        bone.scaleY = by + (y - by) * alpha;\n                        break;\n                    case MixBlend.first:\n                    case MixBlend.replace:\n                        bx = Math.abs(bone.scaleX) * MathUtils.signum(x);\n                        by = Math.abs(bone.scaleY) * MathUtils.signum(y);\n                        bone.scaleX = bx + (x - bx) * alpha;\n                        bone.scaleY = by + (y - by) * alpha;\n                        break;\n                    case MixBlend.add:\n                        bone.scaleX += (x - bone.data.scaleX) * alpha;\n                        bone.scaleY += (y - bone.data.scaleY) * alpha;\n                }\n            }\n        }\n    }\n}\n/** Changes a bone's local {@link Bone#scaleX)} and {@link Bone#scaleY}. */\nexport class ScaleXTimeline extends CurveTimeline1 {\n    constructor(frameCount, bezierCount, boneIndex) {\n        super(frameCount, bezierCount, Property.scaleX + \"|\" + boneIndex);\n        this.boneIndex = 0;\n        this.boneIndex = boneIndex;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let bone = skeleton.bones[this.boneIndex];\n        if (!bone.active)\n            return;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            switch (blend) {\n                case MixBlend.setup:\n                    bone.scaleX = bone.data.scaleX;\n                    return;\n                case MixBlend.first:\n                    bone.scaleX += (bone.data.scaleX - bone.scaleX) * alpha;\n            }\n            return;\n        }\n        let x = this.getCurveValue(time) * bone.data.scaleX;\n        if (alpha == 1) {\n            if (blend == MixBlend.add)\n                bone.scaleX += x - bone.data.scaleX;\n            else\n                bone.scaleX = x;\n        }\n        else {\n            // Mixing out uses sign of setup or current pose, else use sign of key.\n            let bx = 0;\n            if (direction == MixDirection.mixOut) {\n                switch (blend) {\n                    case MixBlend.setup:\n                        bx = bone.data.scaleX;\n                        bone.scaleX = bx + (Math.abs(x) * MathUtils.signum(bx) - bx) * alpha;\n                        break;\n                    case MixBlend.first:\n                    case MixBlend.replace:\n                        bx = bone.scaleX;\n                        bone.scaleX = bx + (Math.abs(x) * MathUtils.signum(bx) - bx) * alpha;\n                        break;\n                    case MixBlend.add:\n                        bone.scaleX = (x - bone.data.scaleX) * alpha;\n                }\n            }\n            else {\n                switch (blend) {\n                    case MixBlend.setup:\n                        bx = Math.abs(bone.data.scaleX) * MathUtils.signum(x);\n                        bone.scaleX = bx + (x - bx) * alpha;\n                        break;\n                    case MixBlend.first:\n                    case MixBlend.replace:\n                        bx = Math.abs(bone.scaleX) * MathUtils.signum(x);\n                        bone.scaleX = bx + (x - bx) * alpha;\n                        break;\n                    case MixBlend.add:\n                        bone.scaleX += (x - bone.data.scaleX) * alpha;\n                }\n            }\n        }\n    }\n}\n/** Changes a bone's local {@link Bone#scaleX)} and {@link Bone#scaleY}. */\nexport class ScaleYTimeline extends CurveTimeline1 {\n    constructor(frameCount, bezierCount, boneIndex) {\n        super(frameCount, bezierCount, Property.scaleY + \"|\" + boneIndex);\n        this.boneIndex = 0;\n        this.boneIndex = boneIndex;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let bone = skeleton.bones[this.boneIndex];\n        if (!bone.active)\n            return;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            switch (blend) {\n                case MixBlend.setup:\n                    bone.scaleY = bone.data.scaleY;\n                    return;\n                case MixBlend.first:\n                    bone.scaleY += (bone.data.scaleY - bone.scaleY) * alpha;\n            }\n            return;\n        }\n        let y = this.getCurveValue(time) * bone.data.scaleY;\n        if (alpha == 1) {\n            if (blend == MixBlend.add)\n                bone.scaleY += y - bone.data.scaleY;\n            else\n                bone.scaleY = y;\n        }\n        else {\n            // Mixing out uses sign of setup or current pose, else use sign of key.\n            let by = 0;\n            if (direction == MixDirection.mixOut) {\n                switch (blend) {\n                    case MixBlend.setup:\n                        by = bone.data.scaleY;\n                        bone.scaleY = by + (Math.abs(y) * MathUtils.signum(by) - by) * alpha;\n                        break;\n                    case MixBlend.first:\n                    case MixBlend.replace:\n                        by = bone.scaleY;\n                        bone.scaleY = by + (Math.abs(y) * MathUtils.signum(by) - by) * alpha;\n                        break;\n                    case MixBlend.add:\n                        bone.scaleY = (y - bone.data.scaleY) * alpha;\n                }\n            }\n            else {\n                switch (blend) {\n                    case MixBlend.setup:\n                        by = Math.abs(bone.data.scaleY) * MathUtils.signum(y);\n                        bone.scaleY = by + (y - by) * alpha;\n                        break;\n                    case MixBlend.first:\n                    case MixBlend.replace:\n                        by = Math.abs(bone.scaleY) * MathUtils.signum(y);\n                        bone.scaleY = by + (y - by) * alpha;\n                        break;\n                    case MixBlend.add:\n                        bone.scaleY += (y - bone.data.scaleY) * alpha;\n                }\n            }\n        }\n    }\n}\n/** Changes a bone's local {@link Bone#shearX} and {@link Bone#shearY}. */\nexport class ShearTimeline extends CurveTimeline2 {\n    constructor(frameCount, bezierCount, boneIndex) {\n        super(frameCount, bezierCount, Property.shearX + \"|\" + boneIndex, Property.shearY + \"|\" + boneIndex);\n        this.boneIndex = 0;\n        this.boneIndex = boneIndex;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let bone = skeleton.bones[this.boneIndex];\n        if (!bone.active)\n            return;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            switch (blend) {\n                case MixBlend.setup:\n                    bone.shearX = bone.data.shearX;\n                    bone.shearY = bone.data.shearY;\n                    return;\n                case MixBlend.first:\n                    bone.shearX += (bone.data.shearX - bone.shearX) * alpha;\n                    bone.shearY += (bone.data.shearY - bone.shearY) * alpha;\n            }\n            return;\n        }\n        let x = 0, y = 0;\n        let i = Timeline.search(frames, time, 3 /*ENTRIES*/);\n        let curveType = this.curves[i / 3 /*ENTRIES*/];\n        switch (curveType) {\n            case 0 /*LINEAR*/:\n                let before = frames[i];\n                x = frames[i + 1 /*VALUE1*/];\n                y = frames[i + 2 /*VALUE2*/];\n                let t = (time - before) / (frames[i + 3 /*ENTRIES*/] - before);\n                x += (frames[i + 3 /*ENTRIES*/ + 1 /*VALUE1*/] - x) * t;\n                y += (frames[i + 3 /*ENTRIES*/ + 2 /*VALUE2*/] - y) * t;\n                break;\n            case 1 /*STEPPED*/:\n                x = frames[i + 1 /*VALUE1*/];\n                y = frames[i + 2 /*VALUE2*/];\n                break;\n            default:\n                x = this.getBezierValue(time, i, 1 /*VALUE1*/, curveType - 2 /*BEZIER*/);\n                y = this.getBezierValue(time, i, 2 /*VALUE2*/, curveType + 18 /*BEZIER_SIZE*/ - 2 /*BEZIER*/);\n        }\n        switch (blend) {\n            case MixBlend.setup:\n                bone.shearX = bone.data.shearX + x * alpha;\n                bone.shearY = bone.data.shearY + y * alpha;\n                break;\n            case MixBlend.first:\n            case MixBlend.replace:\n                bone.shearX += (bone.data.shearX + x - bone.shearX) * alpha;\n                bone.shearY += (bone.data.shearY + y - bone.shearY) * alpha;\n                break;\n            case MixBlend.add:\n                bone.shearX += x * alpha;\n                bone.shearY += y * alpha;\n        }\n    }\n}\n/** Changes a bone's local {@link Bone#shearX} and {@link Bone#shearY}. */\nexport class ShearXTimeline extends CurveTimeline1 {\n    constructor(frameCount, bezierCount, boneIndex) {\n        super(frameCount, bezierCount, Property.shearX + \"|\" + boneIndex);\n        this.boneIndex = 0;\n        this.boneIndex = boneIndex;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let bone = skeleton.bones[this.boneIndex];\n        if (!bone.active)\n            return;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            switch (blend) {\n                case MixBlend.setup:\n                    bone.shearX = bone.data.shearX;\n                    return;\n                case MixBlend.first:\n                    bone.shearX += (bone.data.shearX - bone.shearX) * alpha;\n            }\n            return;\n        }\n        let x = this.getCurveValue(time);\n        switch (blend) {\n            case MixBlend.setup:\n                bone.shearX = bone.data.shearX + x * alpha;\n                break;\n            case MixBlend.first:\n            case MixBlend.replace:\n                bone.shearX += (bone.data.shearX + x - bone.shearX) * alpha;\n                break;\n            case MixBlend.add:\n                bone.shearX += x * alpha;\n        }\n    }\n}\n/** Changes a bone's local {@link Bone#shearX} and {@link Bone#shearY}. */\nexport class ShearYTimeline extends CurveTimeline1 {\n    constructor(frameCount, bezierCount, boneIndex) {\n        super(frameCount, bezierCount, Property.shearY + \"|\" + boneIndex);\n        this.boneIndex = 0;\n        this.boneIndex = boneIndex;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let bone = skeleton.bones[this.boneIndex];\n        if (!bone.active)\n            return;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            switch (blend) {\n                case MixBlend.setup:\n                    bone.shearY = bone.data.shearY;\n                    return;\n                case MixBlend.first:\n                    bone.shearY += (bone.data.shearY - bone.shearY) * alpha;\n            }\n            return;\n        }\n        let y = this.getCurveValue(time);\n        switch (blend) {\n            case MixBlend.setup:\n                bone.shearY = bone.data.shearY + y * alpha;\n                break;\n            case MixBlend.first:\n            case MixBlend.replace:\n                bone.shearY += (bone.data.shearY + y - bone.shearY) * alpha;\n                break;\n            case MixBlend.add:\n                bone.shearY += y * alpha;\n        }\n    }\n}\n/** Changes a slot's {@link Slot#color}. */\nexport class RGBATimeline extends CurveTimeline {\n    constructor(frameCount, bezierCount, slotIndex) {\n        super(frameCount, bezierCount, [\n            Property.rgb + \"|\" + slotIndex,\n            Property.alpha + \"|\" + slotIndex\n        ]);\n        this.slotIndex = 0;\n        this.slotIndex = slotIndex;\n    }\n    getFrameEntries() {\n        return 5 /*ENTRIES*/;\n    }\n    /** Sets the time in seconds, red, green, blue, and alpha for the specified key frame. */\n    setFrame(frame, time, r, g, b, a) {\n        frame *= 5 /*ENTRIES*/;\n        this.frames[frame] = time;\n        this.frames[frame + 1 /*R*/] = r;\n        this.frames[frame + 2 /*G*/] = g;\n        this.frames[frame + 3 /*B*/] = b;\n        this.frames[frame + 4 /*A*/] = a;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let slot = skeleton.slots[this.slotIndex];\n        if (!slot.bone.active)\n            return;\n        let frames = this.frames;\n        let color = slot.color;\n        if (time < frames[0]) {\n            let setup = slot.data.color;\n            switch (blend) {\n                case MixBlend.setup:\n                    color.setFromColor(setup);\n                    return;\n                case MixBlend.first:\n                    color.add((setup.r - color.r) * alpha, (setup.g - color.g) * alpha, (setup.b - color.b) * alpha, (setup.a - color.a) * alpha);\n            }\n            return;\n        }\n        let r = 0, g = 0, b = 0, a = 0;\n        let i = Timeline.search(frames, time, 5 /*ENTRIES*/);\n        let curveType = this.curves[i / 5 /*ENTRIES*/];\n        switch (curveType) {\n            case 0 /*LINEAR*/:\n                let before = frames[i];\n                r = frames[i + 1 /*R*/];\n                g = frames[i + 2 /*G*/];\n                b = frames[i + 3 /*B*/];\n                a = frames[i + 4 /*A*/];\n                let t = (time - before) / (frames[i + 5 /*ENTRIES*/] - before);\n                r += (frames[i + 5 /*ENTRIES*/ + 1 /*R*/] - r) * t;\n                g += (frames[i + 5 /*ENTRIES*/ + 2 /*G*/] - g) * t;\n                b += (frames[i + 5 /*ENTRIES*/ + 3 /*B*/] - b) * t;\n                a += (frames[i + 5 /*ENTRIES*/ + 4 /*A*/] - a) * t;\n                break;\n            case 1 /*STEPPED*/:\n                r = frames[i + 1 /*R*/];\n                g = frames[i + 2 /*G*/];\n                b = frames[i + 3 /*B*/];\n                a = frames[i + 4 /*A*/];\n                break;\n            default:\n                r = this.getBezierValue(time, i, 1 /*R*/, curveType - 2 /*BEZIER*/);\n                g = this.getBezierValue(time, i, 2 /*G*/, curveType + 18 /*BEZIER_SIZE*/ - 2 /*BEZIER*/);\n                b = this.getBezierValue(time, i, 3 /*B*/, curveType + 18 /*BEZIER_SIZE*/ * 2 - 2 /*BEZIER*/);\n                a = this.getBezierValue(time, i, 4 /*A*/, curveType + 18 /*BEZIER_SIZE*/ * 3 - 2 /*BEZIER*/);\n        }\n        if (alpha == 1)\n            color.set(r, g, b, a);\n        else {\n            if (blend == MixBlend.setup)\n                color.setFromColor(slot.data.color);\n            color.add((r - color.r) * alpha, (g - color.g) * alpha, (b - color.b) * alpha, (a - color.a) * alpha);\n        }\n    }\n}\n/** Changes a slot's {@link Slot#color}. */\nexport class RGBTimeline extends CurveTimeline {\n    constructor(frameCount, bezierCount, slotIndex) {\n        super(frameCount, bezierCount, [\n            Property.rgb + \"|\" + slotIndex\n        ]);\n        this.slotIndex = 0;\n        this.slotIndex = slotIndex;\n    }\n    getFrameEntries() {\n        return 4 /*ENTRIES*/;\n    }\n    /** Sets the time in seconds, red, green, blue, and alpha for the specified key frame. */\n    setFrame(frame, time, r, g, b) {\n        frame <<= 2;\n        this.frames[frame] = time;\n        this.frames[frame + 1 /*R*/] = r;\n        this.frames[frame + 2 /*G*/] = g;\n        this.frames[frame + 3 /*B*/] = b;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let slot = skeleton.slots[this.slotIndex];\n        if (!slot.bone.active)\n            return;\n        let frames = this.frames;\n        let color = slot.color;\n        if (time < frames[0]) {\n            let setup = slot.data.color;\n            switch (blend) {\n                case MixBlend.setup:\n                    color.r = setup.r;\n                    color.g = setup.g;\n                    color.b = setup.b;\n                    return;\n                case MixBlend.first:\n                    color.r += (setup.r - color.r) * alpha;\n                    color.g += (setup.g - color.g) * alpha;\n                    color.b += (setup.b - color.b) * alpha;\n            }\n            return;\n        }\n        let r = 0, g = 0, b = 0;\n        let i = Timeline.search(frames, time, 4 /*ENTRIES*/);\n        let curveType = this.curves[i >> 2];\n        switch (curveType) {\n            case 0 /*LINEAR*/:\n                let before = frames[i];\n                r = frames[i + 1 /*R*/];\n                g = frames[i + 2 /*G*/];\n                b = frames[i + 3 /*B*/];\n                let t = (time - before) / (frames[i + 4 /*ENTRIES*/] - before);\n                r += (frames[i + 4 /*ENTRIES*/ + 1 /*R*/] - r) * t;\n                g += (frames[i + 4 /*ENTRIES*/ + 2 /*G*/] - g) * t;\n                b += (frames[i + 4 /*ENTRIES*/ + 3 /*B*/] - b) * t;\n                break;\n            case 1 /*STEPPED*/:\n                r = frames[i + 1 /*R*/];\n                g = frames[i + 2 /*G*/];\n                b = frames[i + 3 /*B*/];\n                break;\n            default:\n                r = this.getBezierValue(time, i, 1 /*R*/, curveType - 2 /*BEZIER*/);\n                g = this.getBezierValue(time, i, 2 /*G*/, curveType + 18 /*BEZIER_SIZE*/ - 2 /*BEZIER*/);\n                b = this.getBezierValue(time, i, 3 /*B*/, curveType + 18 /*BEZIER_SIZE*/ * 2 - 2 /*BEZIER*/);\n        }\n        if (alpha == 1) {\n            color.r = r;\n            color.g = g;\n            color.b = b;\n        }\n        else {\n            if (blend == MixBlend.setup) {\n                let setup = slot.data.color;\n                color.r = setup.r;\n                color.g = setup.g;\n                color.b = setup.b;\n            }\n            color.r += (r - color.r) * alpha;\n            color.g += (g - color.g) * alpha;\n            color.b += (b - color.b) * alpha;\n        }\n    }\n}\n/** Changes a bone's local {@link Bone#shearX} and {@link Bone#shearY}. */\nexport class AlphaTimeline extends CurveTimeline1 {\n    constructor(frameCount, bezierCount, slotIndex) {\n        super(frameCount, bezierCount, Property.alpha + \"|\" + slotIndex);\n        this.slotIndex = 0;\n        this.slotIndex = slotIndex;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let slot = skeleton.slots[this.slotIndex];\n        if (!slot.bone.active)\n            return;\n        let color = slot.color;\n        if (time < this.frames[0]) { // Time is before first frame.\n            let setup = slot.data.color;\n            switch (blend) {\n                case MixBlend.setup:\n                    color.a = setup.a;\n                    return;\n                case MixBlend.first:\n                    color.a += (setup.a - color.a) * alpha;\n            }\n            return;\n        }\n        let a = this.getCurveValue(time);\n        if (alpha == 1)\n            color.a = a;\n        else {\n            if (blend == MixBlend.setup)\n                color.a = slot.data.color.a;\n            color.a += (a - color.a) * alpha;\n        }\n    }\n}\n/** Changes a slot's {@link Slot#color} and {@link Slot#darkColor} for two color tinting. */\nexport class RGBA2Timeline extends CurveTimeline {\n    constructor(frameCount, bezierCount, slotIndex) {\n        super(frameCount, bezierCount, [\n            Property.rgb + \"|\" + slotIndex,\n            Property.alpha + \"|\" + slotIndex,\n            Property.rgb2 + \"|\" + slotIndex\n        ]);\n        this.slotIndex = 0;\n        this.slotIndex = slotIndex;\n    }\n    getFrameEntries() {\n        return 8 /*ENTRIES*/;\n    }\n    /** Sets the time in seconds, light, and dark colors for the specified key frame. */\n    setFrame(frame, time, r, g, b, a, r2, g2, b2) {\n        frame <<= 3;\n        this.frames[frame] = time;\n        this.frames[frame + 1 /*R*/] = r;\n        this.frames[frame + 2 /*G*/] = g;\n        this.frames[frame + 3 /*B*/] = b;\n        this.frames[frame + 4 /*A*/] = a;\n        this.frames[frame + 5 /*R2*/] = r2;\n        this.frames[frame + 6 /*G2*/] = g2;\n        this.frames[frame + 7 /*B2*/] = b2;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let slot = skeleton.slots[this.slotIndex];\n        if (!slot.bone.active)\n            return;\n        let frames = this.frames;\n        let light = slot.color, dark = slot.darkColor;\n        if (time < frames[0]) {\n            let setupLight = slot.data.color, setupDark = slot.data.darkColor;\n            switch (blend) {\n                case MixBlend.setup:\n                    light.setFromColor(setupLight);\n                    dark.r = setupDark.r;\n                    dark.g = setupDark.g;\n                    dark.b = setupDark.b;\n                    return;\n                case MixBlend.first:\n                    light.add((setupLight.r - light.r) * alpha, (setupLight.g - light.g) * alpha, (setupLight.b - light.b) * alpha, (setupLight.a - light.a) * alpha);\n                    dark.r += (setupDark.r - dark.r) * alpha;\n                    dark.g += (setupDark.g - dark.g) * alpha;\n                    dark.b += (setupDark.b - dark.b) * alpha;\n            }\n            return;\n        }\n        let r = 0, g = 0, b = 0, a = 0, r2 = 0, g2 = 0, b2 = 0;\n        let i = Timeline.search(frames, time, 8 /*ENTRIES*/);\n        let curveType = this.curves[i >> 3];\n        switch (curveType) {\n            case 0 /*LINEAR*/:\n                let before = frames[i];\n                r = frames[i + 1 /*R*/];\n                g = frames[i + 2 /*G*/];\n                b = frames[i + 3 /*B*/];\n                a = frames[i + 4 /*A*/];\n                r2 = frames[i + 5 /*R2*/];\n                g2 = frames[i + 6 /*G2*/];\n                b2 = frames[i + 7 /*B2*/];\n                let t = (time - before) / (frames[i + 8 /*ENTRIES*/] - before);\n                r += (frames[i + 8 /*ENTRIES*/ + 1 /*R*/] - r) * t;\n                g += (frames[i + 8 /*ENTRIES*/ + 2 /*G*/] - g) * t;\n                b += (frames[i + 8 /*ENTRIES*/ + 3 /*B*/] - b) * t;\n                a += (frames[i + 8 /*ENTRIES*/ + 4 /*A*/] - a) * t;\n                r2 += (frames[i + 8 /*ENTRIES*/ + 5 /*R2*/] - r2) * t;\n                g2 += (frames[i + 8 /*ENTRIES*/ + 6 /*G2*/] - g2) * t;\n                b2 += (frames[i + 8 /*ENTRIES*/ + 7 /*B2*/] - b2) * t;\n                break;\n            case 1 /*STEPPED*/:\n                r = frames[i + 1 /*R*/];\n                g = frames[i + 2 /*G*/];\n                b = frames[i + 3 /*B*/];\n                a = frames[i + 4 /*A*/];\n                r2 = frames[i + 5 /*R2*/];\n                g2 = frames[i + 6 /*G2*/];\n                b2 = frames[i + 7 /*B2*/];\n                break;\n            default:\n                r = this.getBezierValue(time, i, 1 /*R*/, curveType - 2 /*BEZIER*/);\n                g = this.getBezierValue(time, i, 2 /*G*/, curveType + 18 /*BEZIER_SIZE*/ - 2 /*BEZIER*/);\n                b = this.getBezierValue(time, i, 3 /*B*/, curveType + 18 /*BEZIER_SIZE*/ * 2 - 2 /*BEZIER*/);\n                a = this.getBezierValue(time, i, 4 /*A*/, curveType + 18 /*BEZIER_SIZE*/ * 3 - 2 /*BEZIER*/);\n                r2 = this.getBezierValue(time, i, 5 /*R2*/, curveType + 18 /*BEZIER_SIZE*/ * 4 - 2 /*BEZIER*/);\n                g2 = this.getBezierValue(time, i, 6 /*G2*/, curveType + 18 /*BEZIER_SIZE*/ * 5 - 2 /*BEZIER*/);\n                b2 = this.getBezierValue(time, i, 7 /*B2*/, curveType + 18 /*BEZIER_SIZE*/ * 6 - 2 /*BEZIER*/);\n        }\n        if (alpha == 1) {\n            light.set(r, g, b, a);\n            dark.r = r2;\n            dark.g = g2;\n            dark.b = b2;\n        }\n        else {\n            if (blend == MixBlend.setup) {\n                light.setFromColor(slot.data.color);\n                let setupDark = slot.data.darkColor;\n                dark.r = setupDark.r;\n                dark.g = setupDark.g;\n                dark.b = setupDark.b;\n            }\n            light.add((r - light.r) * alpha, (g - light.g) * alpha, (b - light.b) * alpha, (a - light.a) * alpha);\n            dark.r += (r2 - dark.r) * alpha;\n            dark.g += (g2 - dark.g) * alpha;\n            dark.b += (b2 - dark.b) * alpha;\n        }\n    }\n}\n/** Changes a slot's {@link Slot#color} and {@link Slot#darkColor} for two color tinting. */\nexport class RGB2Timeline extends CurveTimeline {\n    constructor(frameCount, bezierCount, slotIndex) {\n        super(frameCount, bezierCount, [\n            Property.rgb + \"|\" + slotIndex,\n            Property.rgb2 + \"|\" + slotIndex\n        ]);\n        this.slotIndex = 0;\n        this.slotIndex = slotIndex;\n    }\n    getFrameEntries() {\n        return 7 /*ENTRIES*/;\n    }\n    /** Sets the time in seconds, light, and dark colors for the specified key frame. */\n    setFrame(frame, time, r, g, b, r2, g2, b2) {\n        frame *= 7 /*ENTRIES*/;\n        this.frames[frame] = time;\n        this.frames[frame + 1 /*R*/] = r;\n        this.frames[frame + 2 /*G*/] = g;\n        this.frames[frame + 3 /*B*/] = b;\n        this.frames[frame + 4 /*R2*/] = r2;\n        this.frames[frame + 5 /*G2*/] = g2;\n        this.frames[frame + 6 /*B2*/] = b2;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let slot = skeleton.slots[this.slotIndex];\n        if (!slot.bone.active)\n            return;\n        let frames = this.frames;\n        let light = slot.color, dark = slot.darkColor;\n        if (time < frames[0]) {\n            let setupLight = slot.data.color, setupDark = slot.data.darkColor;\n            switch (blend) {\n                case MixBlend.setup:\n                    light.r = setupLight.r;\n                    light.g = setupLight.g;\n                    light.b = setupLight.b;\n                    dark.r = setupDark.r;\n                    dark.g = setupDark.g;\n                    dark.b = setupDark.b;\n                    return;\n                case MixBlend.first:\n                    light.r += (setupLight.r - light.r) * alpha;\n                    light.g += (setupLight.g - light.g) * alpha;\n                    light.b += (setupLight.b - light.b) * alpha;\n                    dark.r += (setupDark.r - dark.r) * alpha;\n                    dark.g += (setupDark.g - dark.g) * alpha;\n                    dark.b += (setupDark.b - dark.b) * alpha;\n            }\n            return;\n        }\n        let r = 0, g = 0, b = 0, a = 0, r2 = 0, g2 = 0, b2 = 0;\n        let i = Timeline.search(frames, time, 7 /*ENTRIES*/);\n        let curveType = this.curves[i / 7 /*ENTRIES*/];\n        switch (curveType) {\n            case 0 /*LINEAR*/:\n                let before = frames[i];\n                r = frames[i + 1 /*R*/];\n                g = frames[i + 2 /*G*/];\n                b = frames[i + 3 /*B*/];\n                r2 = frames[i + 4 /*R2*/];\n                g2 = frames[i + 5 /*G2*/];\n                b2 = frames[i + 6 /*B2*/];\n                let t = (time - before) / (frames[i + 7 /*ENTRIES*/] - before);\n                r += (frames[i + 7 /*ENTRIES*/ + 1 /*R*/] - r) * t;\n                g += (frames[i + 7 /*ENTRIES*/ + 2 /*G*/] - g) * t;\n                b += (frames[i + 7 /*ENTRIES*/ + 3 /*B*/] - b) * t;\n                r2 += (frames[i + 7 /*ENTRIES*/ + 4 /*R2*/] - r2) * t;\n                g2 += (frames[i + 7 /*ENTRIES*/ + 5 /*G2*/] - g2) * t;\n                b2 += (frames[i + 7 /*ENTRIES*/ + 6 /*B2*/] - b2) * t;\n                break;\n            case 1 /*STEPPED*/:\n                r = frames[i + 1 /*R*/];\n                g = frames[i + 2 /*G*/];\n                b = frames[i + 3 /*B*/];\n                r2 = frames[i + 4 /*R2*/];\n                g2 = frames[i + 5 /*G2*/];\n                b2 = frames[i + 6 /*B2*/];\n                break;\n            default:\n                r = this.getBezierValue(time, i, 1 /*R*/, curveType - 2 /*BEZIER*/);\n                g = this.getBezierValue(time, i, 2 /*G*/, curveType + 18 /*BEZIER_SIZE*/ - 2 /*BEZIER*/);\n                b = this.getBezierValue(time, i, 3 /*B*/, curveType + 18 /*BEZIER_SIZE*/ * 2 - 2 /*BEZIER*/);\n                r2 = this.getBezierValue(time, i, 4 /*R2*/, curveType + 18 /*BEZIER_SIZE*/ * 3 - 2 /*BEZIER*/);\n                g2 = this.getBezierValue(time, i, 5 /*G2*/, curveType + 18 /*BEZIER_SIZE*/ * 4 - 2 /*BEZIER*/);\n                b2 = this.getBezierValue(time, i, 6 /*B2*/, curveType + 18 /*BEZIER_SIZE*/ * 5 - 2 /*BEZIER*/);\n        }\n        if (alpha == 1) {\n            light.r = r;\n            light.g = g;\n            light.b = b;\n            dark.r = r2;\n            dark.g = g2;\n            dark.b = b2;\n        }\n        else {\n            if (blend == MixBlend.setup) {\n                let setupLight = slot.data.color, setupDark = slot.data.darkColor;\n                light.r = setupLight.r;\n                light.g = setupLight.g;\n                light.b = setupLight.b;\n                dark.r = setupDark.r;\n                dark.g = setupDark.g;\n                dark.b = setupDark.b;\n            }\n            light.r += (r - light.r) * alpha;\n            light.g += (g - light.g) * alpha;\n            light.b += (b - light.b) * alpha;\n            dark.r += (r2 - dark.r) * alpha;\n            dark.g += (g2 - dark.g) * alpha;\n            dark.b += (b2 - dark.b) * alpha;\n        }\n    }\n}\n/** Changes a slot's {@link Slot#attachment}. */\nexport class AttachmentTimeline extends Timeline {\n    constructor(frameCount, slotIndex) {\n        super(frameCount, [\n            Property.attachment + \"|\" + slotIndex\n        ]);\n        this.slotIndex = 0;\n        this.slotIndex = slotIndex;\n        this.attachmentNames = new Array(frameCount);\n    }\n    getFrameCount() {\n        return this.frames.length;\n    }\n    /** Sets the time in seconds and the attachment name for the specified key frame. */\n    setFrame(frame, time, attachmentName) {\n        this.frames[frame] = time;\n        this.attachmentNames[frame] = attachmentName;\n    }\n    apply(skeleton, lastTime, time, events, alpha, blend, direction) {\n        let slot = skeleton.slots[this.slotIndex];\n        if (!slot.bone.active)\n            return;\n        if (direction == MixDirection.mixOut) {\n            if (blend == MixBlend.setup)\n                this.setAttachment(skeleton, slot, slot.data.attachmentName);\n            return;\n        }\n        if (time < this.frames[0]) {\n            if (blend == MixBlend.setup || blend == MixBlend.first)\n                this.setAttachment(skeleton, slot, slot.data.attachmentName);\n            return;\n        }\n        this.setAttachment(skeleton, slot, this.attachmentNames[Timeline.search1(this.frames, time)]);\n    }\n    setAttachment(skeleton, slot, attachmentName) {\n        slot.setAttachment(!attachmentName ? null : skeleton.getAttachment(this.slotIndex, attachmentName));\n    }\n}\n/** Changes a slot's {@link Slot#deform} to deform a {@link VertexAttachment}. */\nexport class DeformTimeline extends CurveTimeline {\n    constructor(frameCount, bezierCount, slotIndex, attachment) {\n        super(frameCount, bezierCount, [\n            Property.deform + \"|\" + slotIndex + \"|\" + attachment.id\n        ]);\n        this.slotIndex = 0;\n        this.slotIndex = slotIndex;\n        this.attachment = attachment;\n        this.vertices = new Array(frameCount);\n    }\n    getFrameCount() {\n        return this.frames.length;\n    }\n    /** Sets the time in seconds and the vertices for the specified key frame.\n     * @param vertices Vertex positions for an unweighted VertexAttachment, or deform offsets if it has weights. */\n    setFrame(frame, time, vertices) {\n        this.frames[frame] = time;\n        this.vertices[frame] = vertices;\n    }\n    /** @param value1 Ignored (0 is used for a deform timeline).\n     * @param value2 Ignored (1 is used for a deform timeline). */\n    setBezier(bezier, frame, value, time1, value1, cx1, cy1, cx2, cy2, time2, value2) {\n        let curves = this.curves;\n        let i = this.getFrameCount() + bezier * 18 /*BEZIER_SIZE*/;\n        if (value == 0)\n            curves[frame] = 2 /*BEZIER*/ + i;\n        let tmpx = (time1 - cx1 * 2 + cx2) * 0.03, tmpy = cy2 * 0.03 - cy1 * 0.06;\n        let dddx = ((cx1 - cx2) * 3 - time1 + time2) * 0.006, dddy = (cy1 - cy2 + 0.33333333) * 0.018;\n        let ddx = tmpx * 2 + dddx, ddy = tmpy * 2 + dddy;\n        let dx = (cx1 - time1) * 0.3 + tmpx + dddx * 0.16666667, dy = cy1 * 0.3 + tmpy + dddy * 0.16666667;\n        let x = time1 + dx, y = dy;\n        for (let n = i + 18 /*BEZIER_SIZE*/; i < n; i += 2) {\n            curves[i] = x;\n            curves[i + 1] = y;\n            dx += ddx;\n            dy += ddy;\n            ddx += dddx;\n            ddy += dddy;\n            x += dx;\n            y += dy;\n        }\n    }\n    getCurvePercent(time, frame) {\n        let curves = this.curves;\n        let i = curves[frame];\n        switch (i) {\n            case 0 /*LINEAR*/:\n                let x = this.frames[frame];\n                return (time - x) / (this.frames[frame + this.getFrameEntries()] - x);\n            case 1 /*STEPPED*/:\n                return 0;\n        }\n        i -= 2 /*BEZIER*/;\n        if (curves[i] > time) {\n            let x = this.frames[frame];\n            return curves[i + 1] * (time - x) / (curves[i] - x);\n        }\n        let n = i + 18 /*BEZIER_SIZE*/;\n        for (i += 2; i < n; i += 2) {\n            if (curves[i] >= time) {\n                let x = curves[i - 2], y = curves[i - 1];\n                return y + (time - x) / (curves[i] - x) * (curves[i + 1] - y);\n            }\n        }\n        let x = curves[n - 2], y = curves[n - 1];\n        return y + (1 - y) * (time - x) / (this.frames[frame + this.getFrameEntries()] - x);\n    }\n    apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {\n        let slot = skeleton.slots[this.slotIndex];\n        if (!slot.bone.active)\n            return;\n        let slotAttachment = slot.getAttachment();\n        if (!(slotAttachment instanceof VertexAttachment) || slotAttachment.deformAttachment != this.attachment)\n            return;\n        let deform = slot.deform;\n        if (deform.length == 0)\n            blend = MixBlend.setup;\n        let vertices = this.vertices;\n        let vertexCount = vertices[0].length;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            let vertexAttachment = slotAttachment;\n            switch (blend) {\n                case MixBlend.setup:\n                    deform.length = 0;\n                    return;\n                case MixBlend.first:\n                    if (alpha == 1) {\n                        deform.length = 0;\n                        return;\n                    }\n                    deform.length = vertexCount;\n                    if (!vertexAttachment.bones) {\n                        // Unweighted vertex positions.\n                        let setupVertices = vertexAttachment.vertices;\n                        for (var i = 0; i < vertexCount; i++)\n                            deform[i] += (setupVertices[i] - deform[i]) * alpha;\n                    }\n                    else {\n                        // Weighted deform offsets.\n                        alpha = 1 - alpha;\n                        for (var i = 0; i < vertexCount; i++)\n                            deform[i] *= alpha;\n                    }\n            }\n            return;\n        }\n        deform.length = vertexCount;\n        if (time >= frames[frames.length - 1]) { // Time is after last frame.\n            let lastVertices = vertices[frames.length - 1];\n            if (alpha == 1) {\n                if (blend == MixBlend.add) {\n                    let vertexAttachment = slotAttachment;\n                    if (!vertexAttachment.bones) {\n                        // Unweighted vertex positions, with alpha.\n                        let setupVertices = vertexAttachment.vertices;\n                        for (let i = 0; i < vertexCount; i++)\n                            deform[i] += lastVertices[i] - setupVertices[i];\n                    }\n                    else {\n                        // Weighted deform offsets, with alpha.\n                        for (let i = 0; i < vertexCount; i++)\n                            deform[i] += lastVertices[i];\n                    }\n                }\n                else\n                    Utils.arrayCopy(lastVertices, 0, deform, 0, vertexCount);\n            }\n            else {\n                switch (blend) {\n                    case MixBlend.setup: {\n                        let vertexAttachment = slotAttachment;\n                        if (!vertexAttachment.bones) {\n                            // Unweighted vertex positions, with alpha.\n                            let setupVertices = vertexAttachment.vertices;\n                            for (let i = 0; i < vertexCount; i++) {\n                                let setup = setupVertices[i];\n                                deform[i] = setup + (lastVertices[i] - setup) * alpha;\n                            }\n                        }\n                        else {\n                            // Weighted deform offsets, with alpha.\n                            for (let i = 0; i < vertexCount; i++)\n                                deform[i] = lastVertices[i] * alpha;\n                        }\n                        break;\n                    }\n                    case MixBlend.first:\n                    case MixBlend.replace:\n                        for (let i = 0; i < vertexCount; i++)\n                            deform[i] += (lastVertices[i] - deform[i]) * alpha;\n                        break;\n                    case MixBlend.add:\n                        let vertexAttachment = slotAttachment;\n                        if (!vertexAttachment.bones) {\n                            // Unweighted vertex positions, with alpha.\n                            let setupVertices = vertexAttachment.vertices;\n                            for (let i = 0; i < vertexCount; i++)\n                                deform[i] += (lastVertices[i] - setupVertices[i]) * alpha;\n                        }\n                        else {\n                            // Weighted deform offsets, with alpha.\n                            for (let i = 0; i < vertexCount; i++)\n                                deform[i] += lastVertices[i] * alpha;\n                        }\n                }\n            }\n            return;\n        }\n        // Interpolate between the previous frame and the current frame.\n        let frame = Timeline.search1(frames, time);\n        let percent = this.getCurvePercent(time, frame);\n        let prevVertices = vertices[frame];\n        let nextVertices = vertices[frame + 1];\n        if (alpha == 1) {\n            if (blend == MixBlend.add) {\n                let vertexAttachment = slotAttachment;\n                if (!vertexAttachment.bones) {\n                    // Unweighted vertex positions, with alpha.\n                    let setupVertices = vertexAttachment.vertices;\n                    for (let i = 0; i < vertexCount; i++) {\n                        let prev = prevVertices[i];\n                        deform[i] += prev + (nextVertices[i] - prev) * percent - setupVertices[i];\n                    }\n                }\n                else {\n                    // Weighted deform offsets, with alpha.\n                    for (let i = 0; i < vertexCount; i++) {\n                        let prev = prevVertices[i];\n                        deform[i] += prev + (nextVertices[i] - prev) * percent;\n                    }\n                }\n            }\n            else {\n                for (let i = 0; i < vertexCount; i++) {\n                    let prev = prevVertices[i];\n                    deform[i] = prev + (nextVertices[i] - prev) * percent;\n                }\n            }\n        }\n        else {\n            switch (blend) {\n                case MixBlend.setup: {\n                    let vertexAttachment = slotAttachment;\n                    if (!vertexAttachment.bones) {\n                        // Unweighted vertex positions, with alpha.\n                        let setupVertices = vertexAttachment.vertices;\n                        for (let i = 0; i < vertexCount; i++) {\n                            let prev = prevVertices[i], setup = setupVertices[i];\n                            deform[i] = setup + (prev + (nextVertices[i] - prev) * percent - setup) * alpha;\n                        }\n                    }\n                    else {\n                        // Weighted deform offsets, with alpha.\n                        for (let i = 0; i < vertexCount; i++) {\n                            let prev = prevVertices[i];\n                            deform[i] = (prev + (nextVertices[i] - prev) * percent) * alpha;\n                        }\n                    }\n                    break;\n                }\n                case MixBlend.first:\n                case MixBlend.replace:\n                    for (let i = 0; i < vertexCount; i++) {\n                        let prev = prevVertices[i];\n                        deform[i] += (prev + (nextVertices[i] - prev) * percent - deform[i]) * alpha;\n                    }\n                    break;\n                case MixBlend.add:\n                    let vertexAttachment = slotAttachment;\n                    if (!vertexAttachment.bones) {\n                        // Unweighted vertex positions, with alpha.\n                        let setupVertices = vertexAttachment.vertices;\n                        for (let i = 0; i < vertexCount; i++) {\n                            let prev = prevVertices[i];\n                            deform[i] += (prev + (nextVertices[i] - prev) * percent - setupVertices[i]) * alpha;\n                        }\n                    }\n                    else {\n                        // Weighted deform offsets, with alpha.\n                        for (let i = 0; i < vertexCount; i++) {\n                            let prev = prevVertices[i];\n                            deform[i] += (prev + (nextVertices[i] - prev) * percent) * alpha;\n                        }\n                    }\n            }\n        }\n    }\n}\n/** Fires an {@link Event} when specific animation times are reached. */\nexport class EventTimeline extends Timeline {\n    constructor(frameCount) {\n        super(frameCount, EventTimeline.propertyIds);\n        this.events = new Array(frameCount);\n    }\n    getFrameCount() {\n        return this.frames.length;\n    }\n    /** Sets the time in seconds and the event for the specified key frame. */\n    setFrame(frame, event) {\n        this.frames[frame] = event.time;\n        this.events[frame] = event;\n    }\n    /** Fires events for frames > `lastTime` and <= `time`. */\n    apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {\n        if (!firedEvents)\n            return;\n        let frames = this.frames;\n        let frameCount = this.frames.length;\n        if (lastTime > time) { // Fire events after last time for looped animations.\n            this.apply(skeleton, lastTime, Number.MAX_VALUE, firedEvents, alpha, blend, direction);\n            lastTime = -1;\n        }\n        else if (lastTime >= frames[frameCount - 1]) // Last time is after last frame.\n            return;\n        if (time < frames[0])\n            return; // Time is before first frame.\n        let i = 0;\n        if (lastTime < frames[0])\n            i = 0;\n        else {\n            i = Timeline.search1(frames, lastTime) + 1;\n            let frameTime = frames[i];\n            while (i > 0) { // Fire multiple events with the same frame.\n                if (frames[i - 1] != frameTime)\n                    break;\n                i--;\n            }\n        }\n        for (; i < frameCount && time >= frames[i]; i++)\n            firedEvents.push(this.events[i]);\n    }\n}\nEventTimeline.propertyIds = [\"\" + Property.event];\n/** Changes a skeleton's {@link Skeleton#drawOrder}. */\nexport class DrawOrderTimeline extends Timeline {\n    constructor(frameCount) {\n        super(frameCount, DrawOrderTimeline.propertyIds);\n        this.drawOrders = new Array(frameCount);\n    }\n    getFrameCount() {\n        return this.frames.length;\n    }\n    /** Sets the time in seconds and the draw order for the specified key frame.\n     * @param drawOrder For each slot in {@link Skeleton#slots}, the index of the new draw order. May be null to use setup pose\n     *           draw order. */\n    setFrame(frame, time, drawOrder) {\n        this.frames[frame] = time;\n        this.drawOrders[frame] = drawOrder;\n    }\n    apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {\n        if (direction == MixDirection.mixOut) {\n            if (blend == MixBlend.setup)\n                Utils.arrayCopy(skeleton.slots, 0, skeleton.drawOrder, 0, skeleton.slots.length);\n            return;\n        }\n        if (time < this.frames[0]) {\n            if (blend == MixBlend.setup || blend == MixBlend.first)\n                Utils.arrayCopy(skeleton.slots, 0, skeleton.drawOrder, 0, skeleton.slots.length);\n            return;\n        }\n        let drawOrderToSetupIndex = this.drawOrders[Timeline.search1(this.frames, time)];\n        if (!drawOrderToSetupIndex)\n            Utils.arrayCopy(skeleton.slots, 0, skeleton.drawOrder, 0, skeleton.slots.length);\n        else {\n            let drawOrder = skeleton.drawOrder;\n            let slots = skeleton.slots;\n            for (let i = 0, n = drawOrderToSetupIndex.length; i < n; i++)\n                drawOrder[i] = slots[drawOrderToSetupIndex[i]];\n        }\n    }\n}\nDrawOrderTimeline.propertyIds = [\"\" + Property.drawOrder];\n/** Changes an IK constraint's {@link IkConstraint#mix}, {@link IkConstraint#softness},\n * {@link IkConstraint#bendDirection}, {@link IkConstraint#stretch}, and {@link IkConstraint#compress}. */\nexport class IkConstraintTimeline extends CurveTimeline {\n    constructor(frameCount, bezierCount, ikConstraintIndex) {\n        super(frameCount, bezierCount, [\n            Property.ikConstraint + \"|\" + ikConstraintIndex\n        ]);\n        this.ikConstraintIndex = ikConstraintIndex;\n    }\n    getFrameEntries() {\n        return 6 /*ENTRIES*/;\n    }\n    /** Sets the time in seconds, mix, softness, bend direction, compress, and stretch for the specified key frame. */\n    setFrame(frame, time, mix, softness, bendDirection, compress, stretch) {\n        frame *= 6 /*ENTRIES*/;\n        this.frames[frame] = time;\n        this.frames[frame + 1 /*MIX*/] = mix;\n        this.frames[frame + 2 /*SOFTNESS*/] = softness;\n        this.frames[frame + 3 /*BEND_DIRECTION*/] = bendDirection;\n        this.frames[frame + 4 /*COMPRESS*/] = compress ? 1 : 0;\n        this.frames[frame + 5 /*STRETCH*/] = stretch ? 1 : 0;\n    }\n    apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {\n        let constraint = skeleton.ikConstraints[this.ikConstraintIndex];\n        if (!constraint.active)\n            return;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            switch (blend) {\n                case MixBlend.setup:\n                    constraint.mix = constraint.data.mix;\n                    constraint.softness = constraint.data.softness;\n                    constraint.bendDirection = constraint.data.bendDirection;\n                    constraint.compress = constraint.data.compress;\n                    constraint.stretch = constraint.data.stretch;\n                    return;\n                case MixBlend.first:\n                    constraint.mix += (constraint.data.mix - constraint.mix) * alpha;\n                    constraint.softness += (constraint.data.softness - constraint.softness) * alpha;\n                    constraint.bendDirection = constraint.data.bendDirection;\n                    constraint.compress = constraint.data.compress;\n                    constraint.stretch = constraint.data.stretch;\n            }\n            return;\n        }\n        let mix = 0, softness = 0;\n        let i = Timeline.search(frames, time, 6 /*ENTRIES*/);\n        let curveType = this.curves[i / 6 /*ENTRIES*/];\n        switch (curveType) {\n            case 0 /*LINEAR*/:\n                let before = frames[i];\n                mix = frames[i + 1 /*MIX*/];\n                softness = frames[i + 2 /*SOFTNESS*/];\n                let t = (time - before) / (frames[i + 6 /*ENTRIES*/] - before);\n                mix += (frames[i + 6 /*ENTRIES*/ + 1 /*MIX*/] - mix) * t;\n                softness += (frames[i + 6 /*ENTRIES*/ + 2 /*SOFTNESS*/] - softness) * t;\n                break;\n            case 1 /*STEPPED*/:\n                mix = frames[i + 1 /*MIX*/];\n                softness = frames[i + 2 /*SOFTNESS*/];\n                break;\n            default:\n                mix = this.getBezierValue(time, i, 1 /*MIX*/, curveType - 2 /*BEZIER*/);\n                softness = this.getBezierValue(time, i, 2 /*SOFTNESS*/, curveType + 18 /*BEZIER_SIZE*/ - 2 /*BEZIER*/);\n        }\n        if (blend == MixBlend.setup) {\n            constraint.mix = constraint.data.mix + (mix - constraint.data.mix) * alpha;\n            constraint.softness = constraint.data.softness + (softness - constraint.data.softness) * alpha;\n            if (direction == MixDirection.mixOut) {\n                constraint.bendDirection = constraint.data.bendDirection;\n                constraint.compress = constraint.data.compress;\n                constraint.stretch = constraint.data.stretch;\n            }\n            else {\n                constraint.bendDirection = frames[i + 3 /*BEND_DIRECTION*/];\n                constraint.compress = frames[i + 4 /*COMPRESS*/] != 0;\n                constraint.stretch = frames[i + 5 /*STRETCH*/] != 0;\n            }\n        }\n        else {\n            constraint.mix += (mix - constraint.mix) * alpha;\n            constraint.softness += (softness - constraint.softness) * alpha;\n            if (direction == MixDirection.mixIn) {\n                constraint.bendDirection = frames[i + 3 /*BEND_DIRECTION*/];\n                constraint.compress = frames[i + 4 /*COMPRESS*/] != 0;\n                constraint.stretch = frames[i + 5 /*STRETCH*/] != 0;\n            }\n        }\n    }\n}\n/** Changes a transform constraint's {@link TransformConstraint#rotateMix}, {@link TransformConstraint#translateMix},\n * {@link TransformConstraint#scaleMix}, and {@link TransformConstraint#shearMix}. */\nexport class TransformConstraintTimeline extends CurveTimeline {\n    constructor(frameCount, bezierCount, transformConstraintIndex) {\n        super(frameCount, bezierCount, [\n            Property.transformConstraint + \"|\" + transformConstraintIndex\n        ]);\n        this.transformConstraintIndex = transformConstraintIndex;\n    }\n    getFrameEntries() {\n        return 7 /*ENTRIES*/;\n    }\n    /** The time in seconds, rotate mix, translate mix, scale mix, and shear mix for the specified key frame. */\n    setFrame(frame, time, mixRotate, mixX, mixY, mixScaleX, mixScaleY, mixShearY) {\n        let frames = this.frames;\n        frame *= 7 /*ENTRIES*/;\n        frames[frame] = time;\n        frames[frame + 1 /*ROTATE*/] = mixRotate;\n        frames[frame + 2 /*X*/] = mixX;\n        frames[frame + 3 /*Y*/] = mixY;\n        frames[frame + 4 /*SCALEX*/] = mixScaleX;\n        frames[frame + 5 /*SCALEY*/] = mixScaleY;\n        frames[frame + 6 /*SHEARY*/] = mixShearY;\n    }\n    apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {\n        let constraint = skeleton.transformConstraints[this.transformConstraintIndex];\n        if (!constraint.active)\n            return;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            let data = constraint.data;\n            switch (blend) {\n                case MixBlend.setup:\n                    constraint.mixRotate = data.mixRotate;\n                    constraint.mixX = data.mixX;\n                    constraint.mixY = data.mixY;\n                    constraint.mixScaleX = data.mixScaleX;\n                    constraint.mixScaleY = data.mixScaleY;\n                    constraint.mixShearY = data.mixShearY;\n                    return;\n                case MixBlend.first:\n                    constraint.mixRotate += (data.mixRotate - constraint.mixRotate) * alpha;\n                    constraint.mixX += (data.mixX - constraint.mixX) * alpha;\n                    constraint.mixY += (data.mixY - constraint.mixY) * alpha;\n                    constraint.mixScaleX += (data.mixScaleX - constraint.mixScaleX) * alpha;\n                    constraint.mixScaleY += (data.mixScaleY - constraint.mixScaleY) * alpha;\n                    constraint.mixShearY += (data.mixShearY - constraint.mixShearY) * alpha;\n            }\n            return;\n        }\n        let rotate, x, y, scaleX, scaleY, shearY;\n        let i = Timeline.search(frames, time, 7 /*ENTRIES*/);\n        let curveType = this.curves[i / 7 /*ENTRIES*/];\n        switch (curveType) {\n            case 0 /*LINEAR*/:\n                let before = frames[i];\n                rotate = frames[i + 1 /*ROTATE*/];\n                x = frames[i + 2 /*X*/];\n                y = frames[i + 3 /*Y*/];\n                scaleX = frames[i + 4 /*SCALEX*/];\n                scaleY = frames[i + 5 /*SCALEY*/];\n                shearY = frames[i + 6 /*SHEARY*/];\n                let t = (time - before) / (frames[i + 7 /*ENTRIES*/] - before);\n                rotate += (frames[i + 7 /*ENTRIES*/ + 1 /*ROTATE*/] - rotate) * t;\n                x += (frames[i + 7 /*ENTRIES*/ + 2 /*X*/] - x) * t;\n                y += (frames[i + 7 /*ENTRIES*/ + 3 /*Y*/] - y) * t;\n                scaleX += (frames[i + 7 /*ENTRIES*/ + 4 /*SCALEX*/] - scaleX) * t;\n                scaleY += (frames[i + 7 /*ENTRIES*/ + 5 /*SCALEY*/] - scaleY) * t;\n                shearY += (frames[i + 7 /*ENTRIES*/ + 6 /*SHEARY*/] - shearY) * t;\n                break;\n            case 1 /*STEPPED*/:\n                rotate = frames[i + 1 /*ROTATE*/];\n                x = frames[i + 2 /*X*/];\n                y = frames[i + 3 /*Y*/];\n                scaleX = frames[i + 4 /*SCALEX*/];\n                scaleY = frames[i + 5 /*SCALEY*/];\n                shearY = frames[i + 6 /*SHEARY*/];\n                break;\n            default:\n                rotate = this.getBezierValue(time, i, 1 /*ROTATE*/, curveType - 2 /*BEZIER*/);\n                x = this.getBezierValue(time, i, 2 /*X*/, curveType + 18 /*BEZIER_SIZE*/ - 2 /*BEZIER*/);\n                y = this.getBezierValue(time, i, 3 /*Y*/, curveType + 18 /*BEZIER_SIZE*/ * 2 - 2 /*BEZIER*/);\n                scaleX = this.getBezierValue(time, i, 4 /*SCALEX*/, curveType + 18 /*BEZIER_SIZE*/ * 3 - 2 /*BEZIER*/);\n                scaleY = this.getBezierValue(time, i, 5 /*SCALEY*/, curveType + 18 /*BEZIER_SIZE*/ * 4 - 2 /*BEZIER*/);\n                shearY = this.getBezierValue(time, i, 6 /*SHEARY*/, curveType + 18 /*BEZIER_SIZE*/ * 5 - 2 /*BEZIER*/);\n        }\n        if (blend == MixBlend.setup) {\n            let data = constraint.data;\n            constraint.mixRotate = data.mixRotate + (rotate - data.mixRotate) * alpha;\n            constraint.mixX = data.mixX + (x - data.mixX) * alpha;\n            constraint.mixY = data.mixY + (y - data.mixY) * alpha;\n            constraint.mixScaleX = data.mixScaleX + (scaleX - data.mixScaleX) * alpha;\n            constraint.mixScaleY = data.mixScaleY + (scaleY - data.mixScaleY) * alpha;\n            constraint.mixShearY = data.mixShearY + (shearY - data.mixShearY) * alpha;\n        }\n        else {\n            constraint.mixRotate += (rotate - constraint.mixRotate) * alpha;\n            constraint.mixX += (x - constraint.mixX) * alpha;\n            constraint.mixY += (y - constraint.mixY) * alpha;\n            constraint.mixScaleX += (scaleX - constraint.mixScaleX) * alpha;\n            constraint.mixScaleY += (scaleY - constraint.mixScaleY) * alpha;\n            constraint.mixShearY += (shearY - constraint.mixShearY) * alpha;\n        }\n    }\n}\n/** Changes a path constraint's {@link PathConstraint#position}. */\nexport class PathConstraintPositionTimeline extends CurveTimeline1 {\n    constructor(frameCount, bezierCount, pathConstraintIndex) {\n        super(frameCount, bezierCount, Property.pathConstraintPosition + \"|\" + pathConstraintIndex);\n        this.pathConstraintIndex = pathConstraintIndex;\n    }\n    apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {\n        let constraint = skeleton.pathConstraints[this.pathConstraintIndex];\n        if (!constraint.active)\n            return;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            switch (blend) {\n                case MixBlend.setup:\n                    constraint.position = constraint.data.position;\n                    return;\n                case MixBlend.first:\n                    constraint.position += (constraint.data.position - constraint.position) * alpha;\n            }\n            return;\n        }\n        let position = this.getCurveValue(time);\n        if (blend == MixBlend.setup)\n            constraint.position = constraint.data.position + (position - constraint.data.position) * alpha;\n        else\n            constraint.position += (position - constraint.position) * alpha;\n    }\n}\n/** Changes a path constraint's {@link PathConstraint#spacing}. */\nexport class PathConstraintSpacingTimeline extends CurveTimeline1 {\n    constructor(frameCount, bezierCount, pathConstraintIndex) {\n        super(frameCount, bezierCount, Property.pathConstraintSpacing + \"|\" + pathConstraintIndex);\n        /** The index of the path constraint slot in {@link Skeleton#getPathConstraints()} that will be changed. */\n        this.pathConstraintIndex = 0;\n        this.pathConstraintIndex = pathConstraintIndex;\n    }\n    apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {\n        let constraint = skeleton.pathConstraints[this.pathConstraintIndex];\n        if (!constraint.active)\n            return;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            switch (blend) {\n                case MixBlend.setup:\n                    constraint.spacing = constraint.data.spacing;\n                    return;\n                case MixBlend.first:\n                    constraint.spacing += (constraint.data.spacing - constraint.spacing) * alpha;\n            }\n            return;\n        }\n        let spacing = this.getCurveValue(time);\n        if (blend == MixBlend.setup)\n            constraint.spacing = constraint.data.spacing + (spacing - constraint.data.spacing) * alpha;\n        else\n            constraint.spacing += (spacing - constraint.spacing) * alpha;\n    }\n}\n/** Changes a transform constraint's {@link PathConstraint#getMixRotate()}, {@link PathConstraint#getMixX()}, and\n * {@link PathConstraint#getMixY()}. */\nexport class PathConstraintMixTimeline extends CurveTimeline {\n    constructor(frameCount, bezierCount, pathConstraintIndex) {\n        super(frameCount, bezierCount, [\n            Property.pathConstraintMix + \"|\" + pathConstraintIndex\n        ]);\n        /** The index of the path constraint slot in {@link Skeleton#getPathConstraints()} that will be changed. */\n        this.pathConstraintIndex = 0;\n        this.pathConstraintIndex = pathConstraintIndex;\n    }\n    getFrameEntries() {\n        return 4 /*ENTRIES*/;\n    }\n    setFrame(frame, time, mixRotate, mixX, mixY) {\n        let frames = this.frames;\n        frame <<= 2;\n        frames[frame] = time;\n        frames[frame + 1 /*ROTATE*/] = mixRotate;\n        frames[frame + 2 /*X*/] = mixX;\n        frames[frame + 3 /*Y*/] = mixY;\n    }\n    apply(skeleton, lastTime, time, firedEvents, alpha, blend, direction) {\n        let constraint = skeleton.pathConstraints[this.pathConstraintIndex];\n        if (!constraint.active)\n            return;\n        let frames = this.frames;\n        if (time < frames[0]) {\n            switch (blend) {\n                case MixBlend.setup:\n                    constraint.mixRotate = constraint.data.mixRotate;\n                    constraint.mixX = constraint.data.mixX;\n                    constraint.mixY = constraint.data.mixY;\n                    return;\n                case MixBlend.first:\n                    constraint.mixRotate += (constraint.data.mixRotate - constraint.mixRotate) * alpha;\n                    constraint.mixX += (constraint.data.mixX - constraint.mixX) * alpha;\n                    constraint.mixY += (constraint.data.mixY - constraint.mixY) * alpha;\n            }\n            return;\n        }\n        let rotate, x, y;\n        let i = Timeline.search(frames, time, 4 /*ENTRIES*/);\n        let curveType = this.curves[i >> 2];\n        switch (curveType) {\n            case 0 /*LINEAR*/:\n                let before = frames[i];\n                rotate = frames[i + 1 /*ROTATE*/];\n                x = frames[i + 2 /*X*/];\n                y = frames[i + 3 /*Y*/];\n                let t = (time - before) / (frames[i + 4 /*ENTRIES*/] - before);\n                rotate += (frames[i + 4 /*ENTRIES*/ + 1 /*ROTATE*/] - rotate) * t;\n                x += (frames[i + 4 /*ENTRIES*/ + 2 /*X*/] - x) * t;\n                y += (frames[i + 4 /*ENTRIES*/ + 3 /*Y*/] - y) * t;\n                break;\n            case 1 /*STEPPED*/:\n                rotate = frames[i + 1 /*ROTATE*/];\n                x = frames[i + 2 /*X*/];\n                y = frames[i + 3 /*Y*/];\n                break;\n            default:\n                rotate = this.getBezierValue(time, i, 1 /*ROTATE*/, curveType - 2 /*BEZIER*/);\n                x = this.getBezierValue(time, i, 2 /*X*/, curveType + 18 /*BEZIER_SIZE*/ - 2 /*BEZIER*/);\n                y = this.getBezierValue(time, i, 3 /*Y*/, curveType + 18 /*BEZIER_SIZE*/ * 2 - 2 /*BEZIER*/);\n        }\n        if (blend == MixBlend.setup) {\n            let data = constraint.data;\n            constraint.mixRotate = data.mixRotate + (rotate - data.mixRotate) * alpha;\n            constraint.mixX = data.mixX + (x - data.mixX) * alpha;\n            constraint.mixY = data.mixY + (y - data.mixY) * alpha;\n        }\n        else {\n            constraint.mixRotate += (rotate - constraint.mixRotate) * alpha;\n            constraint.mixX += (x - constraint.mixX) * alpha;\n            constraint.mixY += (y - constraint.mixY) * alpha;\n        }\n    }\n}\n","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { Animation, MixBlend, AttachmentTimeline, MixDirection, RotateTimeline, DrawOrderTimeline, Timeline, EventTimeline } from \"./Animation\";\nimport { StringSet, Pool, Utils, MathUtils } from \"./Utils\";\n/** Applies animations over time, queues animations for later playback, mixes (crossfading) between animations, and applies\n * multiple animations on top of each other (layering).\n *\n * See [Applying Animations](http://esotericsoftware.com/spine-applying-animations/) in the Spine Runtimes Guide. */\nexport class AnimationState {\n    constructor(data) {\n        /** The list of tracks that currently have animations, which may contain null entries. */\n        this.tracks = new Array();\n        /** Multiplier for the delta time when the animation state is updated, causing time for all animations and mixes to play slower\n         * or faster. Defaults to 1.\n         *\n         * See TrackEntry {@link TrackEntry#timeScale} for affecting a single animation. */\n        this.timeScale = 1;\n        this.unkeyedState = 0;\n        this.events = new Array();\n        this.listeners = new Array();\n        this.queue = new EventQueue(this);\n        this.propertyIDs = new StringSet();\n        this.animationsChanged = false;\n        this.trackEntryPool = new Pool(() => new TrackEntry());\n        this.data = data;\n    }\n    static emptyAnimation() {\n        if (!_emptyAnimation)\n            _emptyAnimation = new Animation(\"<empty>\", [], 0);\n        return _emptyAnimation;\n    }\n    /** Increments each track entry {@link TrackEntry#trackTime()}, setting queued animations as current if needed. */\n    update(delta) {\n        delta *= this.timeScale;\n        let tracks = this.tracks;\n        for (let i = 0, n = tracks.length; i < n; i++) {\n            let current = tracks[i];\n            if (!current)\n                continue;\n            current.animationLast = current.nextAnimationLast;\n            current.trackLast = current.nextTrackLast;\n            let currentDelta = delta * current.timeScale;\n            if (current.delay > 0) {\n                current.delay -= currentDelta;\n                if (current.delay > 0)\n                    continue;\n                currentDelta = -current.delay;\n                current.delay = 0;\n            }\n            let next = current.next;\n            if (next) {\n                // When the next entry's delay is passed, change to the next entry, preserving leftover time.\n                let nextTime = current.trackLast - next.delay;\n                if (nextTime >= 0) {\n                    next.delay = 0;\n                    next.trackTime += current.timeScale == 0 ? 0 : (nextTime / current.timeScale + delta) * next.timeScale;\n                    current.trackTime += currentDelta;\n                    this.setCurrent(i, next, true);\n                    while (next.mixingFrom) {\n                        next.mixTime += delta;\n                        next = next.mixingFrom;\n                    }\n                    continue;\n                }\n            }\n            else if (current.trackLast >= current.trackEnd && !current.mixingFrom) {\n                tracks[i] = null;\n                this.queue.end(current);\n                this.clearNext(current);\n                continue;\n            }\n            if (current.mixingFrom && this.updateMixingFrom(current, delta)) {\n                // End mixing from entries once all have completed.\n                let from = current.mixingFrom;\n                current.mixingFrom = null;\n                if (from)\n                    from.mixingTo = null;\n                while (from) {\n                    this.queue.end(from);\n                    from = from.mixingFrom;\n                }\n            }\n            current.trackTime += currentDelta;\n        }\n        this.queue.drain();\n    }\n    /** Returns true when all mixing from entries are complete. */\n    updateMixingFrom(to, delta) {\n        let from = to.mixingFrom;\n        if (!from)\n            return true;\n        let finished = this.updateMixingFrom(from, delta);\n        from.animationLast = from.nextAnimationLast;\n        from.trackLast = from.nextTrackLast;\n        // Require mixTime > 0 to ensure the mixing from entry was applied at least once.\n        if (to.mixTime > 0 && to.mixTime >= to.mixDuration) {\n            // Require totalAlpha == 0 to ensure mixing is complete, unless mixDuration == 0 (the transition is a single frame).\n            if (from.totalAlpha == 0 || to.mixDuration == 0) {\n                to.mixingFrom = from.mixingFrom;\n                if (from.mixingFrom)\n                    from.mixingFrom.mixingTo = to;\n                to.interruptAlpha = from.interruptAlpha;\n                this.queue.end(from);\n            }\n            return finished;\n        }\n        from.trackTime += delta * from.timeScale;\n        to.mixTime += delta;\n        return false;\n    }\n    /** Poses the skeleton using the track entry animations. There are no side effects other than invoking listeners, so the\n     * animation state can be applied to multiple skeletons to pose them identically.\n     * @returns True if any animations were applied. */\n    apply(skeleton) {\n        if (!skeleton)\n            throw new Error(\"skeleton cannot be null.\");\n        if (this.animationsChanged)\n            this._animationsChanged();\n        let events = this.events;\n        let tracks = this.tracks;\n        let applied = false;\n        for (let i = 0, n = tracks.length; i < n; i++) {\n            let current = tracks[i];\n            if (!current || current.delay > 0)\n                continue;\n            applied = true;\n            let blend = i == 0 ? MixBlend.first : current.mixBlend;\n            // Apply mixing from entries first.\n            let mix = current.alpha;\n            if (current.mixingFrom)\n                mix *= this.applyMixingFrom(current, skeleton, blend);\n            else if (current.trackTime >= current.trackEnd && !current.next)\n                mix = 0;\n            // Apply current entry.\n            let animationLast = current.animationLast, animationTime = current.getAnimationTime(), applyTime = animationTime;\n            let applyEvents = events;\n            if (current.reverse) {\n                applyTime = current.animation.duration - applyTime;\n                applyEvents = null;\n            }\n            let timelines = current.animation.timelines;\n            let timelineCount = timelines.length;\n            if ((i == 0 && mix == 1) || blend == MixBlend.add) {\n                for (let ii = 0; ii < timelineCount; ii++) {\n                    // Fixes issue #302 on IOS9 where mix, blend sometimes became undefined and caused assets\n                    // to sometimes stop rendering when using color correction, as their RGBA values become NaN.\n                    // (https://github.com/pixijs/pixi-spine/issues/302)\n                    Utils.webkit602BugfixHelper(mix, blend);\n                    var timeline = timelines[ii];\n                    if (timeline instanceof AttachmentTimeline)\n                        this.applyAttachmentTimeline(timeline, skeleton, applyTime, blend, true);\n                    else\n                        timeline.apply(skeleton, animationLast, applyTime, applyEvents, mix, blend, MixDirection.mixIn);\n                }\n            }\n            else {\n                let timelineMode = current.timelineMode;\n                let firstFrame = current.timelinesRotation.length != timelineCount << 1;\n                if (firstFrame)\n                    current.timelinesRotation.length = timelineCount << 1;\n                for (let ii = 0; ii < timelineCount; ii++) {\n                    let timeline = timelines[ii];\n                    let timelineBlend = timelineMode[ii] == SUBSEQUENT ? blend : MixBlend.setup;\n                    if (timeline instanceof RotateTimeline) {\n                        this.applyRotateTimeline(timeline, skeleton, applyTime, mix, timelineBlend, current.timelinesRotation, ii << 1, firstFrame);\n                    }\n                    else if (timeline instanceof AttachmentTimeline) {\n                        this.applyAttachmentTimeline(timeline, skeleton, applyTime, blend, true);\n                    }\n                    else {\n                        // This fixes the WebKit 602 specific issue described at http://esotericsoftware.com/forum/iOS-10-disappearing-graphics-10109\n                        Utils.webkit602BugfixHelper(mix, blend);\n                        timeline.apply(skeleton, animationLast, applyTime, applyEvents, mix, timelineBlend, MixDirection.mixIn);\n                    }\n                }\n            }\n            this.queueEvents(current, animationTime);\n            events.length = 0;\n            current.nextAnimationLast = animationTime;\n            current.nextTrackLast = current.trackTime;\n        }\n        // Set slots attachments to the setup pose, if needed. This occurs if an animation that is mixing out sets attachments so\n        // subsequent timelines see any deform, but the subsequent timelines don't set an attachment (eg they are also mixing out or\n        // the time is before the first key).\n        var setupState = this.unkeyedState + SETUP;\n        var slots = skeleton.slots;\n        for (var i = 0, n = skeleton.slots.length; i < n; i++) {\n            var slot = slots[i];\n            if (slot.attachmentState == setupState) {\n                var attachmentName = slot.data.attachmentName;\n                slot.setAttachment(!attachmentName ? null : skeleton.getAttachment(slot.data.index, attachmentName));\n            }\n        }\n        this.unkeyedState += 2; // Increasing after each use avoids the need to reset attachmentState for every slot.\n        this.queue.drain();\n        return applied;\n    }\n    applyMixingFrom(to, skeleton, blend) {\n        let from = to.mixingFrom;\n        if (from.mixingFrom)\n            this.applyMixingFrom(from, skeleton, blend);\n        let mix = 0;\n        if (to.mixDuration == 0) { // Single frame mix to undo mixingFrom changes.\n            mix = 1;\n            if (blend == MixBlend.first)\n                blend = MixBlend.setup;\n        }\n        else {\n            mix = to.mixTime / to.mixDuration;\n            if (mix > 1)\n                mix = 1;\n            if (blend != MixBlend.first)\n                blend = from.mixBlend;\n        }\n        let attachments = mix < from.attachmentThreshold, drawOrder = mix < from.drawOrderThreshold;\n        let timelines = from.animation.timelines;\n        let timelineCount = timelines.length;\n        let alphaHold = from.alpha * to.interruptAlpha, alphaMix = alphaHold * (1 - mix);\n        let animationLast = from.animationLast, animationTime = from.getAnimationTime(), applyTime = animationTime;\n        let events = null;\n        if (from.reverse)\n            applyTime = from.animation.duration - applyTime;\n        else if (mix < from.eventThreshold)\n            events = this.events;\n        if (blend == MixBlend.add) {\n            for (let i = 0; i < timelineCount; i++)\n                timelines[i].apply(skeleton, animationLast, applyTime, events, alphaMix, blend, MixDirection.mixOut);\n        }\n        else {\n            let timelineMode = from.timelineMode;\n            let timelineHoldMix = from.timelineHoldMix;\n            let firstFrame = from.timelinesRotation.length != timelineCount << 1;\n            if (firstFrame)\n                from.timelinesRotation.length = timelineCount << 1;\n            from.totalAlpha = 0;\n            for (let i = 0; i < timelineCount; i++) {\n                let timeline = timelines[i];\n                let direction = MixDirection.mixOut;\n                let timelineBlend;\n                let alpha = 0;\n                switch (timelineMode[i]) {\n                    case SUBSEQUENT:\n                        if (!drawOrder && timeline instanceof DrawOrderTimeline)\n                            continue;\n                        timelineBlend = blend;\n                        alpha = alphaMix;\n                        break;\n                    case FIRST:\n                        timelineBlend = MixBlend.setup;\n                        alpha = alphaMix;\n                        break;\n                    case HOLD_SUBSEQUENT:\n                        timelineBlend = blend;\n                        alpha = alphaHold;\n                        break;\n                    case HOLD_FIRST:\n                        timelineBlend = MixBlend.setup;\n                        alpha = alphaHold;\n                        break;\n                    default:\n                        timelineBlend = MixBlend.setup;\n                        let holdMix = timelineHoldMix[i];\n                        alpha = alphaHold * Math.max(0, 1 - holdMix.mixTime / holdMix.mixDuration);\n                        break;\n                }\n                from.totalAlpha += alpha;\n                if (timeline instanceof RotateTimeline)\n                    this.applyRotateTimeline(timeline, skeleton, applyTime, alpha, timelineBlend, from.timelinesRotation, i << 1, firstFrame);\n                else if (timeline instanceof AttachmentTimeline)\n                    this.applyAttachmentTimeline(timeline, skeleton, applyTime, timelineBlend, attachments);\n                else {\n                    // This fixes the WebKit 602 specific issue described at http://esotericsoftware.com/forum/iOS-10-disappearing-graphics-10109\n                    Utils.webkit602BugfixHelper(alpha, blend);\n                    if (drawOrder && timeline instanceof DrawOrderTimeline && timelineBlend == MixBlend.setup)\n                        direction = MixDirection.mixIn;\n                    timeline.apply(skeleton, animationLast, applyTime, events, alpha, timelineBlend, direction);\n                }\n            }\n        }\n        if (to.mixDuration > 0)\n            this.queueEvents(from, animationTime);\n        this.events.length = 0;\n        from.nextAnimationLast = animationTime;\n        from.nextTrackLast = from.trackTime;\n        return mix;\n    }\n    applyAttachmentTimeline(timeline, skeleton, time, blend, attachments) {\n        var slot = skeleton.slots[timeline.slotIndex];\n        if (!slot.bone.active)\n            return;\n        if (time < timeline.frames[0]) { // Time is before first frame.\n            if (blend == MixBlend.setup || blend == MixBlend.first)\n                this.setAttachment(skeleton, slot, slot.data.attachmentName, attachments);\n        }\n        else\n            this.setAttachment(skeleton, slot, timeline.attachmentNames[Timeline.search1(timeline.frames, time)], attachments);\n        // If an attachment wasn't set (ie before the first frame or attachments is false), set the setup attachment later.\n        if (slot.attachmentState <= this.unkeyedState)\n            slot.attachmentState = this.unkeyedState + SETUP;\n    }\n    setAttachment(skeleton, slot, attachmentName, attachments) {\n        slot.setAttachment(!attachmentName ? null : skeleton.getAttachment(slot.data.index, attachmentName));\n        if (attachments)\n            slot.attachmentState = this.unkeyedState + CURRENT;\n    }\n    applyRotateTimeline(timeline, skeleton, time, alpha, blend, timelinesRotation, i, firstFrame) {\n        if (firstFrame)\n            timelinesRotation[i] = 0;\n        if (alpha == 1) {\n            timeline.apply(skeleton, 0, time, null, 1, blend, MixDirection.mixIn);\n            return;\n        }\n        let bone = skeleton.bones[timeline.boneIndex];\n        if (!bone.active)\n            return;\n        let frames = timeline.frames;\n        let r1 = 0, r2 = 0;\n        if (time < frames[0]) {\n            switch (blend) {\n                case MixBlend.setup:\n                    bone.rotation = bone.data.rotation;\n                default:\n                    return;\n                case MixBlend.first:\n                    r1 = bone.rotation;\n                    r2 = bone.data.rotation;\n            }\n        }\n        else {\n            r1 = blend == MixBlend.setup ? bone.data.rotation : bone.rotation;\n            r2 = bone.data.rotation + timeline.getCurveValue(time);\n        }\n        // Mix between rotations using the direction of the shortest route on the first frame while detecting crosses.\n        let total = 0, diff = r2 - r1;\n        diff -= (16384 - ((16384.499999999996 - diff / 360) | 0)) * 360;\n        if (diff == 0) {\n            total = timelinesRotation[i];\n        }\n        else {\n            let lastTotal = 0, lastDiff = 0;\n            if (firstFrame) {\n                lastTotal = 0;\n                lastDiff = diff;\n            }\n            else {\n                lastTotal = timelinesRotation[i]; // Angle and direction of mix, including loops.\n                lastDiff = timelinesRotation[i + 1]; // Difference between bones.\n            }\n            let current = diff > 0, dir = lastTotal >= 0;\n            // Detect cross at 0 (not 180).\n            if (MathUtils.signum(lastDiff) != MathUtils.signum(diff) && Math.abs(lastDiff) <= 90) {\n                // A cross after a 360 rotation is a loop.\n                if (Math.abs(lastTotal) > 180)\n                    lastTotal += 360 * MathUtils.signum(lastTotal);\n                dir = current;\n            }\n            total = diff + lastTotal - lastTotal % 360; // Store loops as part of lastTotal.\n            if (dir != current)\n                total += 360 * MathUtils.signum(lastTotal);\n            timelinesRotation[i] = total;\n        }\n        timelinesRotation[i + 1] = diff;\n        bone.rotation = r1 + total * alpha;\n    }\n    queueEvents(entry, animationTime) {\n        let animationStart = entry.animationStart, animationEnd = entry.animationEnd;\n        let duration = animationEnd - animationStart;\n        let trackLastWrapped = entry.trackLast % duration;\n        // Queue events before complete.\n        let events = this.events;\n        let i = 0, n = events.length;\n        for (; i < n; i++) {\n            let event = events[i];\n            if (event.time < trackLastWrapped)\n                break;\n            if (event.time > animationEnd)\n                continue; // Discard events outside animation start/end.\n            this.queue.event(entry, event);\n        }\n\n        // console.log(animationTime)\n        // Queue complete if completed a loop iteration or the animation.\n        let complete = false;\n        if (entry.loop >= 1)\n            complete = duration === 0 || trackLastWrapped > entry.trackTime % duration;\n        else\n            complete = animationTime >= animationEnd && entry.animationLast < animationEnd;\n        if (complete){\n            entry.loop--;\n            this.queue.complete(entry);\n        }\n        // Queue events after complete.\n        for (; i < n; i++) {\n            let event = events[i];\n            if (event.time < animationStart)\n                continue; // Discard events outside animation start/end.\n            this.queue.event(entry, event);\n        }\n    }\n    /** Removes all animations from all tracks, leaving skeletons in their current pose.\n     *\n     * It may be desired to use {@link AnimationState#setEmptyAnimation()} to mix the skeletons back to the setup pose,\n     * rather than leaving them in their current pose. */\n    clearTracks() {\n        let oldDrainDisabled = this.queue.drainDisabled;\n        this.queue.drainDisabled = true;\n        for (let i = 0, n = this.tracks.length; i < n; i++)\n            this.clearTrack(i);\n        this.tracks.length = 0;\n        this.queue.drainDisabled = oldDrainDisabled;\n        this.queue.drain();\n    }\n    /** Removes all animations from the track, leaving skeletons in their current pose.\n     *\n     * It may be desired to use {@link AnimationState#setEmptyAnimation()} to mix the skeletons back to the setup pose,\n     * rather than leaving them in their current pose. */\n    clearTrack(trackIndex) {\n        if (trackIndex >= this.tracks.length)\n            return;\n        let current = this.tracks[trackIndex];\n        if (!current)\n            return;\n        this.queue.end(current);\n        this.clearNext(current);\n        let entry = current;\n        while (true) {\n            let from = entry.mixingFrom;\n            if (!from)\n                break;\n            this.queue.end(from);\n            entry.mixingFrom = null;\n            entry.mixingTo = null;\n            entry = from;\n        }\n        this.tracks[current.trackIndex] = null;\n        this.queue.drain();\n    }\n    setCurrent(index, current, interrupt) {\n        let from = this.expandToIndex(index);\n        this.tracks[index] = current;\n        current.previous = null;\n        if (from) {\n            if (interrupt)\n                this.queue.interrupt(from);\n            current.mixingFrom = from;\n            from.mixingTo = current;\n            current.mixTime = 0;\n            // Store the interrupted mix percentage.\n            if (from.mixingFrom && from.mixDuration > 0)\n                current.interruptAlpha *= Math.min(1, from.mixTime / from.mixDuration);\n            from.timelinesRotation.length = 0; // Reset rotation for mixing out, in case entry was mixed in.\n        }\n        this.queue.start(current);\n    }\n    /** Sets an animation by name.\n      *\n      * See {@link #setAnimationWith()}. */\n    setAnimation(trackIndex, animationName, loop = 0) {\n        let animation = this.data.skeletonData.findAnimation(animationName);\n        if (!animation)\n            throw new Error(\"Animation not found: \" + animationName);\n        return this.setAnimationWith(trackIndex, animation, loop);\n    }\n    /** Sets the current animation for a track, discarding any queued animations. If the formerly current track entry was never\n     * applied to a skeleton, it is replaced (not mixed from).\n     * @param loop If true, the animation will repeat. If false it will not, instead its last frame is applied if played beyond its\n     *           duration. In either case {@link TrackEntry#trackEnd} determines when the track is cleared.\n     * @returns A track entry to allow further customization of animation playback. References to the track entry must not be kept\n     *         after the {@link AnimationStateListener#dispose()} event occurs. */\n    setAnimationWith(trackIndex, animation, loop = 0) {\n        if (!animation)\n            throw new Error(\"animation cannot be null.\");\n        let interrupt = true;\n        let current = this.expandToIndex(trackIndex);\n        if (current) {\n            if (current.nextTrackLast == -1) {\n                // Don't mix from an entry that was never applied.\n                this.tracks[trackIndex] = current.mixingFrom;\n                this.queue.interrupt(current);\n                this.queue.end(current);\n                this.clearNext(current);\n                current = current.mixingFrom;\n                interrupt = false;\n            }\n            else\n                this.clearNext(current);\n        }\n        let entry = this.trackEntry(trackIndex, animation, loop, current);\n        this.setCurrent(trackIndex, entry, interrupt);\n        this.queue.drain();\n        return entry;\n    }\n    /** Queues an animation by name.\n     *\n     * See {@link #addAnimationWith()}. */\n    addAnimation(trackIndex, animationName, loop = 0, delay = 0) {\n        let animation = this.data.skeletonData.findAnimation(animationName);\n        if (!animation)\n            throw new Error(\"Animation not found: \" + animationName);\n        return this.addAnimationWith(trackIndex, animation, loop, delay);\n    }\n    /** Adds an animation to be played after the current or last queued animation for a track. If the track is empty, it is\n     * equivalent to calling {@link #setAnimationWith()}.\n     * @param delay If > 0, sets {@link TrackEntry#delay}. If <= 0, the delay set is the duration of the previous track entry\n     *           minus any mix duration (from the {@link AnimationStateData}) plus the specified `delay` (ie the mix\n     *           ends at (`delay` = 0) or before (`delay` < 0) the previous track entry duration). If the\n     *           previous entry is looping, its next loop completion is used instead of its duration.\n     * @returns A track entry to allow further customization of animation playback. References to the track entry must not be kept\n     *         after the {@link AnimationStateListener#dispose()} event occurs. */\n    addAnimationWith(trackIndex, animation, loop = 0, delay = 0) {\n        if (!animation)\n            throw new Error(\"animation cannot be null.\");\n        let last = this.expandToIndex(trackIndex);\n        if (last) {\n            while (last.next)\n                last = last.next;\n        }\n        let entry = this.trackEntry(trackIndex, animation, loop, last);\n        if (!last) {\n            this.setCurrent(trackIndex, entry, true);\n            this.queue.drain();\n        }\n        else {\n            last.next = entry;\n            entry.previous = last;\n            if (delay <= 0)\n                delay += last.getTrackComplete() - entry.mixDuration;\n        }\n        entry.delay = delay;\n        return entry;\n    }\n    /** Sets an empty animation for a track, discarding any queued animations, and sets the track entry's\n     * {@link TrackEntry#mixduration}. An empty animation has no timelines and serves as a placeholder for mixing in or out.\n     *\n     * Mixing out is done by setting an empty animation with a mix duration using either {@link #setEmptyAnimation()},\n     * {@link #setEmptyAnimations()}, or {@link #addEmptyAnimation()}. Mixing to an empty animation causes\n     * the previous animation to be applied less and less over the mix duration. Properties keyed in the previous animation\n     * transition to the value from lower tracks or to the setup pose value if no lower tracks key the property. A mix duration of\n     * 0 still mixes out over one frame.\n     *\n     * Mixing in is done by first setting an empty animation, then adding an animation using\n     * {@link #addAnimation()} and on the returned track entry, set the\n     * {@link TrackEntry#setMixDuration()}. Mixing from an empty animation causes the new animation to be applied more and\n     * more over the mix duration. Properties keyed in the new animation transition from the value from lower tracks or from the\n     * setup pose value if no lower tracks key the property to the value keyed in the new animation. */\n    setEmptyAnimation(trackIndex, mixDuration = 0) {\n        let entry = this.setAnimationWith(trackIndex, AnimationState.emptyAnimation(), false);\n        entry.mixDuration = mixDuration;\n        entry.trackEnd = mixDuration;\n        return entry;\n    }\n    /** Adds an empty animation to be played after the current or last queued animation for a track, and sets the track entry's\n     * {@link TrackEntry#mixDuration}. If the track is empty, it is equivalent to calling\n     * {@link #setEmptyAnimation()}.\n     *\n     * See {@link #setEmptyAnimation()}.\n     * @param delay If > 0, sets {@link TrackEntry#delay}. If <= 0, the delay set is the duration of the previous track entry\n     *           minus any mix duration plus the specified `delay` (ie the mix ends at (`delay` = 0) or\n     *           before (`delay` < 0) the previous track entry duration). If the previous entry is looping, its next\n     *           loop completion is used instead of its duration.\n     * @return A track entry to allow further customization of animation playback. References to the track entry must not be kept\n     *         after the {@link AnimationStateListener#dispose()} event occurs. */\n    addEmptyAnimation(trackIndex, mixDuration = 0, delay = 0) {\n        let entry = this.addAnimationWith(trackIndex, AnimationState.emptyAnimation(), false, delay);\n        if (delay <= 0)\n            entry.delay += entry.mixDuration - mixDuration;\n        entry.mixDuration = mixDuration;\n        entry.trackEnd = mixDuration;\n        return entry;\n    }\n    /** Sets an empty animation for every track, discarding any queued animations, and mixes to it over the specified mix\n      * duration. */\n    setEmptyAnimations(mixDuration = 0) {\n        let oldDrainDisabled = this.queue.drainDisabled;\n        this.queue.drainDisabled = true;\n        for (let i = 0, n = this.tracks.length; i < n; i++) {\n            let current = this.tracks[i];\n            if (current)\n                this.setEmptyAnimation(current.trackIndex, mixDuration);\n        }\n        this.queue.drainDisabled = oldDrainDisabled;\n        this.queue.drain();\n    }\n    expandToIndex(index) {\n        if (index < this.tracks.length)\n            return this.tracks[index];\n        Utils.ensureArrayCapacity(this.tracks, index + 1, null);\n        this.tracks.length = index + 1;\n        return null;\n    }\n    /** @param last May be null. */\n    trackEntry(trackIndex, animation, loop, last) {\n        let entry = this.trackEntryPool.obtain();\n        entry.trackIndex = trackIndex;\n        entry.animation = animation;\n        entry.loop = loop;\n        entry.holdPrevious = false;\n        entry.eventThreshold = 0;\n        entry.attachmentThreshold = 0;\n        entry.drawOrderThreshold = 0;\n        entry.animationStart = 0;\n        entry.animationEnd = animation.duration;\n        entry.animationLast = -1;\n        entry.nextAnimationLast = -1;\n        entry.delay = 0;\n        entry.trackTime = 0;\n        entry.trackLast = -1;\n        entry.nextTrackLast = -1;\n        entry.trackEnd = Number.MAX_VALUE;\n        entry.timeScale = 1;\n        entry.alpha = 1;\n        entry.interruptAlpha = 1;\n        entry.mixTime = 0;\n        entry.mixDuration = !last ? 0 : this.data.getMix(last.animation, animation);\n        entry.mixBlend = MixBlend.replace;\n        return entry;\n    }\n    /** Removes the {@link TrackEntry#getNext() next entry} and all entries after it for the specified entry. */\n    clearNext(entry) {\n        let next = entry.next;\n        while (next) {\n            this.queue.dispose(next);\n            next = next.next;\n        }\n        entry.next = null;\n    }\n    _animationsChanged() {\n        this.animationsChanged = false;\n        this.propertyIDs.clear();\n        let tracks = this.tracks;\n        for (let i = 0, n = tracks.length; i < n; i++) {\n            let entry = tracks[i];\n            if (!entry)\n                continue;\n            while (entry.mixingFrom)\n                entry = entry.mixingFrom;\n            do {\n                if (!entry.mixingTo || entry.mixBlend != MixBlend.add)\n                    this.computeHold(entry);\n                entry = entry.mixingTo;\n            } while (entry);\n        }\n    }\n    computeHold(entry) {\n        let to = entry.mixingTo;\n        let timelines = entry.animation.timelines;\n        let timelinesCount = entry.animation.timelines.length;\n        let timelineMode = entry.timelineMode;\n        timelineMode.length = timelinesCount;\n        let timelineHoldMix = entry.timelineHoldMix;\n        timelineHoldMix.length = 0;\n        let propertyIDs = this.propertyIDs;\n        if (to && to.holdPrevious) {\n            for (let i = 0; i < timelinesCount; i++)\n                timelineMode[i] = propertyIDs.addAll(timelines[i].getPropertyIds()) ? HOLD_FIRST : HOLD_SUBSEQUENT;\n            return;\n        }\n        outer: for (let i = 0; i < timelinesCount; i++) {\n            let timeline = timelines[i];\n            let ids = timeline.getPropertyIds();\n            if (!propertyIDs.addAll(ids))\n                timelineMode[i] = SUBSEQUENT;\n            else if (!to || timeline instanceof AttachmentTimeline || timeline instanceof DrawOrderTimeline\n                || timeline instanceof EventTimeline || !to.animation.hasTimeline(ids)) {\n                timelineMode[i] = FIRST;\n            }\n            else {\n                for (let next = to.mixingTo; next; next = next.mixingTo) {\n                    if (next.animation.hasTimeline(ids))\n                        continue;\n                    if (entry.mixDuration > 0) {\n                        timelineMode[i] = HOLD_MIX;\n                        timelineHoldMix[i] = next;\n                        continue outer;\n                    }\n                    break;\n                }\n                timelineMode[i] = HOLD_FIRST;\n            }\n        }\n    }\n    /** Returns the track entry for the animation currently playing on the track, or null if no animation is currently playing. */\n    getCurrent(trackIndex) {\n        if (trackIndex >= this.tracks.length)\n            return null;\n        return this.tracks[trackIndex];\n    }\n    /** Adds a listener to receive events for all track entries. */\n    addListener(listener) {\n        if (!listener)\n            throw new Error(\"listener cannot be null.\");\n        this.listeners.push(listener);\n    }\n    /** Removes the listener added with {@link #addListener()}. */\n    removeListener(listener) {\n        let index = this.listeners.indexOf(listener);\n        if (index >= 0)\n            this.listeners.splice(index, 1);\n    }\n    /** Removes all listeners added with {@link #addListener()}. */\n    clearListeners() {\n        this.listeners.length = 0;\n    }\n    /** Discards all listener notifications that have not yet been delivered. This can be useful to call from an\n     * {@link AnimationStateListener} when it is known that further notifications that may have been already queued for delivery\n     * are not wanted because new animations are being set. */\n    clearListenerNotifications() {\n        this.queue.clear();\n    }\n}\n/** Stores settings and other state for the playback of an animation on an {@link AnimationState} track.\n *\n * References to a track entry must not be kept after the {@link AnimationStateListener#dispose()} event occurs. */\nexport class TrackEntry {\n    constructor() {\n        /** Controls how properties keyed in the animation are mixed with lower tracks. Defaults to {@link MixBlend#replace}, which\n         * replaces the values from the lower tracks with the animation values. {@link MixBlend#add} adds the animation values to\n         * the values from the lower tracks.\n         *\n         * The `mixBlend` can be set for a new track entry only before {@link AnimationState#apply()} is first\n         * called. */\n        this.mixBlend = MixBlend.replace;\n        this.timelineMode = new Array();\n        this.timelineHoldMix = new Array();\n        this.timelinesRotation = new Array();\n    }\n    reset() {\n        this.next = null;\n        this.previous = null;\n        this.mixingFrom = null;\n        this.mixingTo = null;\n        this.animation = null;\n        this.listener = null;\n        this.timelineMode.length = 0;\n        this.timelineHoldMix.length = 0;\n        this.timelinesRotation.length = 0;\n    }\n    /** Uses {@link #trackTime} to compute the `animationTime`, which is between {@link #animationStart}\n     * and {@link #animationEnd}. When the `trackTime` is 0, the `animationTime` is equal to the\n     * `animationStart` time. */\n    getAnimationTime() {\n        // console.log(this.loop)\n        if (this.loop < 0) {\n            return Math.min(this.trackTime + this.animationStart, this.animationEnd);\n        }\n        if (this.loop > 0) {\n            let duration = this.animationEnd - this.animationStart;\n            if (duration === 0)\n                return this.animationStart;\n            return (this.trackTime % duration) + this.animationStart;\n        }\n        return Math.min(this.trackTime + this.animationStart, this.animationEnd);\n    }\n    setAnimationLast(animationLast) {\n        this.animationLast = animationLast;\n        this.nextAnimationLast = animationLast;\n    }\n    /** Returns true if at least one loop has been completed.\n     *\n     * See {@link AnimationStateListener#complete()}. */\n    isComplete() {\n        return this.trackTime >= this.animationEnd - this.animationStart;\n    }\n    /** Resets the rotation directions for mixing this entry's rotate timelines. This can be useful to avoid bones rotating the\n     * long way around when using {@link #alpha} and starting animations on other tracks.\n     *\n     * Mixing with {@link MixBlend#replace} involves finding a rotation between two others, which has two possible solutions:\n     * the short way or the long way around. The two rotations likely change over time, so which direction is the short or long\n     * way also changes. If the short way was always chosen, bones would flip to the other side when that direction became the\n     * long way. TrackEntry chooses the short way the first time it is applied and remembers that direction. */\n    resetRotationDirections() {\n        this.timelinesRotation.length = 0;\n    }\n    getTrackComplete() {\n        let duration = this.animationEnd - this.animationStart;\n        if (duration !== 0) {\n            if (this.loop > 0)\n                return duration * (1 + ((this.trackTime / duration) | 0)); // Completion of next loop.\n            if (this.trackTime < duration)\n                return duration; // Before duration.\n        }\n        return this.trackTime; // Next update.\n    }\n}\nexport class EventQueue {\n    constructor(animState) {\n        this.objects = [];\n        this.drainDisabled = false;\n        this.animState = animState;\n    }\n    start(entry) {\n        this.objects.push(EventType.start);\n        this.objects.push(entry);\n        this.animState.animationsChanged = true;\n    }\n    interrupt(entry) {\n        this.objects.push(EventType.interrupt);\n        this.objects.push(entry);\n    }\n    end(entry) {\n        this.objects.push(EventType.end);\n        this.objects.push(entry);\n        this.animState.animationsChanged = true;\n    }\n    dispose(entry) {\n        this.objects.push(EventType.dispose);\n        this.objects.push(entry);\n    }\n    complete(entry) {\n        this.objects.push(EventType.complete);\n        this.objects.push(entry);\n    }\n    event(entry, event) {\n        this.objects.push(EventType.event);\n        this.objects.push(entry);\n        this.objects.push(event);\n    }\n    drain() {\n        if (this.drainDisabled)\n            return;\n        this.drainDisabled = true;\n        let objects = this.objects;\n        let listeners = this.animState.listeners;\n        for (let i = 0; i < objects.length; i += 2) {\n            let type = objects[i];\n            let entry = objects[i + 1];\n            switch (type) {\n                case EventType.start:\n                    if (entry.listener && entry.listener.start)\n                        entry.listener.start(entry);\n                    for (let ii = 0; ii < listeners.length; ii++)\n                        if (listeners[ii].start)\n                            listeners[ii].start(entry);\n                    break;\n                case EventType.interrupt:\n                    if (entry.listener && entry.listener.interrupt)\n                        entry.listener.interrupt(entry);\n                    for (let ii = 0; ii < listeners.length; ii++)\n                        if (listeners[ii].interrupt)\n                            listeners[ii].interrupt(entry);\n                    break;\n                case EventType.end:\n                    if (entry.listener && entry.listener.end)\n                        entry.listener.end(entry);\n                    for (let ii = 0; ii < listeners.length; ii++)\n                        if (listeners[ii].end)\n                            listeners[ii].end(entry);\n                // Fall through.\n                case EventType.dispose:\n                    if (entry.listener && entry.listener.dispose)\n                        entry.listener.dispose(entry);\n                    for (let ii = 0; ii < listeners.length; ii++)\n                        if (listeners[ii].dispose)\n                            listeners[ii].dispose(entry);\n                    this.animState.trackEntryPool.free(entry);\n                    break;\n                case EventType.complete:\n                    if (entry.listener && entry.listener.complete)\n                        entry.listener.complete(entry);\n                    for (let ii = 0; ii < listeners.length; ii++)\n                        if (listeners[ii].complete)\n                            listeners[ii].complete(entry);\n                    break;\n                case EventType.event:\n                    let event = objects[i++ + 2];\n                    if (entry.listener && entry.listener.event)\n                        entry.listener.event(entry, event);\n                    for (let ii = 0; ii < listeners.length; ii++)\n                        if (listeners[ii].event)\n                            listeners[ii].event(entry, event);\n                    break;\n            }\n        }\n        this.clear();\n        this.drainDisabled = false;\n    }\n    clear() {\n        this.objects.length = 0;\n    }\n}\nexport var EventType;\n(function (EventType) {\n    EventType[EventType[\"start\"] = 0] = \"start\";\n    EventType[EventType[\"interrupt\"] = 1] = \"interrupt\";\n    EventType[EventType[\"end\"] = 2] = \"end\";\n    EventType[EventType[\"dispose\"] = 3] = \"dispose\";\n    EventType[EventType[\"complete\"] = 4] = \"complete\";\n    EventType[EventType[\"event\"] = 5] = \"event\";\n})(EventType || (EventType = {}));\nexport class AnimationStateAdapter {\n    start(entry) {\n    }\n    interrupt(entry) {\n    }\n    end(entry) {\n    }\n    dispose(entry) {\n    }\n    complete(entry) {\n    }\n    event(entry, event) {\n    }\n}\n/** 1. A previously applied timeline has set this property.\n *\n * Result: Mix from the current pose to the timeline pose. */\nexport const SUBSEQUENT = 0;\n/** 1. This is the first timeline to set this property.\n * 2. The next track entry applied after this one does not have a timeline to set this property.\n *\n * Result: Mix from the setup pose to the timeline pose. */\nexport const FIRST = 1;\n/** 1) A previously applied timeline has set this property.<br>\n * 2) The next track entry to be applied does have a timeline to set this property.<br>\n * 3) The next track entry after that one does not have a timeline to set this property.<br>\n * Result: Mix from the current pose to the timeline pose, but do not mix out. This avoids \"dipping\" when crossfading\n * animations that key the same property. A subsequent timeline will set this property using a mix. */\nexport const HOLD_SUBSEQUENT = 2;\n/** 1) This is the first timeline to set this property.<br>\n * 2) The next track entry to be applied does have a timeline to set this property.<br>\n * 3) The next track entry after that one does not have a timeline to set this property.<br>\n * Result: Mix from the setup pose to the timeline pose, but do not mix out. This avoids \"dipping\" when crossfading animations\n * that key the same property. A subsequent timeline will set this property using a mix. */\nexport const HOLD_FIRST = 3;\n/** 1. This is the first timeline to set this property.\n * 2. The next track entry to be applied does have a timeline to set this property.\n * 3. The next track entry after that one does have a timeline to set this property.\n * 4. timelineHoldMix stores the first subsequent track entry that does not have a timeline to set this property.\n *\n * Result: The same as HOLD except the mix percentage from the timelineHoldMix track entry is used. This handles when more than\n * 2 track entries in a row have a timeline that sets the same property.\n *\n * Eg, A -> B -> C -> D where A, B, and C have a timeline setting same property, but D does not. When A is applied, to avoid\n * \"dipping\" A is not mixed out, however D (the first entry that doesn't set the property) mixing in is used to mix out A\n * (which affects B and C). Without using D to mix out, A would be applied fully until mixing completes, then snap into\n * place. */\nexport const HOLD_MIX = 4;\nexport const SETUP = 1;\nexport const CURRENT = 2;\nlet _emptyAnimation = null;","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\n/** Stores mix (crossfade) durations to be applied when {@link AnimationState} animations are changed. */\nexport class AnimationStateData {\n    constructor(skeletonData) {\n        this.animationToMixTime = {};\n        /** The mix duration to use when no mix duration has been defined between two animations. */\n        this.defaultMix = 0;\n        if (!skeletonData)\n            throw new Error(\"skeletonData cannot be null.\");\n        this.skeletonData = skeletonData;\n    }\n    /** Sets a mix duration by animation name.\n     *\n     * See {@link #setMixWith()}. */\n    setMix(fromName, toName, duration) {\n        let from = this.skeletonData.findAnimation(fromName);\n        if (!from)\n            throw new Error(\"Animation not found: \" + fromName);\n        let to = this.skeletonData.findAnimation(toName);\n        if (!to)\n            throw new Error(\"Animation not found: \" + toName);\n        this.setMixWith(from, to, duration);\n    }\n    /** Sets the mix duration when changing from the specified animation to the other.\n     *\n     * See {@link TrackEntry#mixDuration}. */\n    setMixWith(from, to, duration) {\n        if (!from)\n            throw new Error(\"from cannot be null.\");\n        if (!to)\n            throw new Error(\"to cannot be null.\");\n        let key = from.name + \".\" + to.name;\n        this.animationToMixTime[key] = duration;\n    }\n    /** Returns the mix duration to use when changing from the specified animation to the other, or the {@link #defaultMix} if\n      * no mix duration has been set. */\n    getMix(from, to) {\n        let key = from.name + \".\" + to.name;\n        let value = this.animationToMixTime[key];\n        return value === undefined ? this.defaultMix : value;\n    }\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { Color } from \"../Utils\";\nimport { VertexAttachment } from \"./Attachment\";\n/** An attachment with vertices that make up a polygon. Can be used for hit detection, creating physics bodies, spawning particle\n * effects, and more.\n *\n * See {@link SkeletonBounds} and [Bounding Boxes](http://esotericsoftware.com/spine-bounding-boxes) in the Spine User\n * Guide. */\nexport class BoundingBoxAttachment extends VertexAttachment {\n    constructor(name) {\n        super(name);\n        this.color = new Color(1, 1, 1, 1);\n    }\n    copy() {\n        let copy = new BoundingBoxAttachment(this.name);\n        this.copyTo(copy);\n        copy.color.setFromColor(this.color);\n        return copy;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQm91bmRpbmdCb3hBdHRhY2htZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2F0dGFjaG1lbnRzL0JvdW5kaW5nQm94QXR0YWNobWVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OytFQTJCK0U7QUFFL0UsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUNqQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQWMsTUFBTSxjQUFjLENBQUM7QUFFNUQ7Ozs7WUFJWTtBQUNaLE1BQU0sT0FBTyxxQkFBc0IsU0FBUSxnQkFBZ0I7SUFHMUQsWUFBYSxJQUFZO1FBQ3hCLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUhiLFVBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUk5QixDQUFDO0lBRUQsSUFBSTtRQUNILElBQUksSUFBSSxHQUFHLElBQUkscUJBQXFCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hELElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3BDLE9BQU8sSUFBSSxDQUFDO0lBQ2IsQ0FBQztDQUNEIn0=","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { Color } from \"../Utils\";\nimport { VertexAttachment } from \"./Attachment\";\n/** An attachment with vertices that make up a polygon used for clipping the rendering of other attachments. */\nexport class ClippingAttachment extends VertexAttachment {\n    constructor(name) {\n        super(name);\n        // Nonessential.\n        /** The color of the clipping polygon as it was in Spine. Available only when nonessential data was exported. Clipping polygons\n         * are not usually rendered at runtime. */\n        this.color = new Color(0.2275, 0.2275, 0.8078, 1); // ce3a3aff\n    }\n    copy() {\n        let copy = new ClippingAttachment(this.name);\n        this.copyTo(copy);\n        copy.endSlot = this.endSlot;\n        copy.color.setFromColor(this.color);\n        return copy;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2xpcHBpbmdBdHRhY2htZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2F0dGFjaG1lbnRzL0NsaXBwaW5nQXR0YWNobWVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OytFQTJCK0U7QUFHL0UsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUNqQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQWMsTUFBTSxjQUFjLENBQUM7QUFFNUQsK0dBQStHO0FBQy9HLE1BQU0sT0FBTyxrQkFBbUIsU0FBUSxnQkFBZ0I7SUFVdkQsWUFBYSxJQUFZO1FBQ3hCLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQU5iLGdCQUFnQjtRQUNoQjtrREFDMEM7UUFDMUMsVUFBSyxHQUFHLElBQUksS0FBSyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVztJQUl6RCxDQUFDO0lBRUQsSUFBSTtRQUNILElBQUksSUFBSSxHQUFHLElBQUksa0JBQWtCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzdDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQzVCLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNwQyxPQUFPLElBQUksQ0FBQztJQUNiLENBQUM7Q0FDRCJ9","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nexport class Texture {\n    constructor(image) {\n        this._image = image;\n    }\n    getImage() {\n        return this._image;\n    }\n}\nexport var TextureFilter;\n(function (TextureFilter) {\n    TextureFilter[TextureFilter[\"Nearest\"] = 9728] = \"Nearest\";\n    TextureFilter[TextureFilter[\"Linear\"] = 9729] = \"Linear\";\n    TextureFilter[TextureFilter[\"MipMap\"] = 9987] = \"MipMap\";\n    TextureFilter[TextureFilter[\"MipMapNearestNearest\"] = 9984] = \"MipMapNearestNearest\";\n    TextureFilter[TextureFilter[\"MipMapLinearNearest\"] = 9985] = \"MipMapLinearNearest\";\n    TextureFilter[TextureFilter[\"MipMapNearestLinear\"] = 9986] = \"MipMapNearestLinear\";\n    TextureFilter[TextureFilter[\"MipMapLinearLinear\"] = 9987] = \"MipMapLinearLinear\"; // WebGLRenderingContext.LINEAR_MIPMAP_LINEAR\n})(TextureFilter || (TextureFilter = {}));\nexport var TextureWrap;\n(function (TextureWrap) {\n    TextureWrap[TextureWrap[\"MirroredRepeat\"] = 33648] = \"MirroredRepeat\";\n    TextureWrap[TextureWrap[\"ClampToEdge\"] = 33071] = \"ClampToEdge\";\n    TextureWrap[TextureWrap[\"Repeat\"] = 10497] = \"Repeat\"; // WebGLRenderingContext.REPEAT\n})(TextureWrap || (TextureWrap = {}));\nexport class TextureRegion {\n    constructor() {\n        this.u = 0;\n        this.v = 0;\n        this.u2 = 0;\n        this.v2 = 0;\n        this.width = 0;\n        this.height = 0;\n        this.degrees = 0;\n        this.offsetX = 0;\n        this.offsetY = 0;\n        this.originalWidth = 0;\n        this.originalHeight = 0;\n    }\n}\nexport class FakeTexture extends Texture {\n    setFilters(minFilter, magFilter) { }\n    setWraps(uWrap, vWrap) { }\n    dispose() { }\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { TextureFilter, TextureWrap, TextureRegion } from \"./Texture\";\nimport { Utils } from \"./Utils\";\nexport class TextureAtlas {\n    constructor(atlasText) {\n        this.pages = new Array();\n        this.regions = new Array();\n        let reader = new TextureAtlasReader(atlasText);\n        let entry = new Array(4);\n        let page = null;\n        let region = null;\n        let pageFields = {};\n        pageFields[\"size\"] = () => {\n            page.width = parseInt(entry[1]);\n            page.height = parseInt(entry[2]);\n        };\n        pageFields[\"format\"] = () => {\n            // page.format = Format[tuple[0]]; we don't need format in WebGL\n        };\n        pageFields[\"filter\"] = () => {\n            page.minFilter = Utils.enumValue(TextureFilter, entry[1]);\n            page.magFilter = Utils.enumValue(TextureFilter, entry[2]);\n        };\n        pageFields[\"repeat\"] = () => {\n            if (entry[1].indexOf('x') != -1)\n                page.uWrap = TextureWrap.Repeat;\n            if (entry[1].indexOf('y') != -1)\n                page.vWrap = TextureWrap.Repeat;\n        };\n        pageFields[\"pma\"] = () => {\n            page.pma = entry[1] == \"true\";\n        };\n        var regionFields = {};\n        regionFields[\"xy\"] = () => {\n            region.x = parseInt(entry[1]);\n            region.y = parseInt(entry[2]);\n        };\n        regionFields[\"size\"] = () => {\n            region.width = parseInt(entry[1]);\n            region.height = parseInt(entry[2]);\n        };\n        regionFields[\"bounds\"] = () => {\n            region.x = parseInt(entry[1]);\n            region.y = parseInt(entry[2]);\n            region.width = parseInt(entry[3]);\n            region.height = parseInt(entry[4]);\n        };\n        regionFields[\"offset\"] = () => {\n            region.offsetX = parseInt(entry[1]);\n            region.offsetY = parseInt(entry[2]);\n        };\n        regionFields[\"orig\"] = () => {\n            region.originalWidth = parseInt(entry[1]);\n            region.originalHeight = parseInt(entry[2]);\n        };\n        regionFields[\"offsets\"] = () => {\n            region.offsetX = parseInt(entry[1]);\n            region.offsetY = parseInt(entry[2]);\n            region.originalWidth = parseInt(entry[3]);\n            region.originalHeight = parseInt(entry[4]);\n        };\n        regionFields[\"rotate\"] = () => {\n            let value = entry[1];\n            if (value == \"true\")\n                region.degrees = 90;\n            else if (value != \"false\")\n                region.degrees = parseInt(value);\n        };\n        regionFields[\"index\"] = () => {\n            region.index = parseInt(entry[1]);\n        };\n        let line = reader.readLine();\n        // Ignore empty lines before first entry.\n        while (line && line.trim().length == 0)\n            line = reader.readLine();\n        // Header entries.\n        while (true) {\n            if (!line || line.trim().length == 0)\n                break;\n            if (reader.readEntry(entry, line) == 0)\n                break; // Silently ignore all header fields.\n            line = reader.readLine();\n        }\n        // Page and region entries.\n        let names = null;\n        let values = null;\n        while (true) {\n            if (line === null)\n                break;\n            if (line.trim().length == 0) {\n                page = null;\n                line = reader.readLine();\n            }\n            else if (!page) {\n                page = new TextureAtlasPage();\n                page.name = line.trim();\n                while (true) {\n                    if (reader.readEntry(entry, line = reader.readLine()) == 0)\n                        break;\n                    let field = pageFields[entry[0]];\n                    if (field)\n                        field();\n                }\n                this.pages.push(page);\n            }\n            else {\n                region = new TextureAtlasRegion();\n                region.page = page;\n                region.name = line;\n                while (true) {\n                    let count = reader.readEntry(entry, line = reader.readLine());\n                    if (count == 0)\n                        break;\n                    let field = regionFields[entry[0]];\n                    if (field)\n                        field();\n                    else {\n                        if (!names) {\n                            names = [];\n                            values = [];\n                        }\n                        names.push(entry[0]);\n                        let entryValues = [];\n                        for (let i = 0; i < count; i++)\n                            entryValues.push(parseInt(entry[i + 1]));\n                        values.push(entryValues);\n                    }\n                }\n                if (region.originalWidth == 0 && region.originalHeight == 0) {\n                    region.originalWidth = region.width;\n                    region.originalHeight = region.height;\n                }\n                if (names && names.length > 0) {\n                    region.names = names;\n                    region.values = values;\n                    names = null;\n                    values = null;\n                }\n                region.u = region.x / page.width;\n                region.v = region.y / page.height;\n                if (region.degrees == 90) {\n                    region.u2 = (region.x + region.height) / page.width;\n                    region.v2 = (region.y + region.width) / page.height;\n                }\n                else {\n                    region.u2 = (region.x + region.width) / page.width;\n                    region.v2 = (region.y + region.height) / page.height;\n                }\n                this.regions.push(region);\n            }\n        }\n    }\n    findRegion(name) {\n        for (let i = 0; i < this.regions.length; i++) {\n            if (this.regions[i].name == name) {\n                return this.regions[i];\n            }\n        }\n        return null;\n    }\n    setTextures(assetManager, path = \"\") {\n        for (let page of this.pages)\n            page.setTexture(assetManager.get(path));\n    }\n    dispose() {\n        for (let i = 0; i < this.pages.length; i++) {\n            this.pages[i].texture.dispose();\n        }\n    }\n}\nclass TextureAtlasReader {\n    constructor(text) {\n        this.index = 0;\n        this.lines = text.split(/\\r\\n|\\r|\\n/);\n    }\n    readLine() {\n        if (this.index >= this.lines.length)\n            return null;\n        return this.lines[this.index++];\n    }\n    readEntry(entry, line) {\n        if (!line)\n            return 0;\n        line = line.trim();\n        if (line.length == 0)\n            return 0;\n        let colon = line.indexOf(':');\n        if (colon == -1)\n            return 0;\n        entry[0] = line.substr(0, colon).trim();\n        for (let i = 1, lastMatch = colon + 1;; i++) {\n            let comma = line.indexOf(',', lastMatch);\n            if (comma == -1) {\n                entry[i] = line.substr(lastMatch).trim();\n                return i;\n            }\n            entry[i] = line.substr(lastMatch, comma - lastMatch).trim();\n            lastMatch = comma + 1;\n            if (i == 4)\n                return 4;\n        }\n    }\n}\nexport class TextureAtlasPage {\n    constructor() {\n        this.minFilter = TextureFilter.Nearest;\n        this.magFilter = TextureFilter.Nearest;\n        this.uWrap = TextureWrap.ClampToEdge;\n        this.vWrap = TextureWrap.ClampToEdge;\n    }\n    setTexture(texture) {\n        this.texture = texture;\n        texture.setFilters(this.minFilter, this.magFilter);\n        texture.setWraps(this.uWrap, this.vWrap);\n    }\n}\nexport class TextureAtlasRegion extends TextureRegion {\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { TextureAtlasRegion } from \"../TextureAtlas\";\nimport { Color, Utils } from \"../Utils\";\nimport { VertexAttachment } from \"./Attachment\";\n/** An attachment that displays a textured mesh. A mesh has hull vertices and internal vertices within the hull. Holes are not\n * supported. Each vertex has UVs (texture coordinates) and triangles are used to map an image on to the mesh.\n *\n * See [Mesh attachments](http://esotericsoftware.com/spine-meshes) in the Spine User Guide. */\nexport class MeshAttachment extends VertexAttachment {\n    constructor(name) {\n        super(name);\n        /** The color to tint the mesh. */\n        this.color = new Color(1, 1, 1, 1);\n        this.tempColor = new Color(0, 0, 0, 0);\n    }\n    /** Calculates {@link #uvs} using {@link #regionUVs} and the {@link #region}. Must be called after changing the region UVs or\n     * region. */\n    updateUVs() {\n        let regionUVs = this.regionUVs;\n        if (!this.uvs || this.uvs.length != regionUVs.length)\n            this.uvs = Utils.newFloatArray(regionUVs.length);\n        let uvs = this.uvs;\n        let n = this.uvs.length;\n        let u = this.region.u, v = this.region.v, width = 0, height = 0;\n        if (this.region instanceof TextureAtlasRegion) {\n            let region = this.region, image = region.page.texture.getImage();\n            let textureWidth = image.width, textureHeight = image.height;\n            switch (region.degrees) {\n                case 90:\n                    u -= (region.originalHeight - region.offsetY - region.height) / textureWidth;\n                    v -= (region.originalWidth - region.offsetX - region.width) / textureHeight;\n                    width = region.originalHeight / textureWidth;\n                    height = region.originalWidth / textureHeight;\n                    for (let i = 0; i < n; i += 2) {\n                        uvs[i] = u + regionUVs[i + 1] * width;\n                        uvs[i + 1] = v + (1 - regionUVs[i]) * height;\n                    }\n                    return;\n                case 180:\n                    u -= (region.originalWidth - region.offsetX - region.width) / textureWidth;\n                    v -= region.offsetY / textureHeight;\n                    width = region.originalWidth / textureWidth;\n                    height = region.originalHeight / textureHeight;\n                    for (let i = 0; i < n; i += 2) {\n                        uvs[i] = u + (1 - regionUVs[i]) * width;\n                        uvs[i + 1] = v + (1 - regionUVs[i + 1]) * height;\n                    }\n                    return;\n                case 270:\n                    u -= region.offsetY / textureWidth;\n                    v -= region.offsetX / textureHeight;\n                    width = region.originalHeight / textureWidth;\n                    height = region.originalWidth / textureHeight;\n                    for (let i = 0; i < n; i += 2) {\n                        uvs[i] = u + (1 - regionUVs[i + 1]) * width;\n                        uvs[i + 1] = v + regionUVs[i] * height;\n                    }\n                    return;\n            }\n            u -= region.offsetX / textureWidth;\n            v -= (region.originalHeight - region.offsetY - region.height) / textureHeight;\n            width = region.originalWidth / textureWidth;\n            height = region.originalHeight / textureHeight;\n        }\n        else if (!this.region) {\n            u = v = 0;\n            width = height = 1;\n        }\n        else {\n            width = this.region.u2 - u;\n            height = this.region.v2 - v;\n        }\n        for (let i = 0; i < n; i += 2) {\n            uvs[i] = u + regionUVs[i] * width;\n            uvs[i + 1] = v + regionUVs[i + 1] * height;\n        }\n    }\n    /** The parent mesh if this is a linked mesh, else null. A linked mesh shares the {@link #bones}, {@link #vertices},\n     * {@link #regionUVs}, {@link #triangles}, {@link #hullLength}, {@link #edges}, {@link #width}, and {@link #height} with the\n     * parent mesh, but may have a different {@link #name} or {@link #path} (and therefore a different texture). */\n    getParentMesh() {\n        return this.parentMesh;\n    }\n    /** @param parentMesh May be null. */\n    setParentMesh(parentMesh) {\n        this.parentMesh = parentMesh;\n        if (parentMesh) {\n            this.bones = parentMesh.bones;\n            this.vertices = parentMesh.vertices;\n            this.worldVerticesLength = parentMesh.worldVerticesLength;\n            this.regionUVs = parentMesh.regionUVs;\n            this.triangles = parentMesh.triangles;\n            this.hullLength = parentMesh.hullLength;\n            this.worldVerticesLength = parentMesh.worldVerticesLength;\n        }\n    }\n    copy() {\n        if (this.parentMesh)\n            return this.newLinkedMesh();\n        let copy = new MeshAttachment(this.name);\n        copy.region = this.region;\n        copy.path = this.path;\n        copy.color.setFromColor(this.color);\n        this.copyTo(copy);\n        copy.regionUVs = new Array(this.regionUVs.length);\n        Utils.arrayCopy(this.regionUVs, 0, copy.regionUVs, 0, this.regionUVs.length);\n        copy.uvs = new Array(this.uvs.length);\n        Utils.arrayCopy(this.uvs, 0, copy.uvs, 0, this.uvs.length);\n        copy.triangles = new Array(this.triangles.length);\n        Utils.arrayCopy(this.triangles, 0, copy.triangles, 0, this.triangles.length);\n        copy.hullLength = this.hullLength;\n        // Nonessential.\n        if (this.edges) {\n            copy.edges = new Array(this.edges.length);\n            Utils.arrayCopy(this.edges, 0, copy.edges, 0, this.edges.length);\n        }\n        copy.width = this.width;\n        copy.height = this.height;\n        return copy;\n    }\n    /** Returns a new mesh with the {@link #parentMesh} set to this mesh's parent mesh, if any, else to this mesh. **/\n    newLinkedMesh() {\n        let copy = new MeshAttachment(this.name);\n        copy.region = this.region;\n        copy.path = this.path;\n        copy.color.setFromColor(this.color);\n        copy.deformAttachment = this.deformAttachment;\n        copy.setParentMesh(this.parentMesh ? this.parentMesh : this);\n        copy.updateUVs();\n        return copy;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVzaEF0dGFjaG1lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvYXR0YWNobWVudHMvTWVzaEF0dGFjaG1lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsrRUEyQitFO0FBRy9FLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3JELE9BQU8sRUFBRSxLQUFLLEVBQW1CLEtBQUssRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUN6RCxPQUFPLEVBQUUsZ0JBQWdCLEVBQWMsTUFBTSxjQUFjLENBQUM7QUFFNUQ7OzsrRkFHK0Y7QUFDL0YsTUFBTSxPQUFPLGNBQWUsU0FBUSxnQkFBZ0I7SUFvQ25ELFlBQWEsSUFBWTtRQUN4QixLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFwQmIsa0NBQWtDO1FBQ2xDLFVBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQWdCOUIsY0FBUyxHQUFHLElBQUksS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBSWxDLENBQUM7SUFFRDtpQkFDYTtJQUNiLFNBQVM7UUFDUixJQUFJLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQy9CLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxJQUFJLFNBQVMsQ0FBQyxNQUFNO1lBQUUsSUFBSSxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN2RyxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO1FBQ25CLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDO1FBQ3hCLElBQUks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LElBQUksS0FBSyxDQUFTLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDMUQsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzdFLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxLQUFLLENBQVMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5QyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLEtBQUssQ0FBUyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzFELEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM3RSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7UUFFbEMsZ0JBQWdCO1FBQ2hCLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNmLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQVMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNsRCxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDakU7UUFDRCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDeEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBRTFCLE9BQU8sSUFBSSxDQUFDO0lBQ2IsQ0FBQztJQUVELGtIQUFrSDtJQUNsSCxhQUFhO1FBQ1osSUFBSSxJQUFJLEdBQUcsSUFBSSxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUMxQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDdEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7UUFDOUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM3RCxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDakIsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0NBQ0QifQ==","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { Color, Utils } from \"../Utils\";\nimport { VertexAttachment } from \"./Attachment\";\n/** An attachment whose vertices make up a composite Bezier curve.\n *\n * See {@link PathConstraint} and [Paths](http://esotericsoftware.com/spine-paths) in the Spine User Guide. */\nexport class PathAttachment extends VertexAttachment {\n    constructor(name) {\n        super(name);\n        /** If true, the start and end knots are connected. */\n        this.closed = false;\n        /** If true, additional calculations are performed to make calculating positions along the path more accurate. If false, fewer\n         * calculations are performed but calculating positions along the path is less accurate. */\n        this.constantSpeed = false;\n        /** The color of the path as it was in Spine. Available only when nonessential data was exported. Paths are not usually\n         * rendered at runtime. */\n        this.color = new Color(1, 1, 1, 1);\n    }\n    copy() {\n        let copy = new PathAttachment(this.name);\n        this.copyTo(copy);\n        copy.lengths = new Array(this.lengths.length);\n        Utils.arrayCopy(this.lengths, 0, copy.lengths, 0, this.lengths.length);\n        copy.closed = closed;\n        copy.constantSpeed = this.constantSpeed;\n        copy.color.setFromColor(this.color);\n        return copy;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGF0aEF0dGFjaG1lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvYXR0YWNobWVudHMvUGF0aEF0dGFjaG1lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsrRUEyQitFO0FBRS9FLE9BQU8sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQ3hDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBYyxNQUFNLGNBQWMsQ0FBQztBQUU1RDs7OEdBRThHO0FBQzlHLE1BQU0sT0FBTyxjQUFlLFNBQVEsZ0JBQWdCO0lBZ0JuRCxZQUFhLElBQVk7UUFDeEIsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBWmIsc0RBQXNEO1FBQ3RELFdBQU0sR0FBRyxLQUFLLENBQUM7UUFFZjttR0FDMkY7UUFDM0Ysa0JBQWEsR0FBRyxLQUFLLENBQUM7UUFFdEI7a0NBQzBCO1FBQzFCLFVBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUk5QixDQUFDO0lBRUQsSUFBSTtRQUNILElBQUksSUFBSSxHQUFHLElBQUksY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxLQUFLLENBQVMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN0RCxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdkUsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO1FBQ3hDLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNwQyxPQUFPLElBQUksQ0FBQztJQUNiLENBQUM7Q0FDRCJ9","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { Color, MathUtils } from \"../Utils\";\nimport { VertexAttachment } from \"./Attachment\";\n/** An attachment which is a single point and a rotation. This can be used to spawn projectiles, particles, etc. A bone can be\n * used in similar ways, but a PointAttachment is slightly less expensive to compute and can be hidden, shown, and placed in a\n * skin.\n *\n * See [Point Attachments](http://esotericsoftware.com/spine-point-attachments) in the Spine User Guide. */\nexport class PointAttachment extends VertexAttachment {\n    constructor(name) {\n        super(name);\n        /** The color of the point attachment as it was in Spine. Available only when nonessential data was exported. Point attachments\n         * are not usually rendered at runtime. */\n        this.color = new Color(0.38, 0.94, 0, 1);\n    }\n    computeWorldPosition(bone, point) {\n        point.x = this.x * bone.a + this.y * bone.b + bone.worldX;\n        point.y = this.x * bone.c + this.y * bone.d + bone.worldY;\n        return point;\n    }\n    computeWorldRotation(bone) {\n        let cos = MathUtils.cosDeg(this.rotation), sin = MathUtils.sinDeg(this.rotation);\n        let x = cos * bone.a + sin * bone.b;\n        let y = cos * bone.c + sin * bone.d;\n        return Math.atan2(y, x) * MathUtils.radDeg;\n    }\n    copy() {\n        let copy = new PointAttachment(this.name);\n        copy.x = this.x;\n        copy.y = this.y;\n        copy.rotation = this.rotation;\n        copy.color.setFromColor(this.color);\n        return copy;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUG9pbnRBdHRhY2htZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2F0dGFjaG1lbnRzL1BvaW50QXR0YWNobWVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OytFQTJCK0U7QUFHL0UsT0FBTyxFQUFFLEtBQUssRUFBVyxTQUFTLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFDckQsT0FBTyxFQUFFLGdCQUFnQixFQUFjLE1BQU0sY0FBYyxDQUFDO0FBRTVEOzs7OzJHQUkyRztBQUMzRyxNQUFNLE9BQU8sZUFBZ0IsU0FBUSxnQkFBZ0I7SUFPcEQsWUFBYSxJQUFZO1FBQ3hCLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUxiO2tEQUMwQztRQUMxQyxVQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFJcEMsQ0FBQztJQUVELG9CQUFvQixDQUFFLElBQVUsRUFBRSxLQUFjO1FBQy9DLEtBQUssQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQzFELEtBQUssQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQzFELE9BQU8sS0FBSyxDQUFDO0lBQ2QsQ0FBQztJQUVELG9CQUFvQixDQUFFLElBQVU7UUFDL0IsSUFBSSxHQUFHLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsR0FBRyxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2pGLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQztJQUM1QyxDQUFDO0lBRUQsSUFBSTtRQUNILElBQUksSUFBSSxHQUFHLElBQUksZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMxQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDaEIsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ2hCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUM5QixJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDcEMsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0NBQ0QifQ==","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { Color, Utils } from \"../Utils\";\nimport { Attachment } from \"./Attachment\";\n/** An attachment that displays a textured quadrilateral.\n *\n * See [Region attachments](http://esotericsoftware.com/spine-regions) in the Spine User Guide. */\nexport class RegionAttachment extends Attachment {\n    constructor(name) {\n        super(name);\n        /** The local x translation. */\n        this.x = 0;\n        /** The local y translation. */\n        this.y = 0;\n        /** The local scaleX. */\n        this.scaleX = 1;\n        /** The local scaleY. */\n        this.scaleY = 1;\n        /** The local rotation. */\n        this.rotation = 0;\n        /** The width of the region attachment in Spine. */\n        this.width = 0;\n        /** The height of the region attachment in Spine. */\n        this.height = 0;\n        /** The color to tint the region attachment. */\n        this.color = new Color(1, 1, 1, 1);\n        /** For each of the 4 vertices, a pair of <code>x,y</code> values that is the local position of the vertex.\n         *\n         * See {@link #updateOffset()}. */\n        this.offset = Utils.newFloatArray(8);\n        this.uvs = Utils.newFloatArray(8);\n        this.tempColor = new Color(1, 1, 1, 1);\n    }\n    /** Calculates the {@link #offset} using the region settings. Must be called after changing region settings. */\n    updateOffset() {\n        let region = this.region;\n        let regionScaleX = this.width / this.region.originalWidth * this.scaleX;\n        let regionScaleY = this.height / this.region.originalHeight * this.scaleY;\n        let localX = -this.width / 2 * this.scaleX + this.region.offsetX * regionScaleX;\n        let localY = -this.height / 2 * this.scaleY + this.region.offsetY * regionScaleY;\n        let localX2 = localX + this.region.width * regionScaleX;\n        let localY2 = localY + this.region.height * regionScaleY;\n        let radians = this.rotation * Math.PI / 180;\n        let cos = Math.cos(radians);\n        let sin = Math.sin(radians);\n        let x = this.x, y = this.y;\n        let localXCos = localX * cos + x;\n        let localXSin = localX * sin;\n        let localYCos = localY * cos + y;\n        let localYSin = localY * sin;\n        let localX2Cos = localX2 * cos + x;\n        let localX2Sin = localX2 * sin;\n        let localY2Cos = localY2 * cos + y;\n        let localY2Sin = localY2 * sin;\n        let offset = this.offset;\n        offset[0] = localXCos - localYSin;\n        offset[1] = localYCos + localXSin;\n        offset[2] = localXCos - localY2Sin;\n        offset[3] = localY2Cos + localXSin;\n        offset[4] = localX2Cos - localY2Sin;\n        offset[5] = localY2Cos + localX2Sin;\n        offset[6] = localX2Cos - localYSin;\n        offset[7] = localYCos + localX2Sin;\n    }\n    setRegion(region) {\n        this.region = region;\n        let uvs = this.uvs;\n        if (region.degrees == 90) {\n            uvs[2] = region.u;\n            uvs[3] = region.v2;\n            uvs[4] = region.u;\n            uvs[5] = region.v;\n            uvs[6] = region.u2;\n            uvs[7] = region.v;\n            uvs[0] = region.u2;\n            uvs[1] = region.v2;\n        }\n        else {\n            uvs[0] = region.u;\n            uvs[1] = region.v2;\n            uvs[2] = region.u;\n            uvs[3] = region.v;\n            uvs[4] = region.u2;\n            uvs[5] = region.v;\n            uvs[6] = region.u2;\n            uvs[7] = region.v2;\n        }\n    }\n    /** Transforms the attachment's four vertices to world coordinates.\n     *\n     * See [World transforms](http://esotericsoftware.com/spine-runtime-skeletons#World-transforms) in the Spine\n     * Runtimes Guide.\n     * @param worldVertices The output world vertices. Must have a length >= `offset` + 8.\n     * @param offset The `worldVertices` index to begin writing values.\n     * @param stride The number of `worldVertices` entries between the value pairs written. */\n    computeWorldVertices(bone, worldVertices, offset, stride) {\n        let vertexOffset = this.offset;\n        let x = bone.worldX, y = bone.worldY;\n        let a = bone.a, b = bone.b, c = bone.c, d = bone.d;\n        let offsetX = 0, offsetY = 0;\n        offsetX = vertexOffset[0];\n        offsetY = vertexOffset[1];\n        worldVertices[offset] = offsetX * a + offsetY * b + x; // br\n        worldVertices[offset + 1] = offsetX * c + offsetY * d + y;\n        offset += stride;\n        offsetX = vertexOffset[2];\n        offsetY = vertexOffset[3];\n        worldVertices[offset] = offsetX * a + offsetY * b + x; // bl\n        worldVertices[offset + 1] = offsetX * c + offsetY * d + y;\n        offset += stride;\n        offsetX = vertexOffset[4];\n        offsetY = vertexOffset[5];\n        worldVertices[offset] = offsetX * a + offsetY * b + x; // ul\n        worldVertices[offset + 1] = offsetX * c + offsetY * d + y;\n        offset += stride;\n        offsetX = vertexOffset[6];\n        offsetY = vertexOffset[7];\n        worldVertices[offset] = offsetX * a + offsetY * b + x; // ur\n        worldVertices[offset + 1] = offsetX * c + offsetY * d + y;\n    }\n    copy() {\n        let copy = new RegionAttachment(this.name);\n        copy.region = this.region;\n        copy.rendererObject = this.rendererObject;\n        copy.path = this.path;\n        copy.x = this.x;\n        copy.y = this.y;\n        copy.scaleX = this.scaleX;\n        copy.scaleY = this.scaleY;\n        copy.rotation = this.rotation;\n        copy.width = this.width;\n        copy.height = this.height;\n        Utils.arrayCopy(this.uvs, 0, copy.uvs, 0, 8);\n        Utils.arrayCopy(this.offset, 0, copy.offset, 0, 8);\n        copy.color.setFromColor(this.color);\n        return copy;\n    }\n}\nRegionAttachment.X1 = 0;\nRegionAttachment.Y1 = 1;\nRegionAttachment.C1R = 2;\nRegionAttachment.C1G = 3;\nRegionAttachment.C1B = 4;\nRegionAttachment.C1A = 5;\nRegionAttachment.U1 = 6;\nRegionAttachment.V1 = 7;\nRegionAttachment.X2 = 8;\nRegionAttachment.Y2 = 9;\nRegionAttachment.C2R = 10;\nRegionAttachment.C2G = 11;\nRegionAttachment.C2B = 12;\nRegionAttachment.C2A = 13;\nRegionAttachment.U2 = 14;\nRegionAttachment.V2 = 15;\nRegionAttachment.X3 = 16;\nRegionAttachment.Y3 = 17;\nRegionAttachment.C3R = 18;\nRegionAttachment.C3G = 19;\nRegionAttachment.C3B = 20;\nRegionAttachment.C3A = 21;\nRegionAttachment.U3 = 22;\nRegionAttachment.V3 = 23;\nRegionAttachment.X4 = 24;\nRegionAttachment.Y4 = 25;\nRegionAttachment.C4R = 26;\nRegionAttachment.C4G = 27;\nRegionAttachment.C4B = 28;\nRegionAttachment.C4A = 29;\nRegionAttachment.U4 = 30;\nRegionAttachment.V4 = 31;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVnaW9uQXR0YWNobWVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hdHRhY2htZW50cy9SZWdpb25BdHRhY2htZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K0VBMkIrRTtBQUkvRSxPQUFPLEVBQUUsS0FBSyxFQUFtQixLQUFLLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFDekQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUUxQzs7a0dBRWtHO0FBQ2xHLE1BQU0sT0FBTyxnQkFBaUIsU0FBUSxVQUFVO0lBd0MvQyxZQUFhLElBQVk7UUFDeEIsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBeENiLCtCQUErQjtRQUMvQixNQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRU4sK0JBQStCO1FBQy9CLE1BQUMsR0FBRyxDQUFDLENBQUM7UUFFTix3QkFBd0I7UUFDeEIsV0FBTSxHQUFHLENBQUMsQ0FBQztRQUVYLHdCQUF3QjtRQUN4QixXQUFNLEdBQUcsQ0FBQyxDQUFDO1FBRVgsMEJBQTBCO1FBQzFCLGFBQVEsR0FBRyxDQUFDLENBQUM7UUFFYixtREFBbUQ7UUFDbkQsVUFBSyxHQUFHLENBQUMsQ0FBQztRQUVWLG9EQUFvRDtRQUNwRCxXQUFNLEdBQUcsQ0FBQyxDQUFDO1FBRVgsK0NBQStDO1FBQy9DLFVBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQVE5Qjs7MENBRWtDO1FBQ2xDLFdBQU0sR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWhDLFFBQUcsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTdCLGNBQVMsR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFD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LElBQUksQ0FBQyxHQUFHLENBQUM7UUFDbkIsSUFBSSxNQUFNLENBQUMsT0FBTyxJQUFJLEVBQUUsRUFBRTtZQUN6QixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNsQixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQztZQUNuQixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNsQixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNsQixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQztZQUNuQixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNsQixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQztZQUNuQixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQztTQUNuQjthQUFNO1lBQ04sR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDbEIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxFQUFFLENBQUM7WUFDbkIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDbEIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDbEIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxFQUFFLENBQUM7WUFDbkIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDbEIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxFQUFFLENBQUM7WUFDbkIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxFQUFFLENBQUM7U0FDbkI7SUFDRixD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Q0FBQztBQUNULG1CQUFFLEdBQUcsRUFBRSxDQUFDO0FBQ1IsbUJBQUUsR0FBRyxFQUFFLENBQUM7QUFFUixtQkFBRSxHQUFHLEVBQUUsQ0FBQztBQUNSLG1CQUFFLEdBQUcsRUFBRSxDQUFDO0FBQ1Isb0JBQUcsR0FBRyxFQUFFLENBQUM7QUFDVCxvQkFBRyxHQUFHLEVBQUUsQ0FBQztBQUNULG9CQUFHLEdBQUcsRUFBRSxDQUFDO0FBQ1Qsb0JBQUcsR0FBRyxFQUFFLENBQUM7QUFDVCxtQkFBRSxHQUFHLEVBQUUsQ0FBQztBQUNSLG1CQUFFLEdBQUcsRUFBRSxDQUFDO0FBRVIsbUJBQUUsR0FBRyxFQUFFLENBQUM7QUFDUixtQkFBRSxHQUFHLEVBQUUsQ0FBQztBQUNSLG9CQUFHLEdBQUcsRUFBRSxDQUFDO0FBQ1Qsb0JBQUcsR0FBRyxFQUFFLENBQUM7QUFDVCxvQkFBRyxHQUFHLEVBQUUsQ0FBQztBQUNULG9CQUFHLEdBQUcsRUFBRSxDQUFDO0FBQ1QsbUJBQUUsR0FBRyxFQUFFLENBQUM7QUFDUixtQkFBRSxHQUFHLEVBQUUsQ0FBQyJ9","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { BoundingBoxAttachment } from \"./attachments/BoundingBoxAttachment\";\nimport { ClippingAttachment } from \"./attachments/ClippingAttachment\";\nimport { MeshAttachment } from \"./attachments/MeshAttachment\";\nimport { PathAttachment } from \"./attachments/PathAttachment\";\nimport { PointAttachment } from \"./attachments/PointAttachment\";\nimport { RegionAttachment } from \"./attachments/RegionAttachment\";\n/** An {@link AttachmentLoader} that configures attachments using texture regions from an {@link TextureAtlas}.\n *\n * See [Loading skeleton data](http://esotericsoftware.com/spine-loading-skeleton-data#JSON-and-binary-data) in the\n * Spine Runtimes Guide. */\nexport class AtlasAttachmentLoader {\n    constructor(atlas) {\n        this.atlas = atlas;\n    }\n    newRegionAttachment(skin, name, path) {\n        let region = this.atlas.findRegion(path);\n        if (!region)\n            throw new Error(\"Region not found in atlas: \" + path + \" (region attachment: \" + name + \")\");\n        region.renderObject = region;\n        let attachment = new RegionAttachment(name);\n        attachment.setRegion(region);\n        return attachment;\n    }\n    newMeshAttachment(skin, name, path) {\n        let region = this.atlas.findRegion(path);\n        if (!region)\n            throw new Error(\"Region not found in atlas: \" + path + \" (mesh attachment: \" + name + \")\");\n        region.renderObject = region;\n        let attachment = new MeshAttachment(name);\n        attachment.region = region;\n        return attachment;\n    }\n    newBoundingBoxAttachment(skin, name) {\n        return new BoundingBoxAttachment(name);\n    }\n    newPathAttachment(skin, name) {\n        return new PathAttachment(name);\n    }\n    newPointAttachment(skin, name) {\n        return new PointAttachment(name);\n    }\n    newClippingAttachment(skin, name) {\n        return new ClippingAttachment(name);\n    }\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { Color } from \"./Utils\";\n/** Stores the setup pose for a {@link Bone}. */\nexport class BoneData {\n    constructor(index, name, parent) {\n        /** The local x translation. */\n        this.x = 0;\n        /** The local y translation. */\n        this.y = 0;\n        /** The local rotation. */\n        this.rotation = 0;\n        /** The local scaleX. */\n        this.scaleX = 1;\n        /** The local scaleY. */\n        this.scaleY = 1;\n        /** The local shearX. */\n        this.shearX = 0;\n        /** The local shearX. */\n        this.shearY = 0;\n        /** The transform mode for how parent world transforms affect this bone. */\n        this.transformMode = TransformMode.Normal;\n        /** When true, {@link Skeleton#updateWorldTransform()} only updates this bone if the {@link Skeleton#skin} contains this\n          * bone.\n          * @see Skin#bones */\n        this.skinRequired = false;\n        /** The color of the bone as it was in Spine. Available only when nonessential data was exported. Bones are not usually\n         * rendered at runtime. */\n        this.color = new Color();\n        if (index < 0)\n            throw new Error(\"index must be >= 0.\");\n        if (!name)\n            throw new Error(\"name cannot be null.\");\n        this.index = index;\n        this.name = name;\n        this.parent = parent;\n    }\n}\n/** Determines how a bone inherits world transforms from parent bones. */\nexport var TransformMode;\n(function (TransformMode) {\n    TransformMode[TransformMode[\"Normal\"] = 0] = \"Normal\";\n    TransformMode[TransformMode[\"OnlyTranslation\"] = 1] = \"OnlyTranslation\";\n    TransformMode[TransformMode[\"NoRotationOrReflection\"] = 2] = \"NoRotationOrReflection\";\n    TransformMode[TransformMode[\"NoScale\"] = 3] = \"NoScale\";\n    TransformMode[TransformMode[\"NoScaleOrReflection\"] = 4] = \"NoScaleOrReflection\";\n})(TransformMode || (TransformMode = {}));","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { TransformMode } from \"./BoneData\";\nimport { MathUtils } from \"./Utils\";\n/** Stores a bone's current pose.\n *\n * A bone has a local transform which is used to compute its world transform. A bone also has an applied transform, which is a\n * local transform that can be applied to compute the world transform. The local transform and applied transform may differ if a\n * constraint or application code modifies the world transform after it was computed from the local transform. */\nexport class Bone {\n    /** @param parent May be null. */\n    constructor(data, skeleton, parent) {\n        /** The immediate children of this bone. */\n        this.children = new Array();\n        /** The local x translation. */\n        this.x = 0;\n        /** The local y translation. */\n        this.y = 0;\n        /** The local rotation in degrees, counter clockwise. */\n        this.rotation = 0;\n        /** The local scaleX. */\n        this.scaleX = 0;\n        /** The local scaleY. */\n        this.scaleY = 0;\n        /** The local shearX. */\n        this.shearX = 0;\n        /** The local shearY. */\n        this.shearY = 0;\n        /** The applied local x translation. */\n        this.ax = 0;\n        /** The applied local y translation. */\n        this.ay = 0;\n        /** The applied local rotation in degrees, counter clockwise. */\n        this.arotation = 0;\n        /** The applied local scaleX. */\n        this.ascaleX = 0;\n        /** The applied local scaleY. */\n        this.ascaleY = 0;\n        /** The applied local shearX. */\n        this.ashearX = 0;\n        /** The applied local shearY. */\n        this.ashearY = 0;\n        /** Part of the world transform matrix for the X axis. If changed, {@link #updateAppliedTransform()} should be called. */\n        this.a = 0;\n        /** Part of the world transform matrix for the Y axis. If changed, {@link #updateAppliedTransform()} should be called. */\n        this.b = 0;\n        /** Part of the world transform matrix for the X axis. If changed, {@link #updateAppliedTransform()} should be called. */\n        this.c = 0;\n        /** Part of the world transform matrix for the Y axis. If changed, {@link #updateAppliedTransform()} should be called. */\n        this.d = 0;\n        /** The world X position. If changed, {@link #updateAppliedTransform()} should be called. */\n        this.worldY = 0;\n        /** The world Y position. If changed, {@link #updateAppliedTransform()} should be called. */\n        this.worldX = 0;\n        this.sorted = false;\n        this.active = false;\n        if (!data)\n            throw new Error(\"data cannot be null.\");\n        if (!skeleton)\n            throw new Error(\"skeleton cannot be null.\");\n        this.data = data;\n        this.skeleton = skeleton;\n        this.parent = parent;\n        this.setToSetupPose();\n    }\n    /** Returns false when the bone has not been computed because {@link BoneData#skinRequired} is true and the\n      * {@link Skeleton#skin active skin} does not {@link Skin#bones contain} this bone. */\n    isActive() {\n        return this.active;\n    }\n    /** Computes the world transform using the parent bone and this bone's local applied transform. */\n    update() {\n        this.updateWorldTransformWith(this.ax, this.ay, this.arotation, this.ascaleX, this.ascaleY, this.ashearX, this.ashearY);\n    }\n    /** Computes the world transform using the parent bone and this bone's local transform.\n     *\n     * See {@link #updateWorldTransformWith()}. */\n    updateWorldTransform() {\n        this.updateWorldTransformWith(this.x, this.y, this.rotation, this.scaleX, this.scaleY, this.shearX, this.shearY);\n    }\n    /** Computes the world transform using the parent bone and the specified local transform. The applied transform is set to the\n     * specified local transform. Child bones are not updated.\n     *\n     * See [World transforms](http://esotericsoftware.com/spine-runtime-skeletons#World-transforms) in the Spine\n     * Runtimes Guide. */\n    updateWorldTransformWith(x, y, rotation, scaleX, scaleY, shearX, shearY) {\n        this.ax = x;\n        this.ay = y;\n        this.arotation = rotation;\n        this.ascaleX = scaleX;\n        this.ascaleY = scaleY;\n        this.ashearX = shearX;\n        this.ashearY = shearY;\n        let parent = this.parent;\n        if (!parent) { // Root bone.\n            let skeleton = this.skeleton;\n            let rotationY = rotation + 90 + shearY;\n            let sx = skeleton.scaleX;\n            let sy = skeleton.scaleY;\n            this.a = MathUtils.cosDeg(rotation + shearX) * scaleX * sx;\n            this.b = MathUtils.cosDeg(rotationY) * scaleY * sx;\n            this.c = MathUtils.sinDeg(rotation + shearX) * scaleX * sy;\n            this.d = MathUtils.sinDeg(rotationY) * scaleY * sy;\n            this.worldX = x * sx + skeleton.x;\n            this.worldY = y * sy + skeleton.y;\n            return;\n        }\n        let pa = parent.a, pb = parent.b, pc = parent.c, pd = parent.d;\n        this.worldX = pa * x + pb * y + parent.worldX;\n        this.worldY = pc * x + pd * y + parent.worldY;\n        switch (this.data.transformMode) {\n            case TransformMode.Normal: {\n                let rotationY = rotation + 90 + shearY;\n                let la = MathUtils.cosDeg(rotation + shearX) * scaleX;\n                let lb = MathUtils.cosDeg(rotationY) * scaleY;\n                let lc = MathUtils.sinDeg(rotation + shearX) * scaleX;\n                let ld = MathUtils.sinDeg(rotationY) * scaleY;\n                this.a = pa * la + pb * lc;\n                this.b = pa * lb + pb * ld;\n                this.c = pc * la + pd * lc;\n                this.d = pc * lb + pd * ld;\n                return;\n            }\n            case TransformMode.OnlyTranslation: {\n                let rotationY = rotation + 90 + shearY;\n                this.a = MathUtils.cosDeg(rotation + shearX) * scaleX;\n                this.b = MathUtils.cosDeg(rotationY) * scaleY;\n                this.c = MathUtils.sinDeg(rotation + shearX) * scaleX;\n                this.d = MathUtils.sinDeg(rotationY) * scaleY;\n                break;\n            }\n            case TransformMode.NoRotationOrReflection: {\n                let s = pa * pa + pc * pc;\n                let prx = 0;\n                if (s > 0.0001) {\n                    s = Math.abs(pa * pd - pb * pc) / s;\n                    pa /= this.skeleton.scaleX;\n                    pc /= this.skeleton.scaleY;\n                    pb = pc * s;\n                    pd = pa * s;\n                    prx = Math.atan2(pc, pa) * MathUtils.radDeg;\n                }\n                else {\n                    pa = 0;\n                    pc = 0;\n                    prx = 90 - Math.atan2(pd, pb) * MathUtils.radDeg;\n                }\n                let rx = rotation + shearX - prx;\n                let ry = rotation + shearY - prx + 90;\n                let la = MathUtils.cosDeg(rx) * scaleX;\n                let lb = MathUtils.cosDeg(ry) * scaleY;\n                let lc = MathUtils.sinDeg(rx) * scaleX;\n                let ld = MathUtils.sinDeg(ry) * scaleY;\n                this.a = pa * la - pb * lc;\n                this.b = pa * lb - pb * ld;\n                this.c = pc * la + pd * lc;\n                this.d = pc * lb + pd * ld;\n                break;\n            }\n            case TransformMode.NoScale:\n            case TransformMode.NoScaleOrReflection: {\n                let cos = MathUtils.cosDeg(rotation);\n                let sin = MathUtils.sinDeg(rotation);\n                let za = (pa * cos + pb * sin) / this.skeleton.scaleX;\n                let zc = (pc * cos + pd * sin) / this.skeleton.scaleY;\n                let s = Math.sqrt(za * za + zc * zc);\n                if (s > 0.00001)\n                    s = 1 / s;\n                za *= s;\n                zc *= s;\n                s = Math.sqrt(za * za + zc * zc);\n                if (this.data.transformMode == TransformMode.NoScale\n                    && (pa * pd - pb * pc < 0) != (this.skeleton.scaleX < 0 != this.skeleton.scaleY < 0))\n                    s = -s;\n                let r = Math.PI / 2 + Math.atan2(zc, za);\n                let zb = Math.cos(r) * s;\n                let zd = Math.sin(r) * s;\n                let la = MathUtils.cosDeg(shearX) * scaleX;\n                let lb = MathUtils.cosDeg(90 + shearY) * scaleY;\n                let lc = MathUtils.sinDeg(shearX) * scaleX;\n                let ld = MathUtils.sinDeg(90 + shearY) * scaleY;\n                this.a = za * la + zb * lc;\n                this.b = za * lb + zb * ld;\n                this.c = zc * la + zd * lc;\n                this.d = zc * lb + zd * ld;\n                break;\n            }\n        }\n        this.a *= this.skeleton.scaleX;\n        this.b *= this.skeleton.scaleX;\n        this.c *= this.skeleton.scaleY;\n        this.d *= this.skeleton.scaleY;\n    }\n    /** Sets this bone's local transform to the setup pose. */\n    setToSetupPose() {\n        let data = this.data;\n        this.x = data.x;\n        this.y = data.y;\n        this.rotation = data.rotation;\n        this.scaleX = data.scaleX;\n        this.scaleY = data.scaleY;\n        this.shearX = data.shearX;\n        this.shearY = data.shearY;\n    }\n    /** The world rotation for the X axis, calculated using {@link #a} and {@link #c}. */\n    getWorldRotationX() {\n        return Math.atan2(this.c, this.a) * MathUtils.radDeg;\n    }\n    /** The world rotation for the Y axis, calculated using {@link #b} and {@link #d}. */\n    getWorldRotationY() {\n        return Math.atan2(this.d, this.b) * MathUtils.radDeg;\n    }\n    /** The magnitude (always positive) of the world scale X, calculated using {@link #a} and {@link #c}. */\n    getWorldScaleX() {\n        return Math.sqrt(this.a * this.a + this.c * this.c);\n    }\n    /** The magnitude (always positive) of the world scale Y, calculated using {@link #b} and {@link #d}. */\n    getWorldScaleY() {\n        return Math.sqrt(this.b * this.b + this.d * this.d);\n    }\n    /** Computes the applied transform values from the world transform.\n     *\n     * If the world transform is modified (by a constraint, {@link #rotateWorld(float)}, etc) then this method should be called so\n     * the applied transform matches the world transform. The applied transform may be needed by other code (eg to apply other\n     * constraints).\n     *\n     * Some information is ambiguous in the world transform, such as -1,-1 scale versus 180 rotation. The applied transform after\n     * calling this method is equivalent to the local transform used to compute the world transform, but may not be identical. */\n    updateAppliedTransform() {\n        let parent = this.parent;\n        if (!parent) {\n            this.ax = this.worldX - this.skeleton.x;\n            this.ay = this.worldY - this.skeleton.y;\n            this.arotation = Math.atan2(this.c, this.a) * MathUtils.radDeg;\n            this.ascaleX = Math.sqrt(this.a * this.a + this.c * this.c);\n            this.ascaleY = Math.sqrt(this.b * this.b + this.d * this.d);\n            this.ashearX = 0;\n            this.ashearY = Math.atan2(this.a * this.b + this.c * this.d, this.a * this.d - this.b * this.c) * MathUtils.radDeg;\n            return;\n        }\n        let pa = parent.a, pb = parent.b, pc = parent.c, pd = parent.d;\n        let pid = 1 / (pa * pd - pb * pc);\n        let dx = this.worldX - parent.worldX, dy = this.worldY - parent.worldY;\n        this.ax = (dx * pd * pid - dy * pb * pid);\n        this.ay = (dy * pa * pid - dx * pc * pid);\n        let ia = pid * pd;\n        let id = pid * pa;\n        let ib = pid * pb;\n        let ic = pid * pc;\n        let ra = ia * this.a - ib * this.c;\n        let rb = ia * this.b - ib * this.d;\n        let rc = id * this.c - ic * this.a;\n        let rd = id * this.d - ic * this.b;\n        this.ashearX = 0;\n        this.ascaleX = Math.sqrt(ra * ra + rc * rc);\n        if (this.ascaleX > 0.0001) {\n            let det = ra * rd - rb * rc;\n            this.ascaleY = det / this.ascaleX;\n            this.ashearY = Math.atan2(ra * rb + rc * rd, det) * MathUtils.radDeg;\n            this.arotation = Math.atan2(rc, ra) * MathUtils.radDeg;\n        }\n        else {\n            this.ascaleX = 0;\n            this.ascaleY = Math.sqrt(rb * rb + rd * rd);\n            this.ashearY = 0;\n            this.arotation = 90 - Math.atan2(rd, rb) * MathUtils.radDeg;\n        }\n    }\n    /** Transforms a point from world coordinates to the bone's local coordinates. */\n    worldToLocal(world) {\n        let invDet = 1 / (this.a * this.d - this.b * this.c);\n        let x = world.x - this.worldX, y = world.y - this.worldY;\n        world.x = x * this.d * invDet - y * this.b * invDet;\n        world.y = y * this.a * invDet - x * this.c * invDet;\n        return world;\n    }\n    /** Transforms a point from the bone's local coordinates to world coordinates. */\n    localToWorld(local) {\n        let x = local.x, y = local.y;\n        local.x = x * this.a + y * this.b + this.worldX;\n        local.y = x * this.c + y * this.d + this.worldY;\n        return local;\n    }\n    /** Transforms a world rotation to a local rotation. */\n    worldToLocalRotation(worldRotation) {\n        let sin = MathUtils.sinDeg(worldRotation), cos = MathUtils.cosDeg(worldRotation);\n        return Math.atan2(this.a * sin - this.c * cos, this.d * cos - this.b * sin) * MathUtils.radDeg + this.rotation - this.shearX;\n    }\n    /** Transforms a local rotation to a world rotation. */\n    localToWorldRotation(localRotation) {\n        localRotation -= this.rotation - this.shearX;\n        let sin = MathUtils.sinDeg(localRotation), cos = MathUtils.cosDeg(localRotation);\n        return Math.atan2(cos * this.c + sin * this.d, cos * this.a + sin * this.b) * MathUtils.radDeg;\n    }\n    /** Rotates the world transform the specified amount.\n     * <p>\n     * After changes are made to the world transform, {@link #updateAppliedTransform()} should be called and {@link #update()} will\n     * need to be called on any child bones, recursively. */\n    rotateWorld(degrees) {\n        let a = this.a, b = this.b, c = this.c, d = this.d;\n        let cos = MathUtils.cosDeg(degrees), sin = MathUtils.sinDeg(degrees);\n        this.a = cos * a - sin * c;\n        this.b = cos * b - sin * d;\n        this.c = sin * a + cos * c;\n        this.d = sin * b + cos * d;\n    }\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\n/** The base class for all constraint datas. */\nexport class ConstraintData {\n    constructor(name, order, skinRequired) {\n        this.name = name;\n        this.order = order;\n        this.skinRequired = skinRequired;\n    }\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { TextureAtlas } from \"./TextureAtlas\";\nexport class AssetManagerBase {\n    constructor(onLoad, textureLoader, pathPrefix = \"\", downloader = null) {\n        this.assets = {};\n        this.errors = {};\n        this.toLoad = 0;\n        this.loaded = 0;\n        this.onLoad = onLoad;\n        this.textureLoader = textureLoader;\n        this.pathPrefix = pathPrefix;\n        this.downloader = downloader || new Downloader();\n    }\n    start(path) {\n        this.toLoad++;\n        return this.pathPrefix + path;\n    }\n    success(callback, path, asset) {\n        this.toLoad--;\n        this.loaded++;\n        this.assets[path] = asset;\n        if (callback)\n            callback(path, asset);\n        if (this.toLoad < 1) {\n            this.onLoad();\n        }\n    }\n    error(callback, path, message) {\n        this.toLoad--;\n        this.loaded++;\n        this.errors[path] = message;\n        if (callback)\n            callback(path, message);\n    }\n    setRawDataURI(path, data) {\n        this.downloader.rawDataUris[this.pathPrefix + path] = data;\n    }\n    loadBinary(path, success = null, error = null) {\n        path = this.start(path);\n        this.downloader.downloadBinary(path, (data) => {\n            this.success(success, path, data);\n        }, (status, responseText) => {\n            this.error(error, path, `Couldn't load binary ${path}: status ${status}, ${responseText}`);\n        });\n    }\n    loadText(path, success = null, error = null) {\n        path = this.start(path);\n        this.downloader.downloadText(path, (data) => {\n            this.success(success, path, data);\n        }, (status, responseText) => {\n            this.error(error, path, `Couldn't load text ${path}: status ${status}, ${responseText}`);\n        });\n    }\n    loadJson(path, success = null, error = null) {\n        path = this.start(path);\n        this.downloader.downloadJson(path, (data) => {\n            this.success(success, path, data);\n        }, (status, responseText) => {\n            this.error(error, path, `Couldn't load JSON ${path}: status ${status}, ${responseText}`);\n        });\n    }\n    loadTexture(path, success = null, error = null) {\n        path = this.start(path);\n        let isBrowser = !!(typeof window !== 'undefined' && typeof navigator !== 'undefined' && window.document);\n        let isWebWorker = !isBrowser; // && typeof importScripts !== 'undefined';\n        if (isWebWorker) {\n            fetch(path, { mode: \"cors\" }).then((response) => {\n                if (response.ok)\n                    return response.blob();\n                this.error(error, path, `Couldn't load image: ${path}`);\n                return null;\n            }).then((blob) => {\n                return blob ? createImageBitmap(blob, { premultiplyAlpha: \"none\", colorSpaceConversion: \"none\" }) : null;\n            }).then((bitmap) => {\n                if (bitmap)\n                    this.success(success, path, this.textureLoader(bitmap));\n            });\n        }\n        else {\n            let image = new Image();\n            image.crossOrigin = \"anonymous\";\n            image.onload = () => {\n                this.success(success, path, this.textureLoader(image));\n            };\n            image.onerror = () => {\n                this.error(error, path, `Couldn't load image: ${path}`);\n            };\n            if (this.downloader.rawDataUris[path])\n                path = this.downloader.rawDataUris[path];\n            image.src = path;\n        }\n    }\n    loadTextureAtlas(path, success = null, error = null) {\n        let index = path.lastIndexOf(\"/\");\n        let parent = index >= 0 ? path.substring(0, index + 1) : \"\";\n        path = this.start(path);\n        this.downloader.downloadText(path, (atlasText) => {\n            try {\n                let atlas = new TextureAtlas(atlasText);\n                let toLoad = atlas.pages.length, abort = false;\n                for (let page of atlas.pages) {\n                    this.loadTexture(parent + page.name, (imagePath, texture) => {\n                        if (!abort) {\n                            page.setTexture(texture);\n                            if (--toLoad == 0)\n                                this.success(success, path, atlas);\n                        }\n                    }, (imagePath, message) => {\n                        if (!abort)\n                            this.error(error, path, `Couldn't load texture atlas ${path} page image: ${imagePath}`);\n                        abort = true;\n                    });\n                }\n            }\n            catch (e) {\n                this.error(error, path, `Couldn't parse texture atlas ${path}: ${e.message}`);\n            }\n        }, (status, responseText) => {\n            this.error(error, path, `Couldn't load texture atlas ${path}: status ${status}, ${responseText}`);\n        });\n    }\n    get(path) {\n        return this.assets[this.pathPrefix + path];\n    }\n    require(path) {\n        path = this.pathPrefix + path;\n        let asset = this.assets[path];\n        if (asset)\n            return asset;\n        let error = this.errors[path];\n        throw Error(\"Asset not found: \" + path + (error ? \"\\n\" + error : \"\"));\n    }\n    remove(path) {\n        path = this.pathPrefix + path;\n        let asset = this.assets[path];\n        if (asset.dispose)\n            asset.dispose();\n        delete this.assets[path];\n        return asset;\n    }\n    removeAll() {\n        for (let key in this.assets) {\n            let asset = this.assets[key];\n            if (asset.dispose)\n                asset.dispose();\n        }\n        this.assets = {};\n    }\n    isLoadingComplete() {\n        return this.toLoad == 0;\n    }\n    getToLoad() {\n        return this.toLoad;\n    }\n    getLoaded() {\n        return this.loaded;\n    }\n    dispose() {\n        this.removeAll();\n    }\n    hasErrors() {\n        return Object.keys(this.errors).length > 0;\n    }\n    getErrors() {\n        return this.errors;\n    }\n}\nexport class Downloader {\n    constructor() {\n        this.callbacks = {};\n        this.rawDataUris = {};\n    }\n    dataUriToString(dataUri) {\n        if (!dataUri.startsWith(\"data:\")) {\n            throw new Error(\"Not a data URI.\");\n        }\n        let base64Idx = dataUri.indexOf(\"base64,\");\n        if (base64Idx != -1) {\n            base64Idx += \"base64,\".length;\n            return atob(dataUri.substr(base64Idx));\n        }\n        else {\n            return dataUri.substr(dataUri.indexOf(\",\") + 1);\n        }\n    }\n    base64ToUint8Array(base64) {\n        var binary_string = window.atob(base64);\n        var len = binary_string.length;\n        var bytes = new Uint8Array(len);\n        for (var i = 0; i < len; i++) {\n            bytes[i] = binary_string.charCodeAt(i);\n        }\n        return bytes;\n    }\n    dataUriToUint8Array(dataUri) {\n        if (!dataUri.startsWith(\"data:\")) {\n            throw new Error(\"Not a data URI.\");\n        }\n        let base64Idx = dataUri.indexOf(\"base64,\");\n        if (base64Idx == -1)\n            throw new Error(\"Not a binary data URI.\");\n        base64Idx += \"base64,\".length;\n        return this.base64ToUint8Array(dataUri.substr(base64Idx));\n    }\n    downloadText(url, success, error) {\n        if (this.start(url, success, error))\n            return;\n        if (this.rawDataUris[url]) {\n            try {\n                let dataUri = this.rawDataUris[url];\n                this.finish(url, 200, this.dataUriToString(dataUri));\n            }\n            catch (e) {\n                this.finish(url, 400, JSON.stringify(e));\n            }\n            return;\n        }\n        let request = new XMLHttpRequest();\n        request.overrideMimeType(\"text/html\");\n        request.open(\"GET\", url, true);\n        let done = () => {\n            this.finish(url, request.status, request.responseText);\n        };\n        request.onload = done;\n        request.onerror = done;\n        request.send();\n    }\n    downloadJson(url, success, error) {\n        this.downloadText(url, (data) => {\n            success(JSON.parse(data));\n        }, error);\n    }\n    downloadBinary(url, success, error) {\n        if (this.start(url, success, error))\n            return;\n        if (this.rawDataUris[url]) {\n            try {\n                let dataUri = this.rawDataUris[url];\n                this.finish(url, 200, this.dataUriToUint8Array(dataUri));\n            }\n            catch (e) {\n                this.finish(url, 400, JSON.stringify(e));\n            }\n            return;\n        }\n        let request = new XMLHttpRequest();\n        request.open(\"GET\", url, true);\n        request.responseType = \"arraybuffer\";\n        let onerror = () => {\n            this.finish(url, request.status, request.response);\n        };\n        request.onload = () => {\n            if (request.status == 200)\n                this.finish(url, 200, new Uint8Array(request.response));\n            else\n                onerror();\n        };\n        request.onerror = onerror;\n        request.send();\n    }\n    start(url, success, error) {\n        let callbacks = this.callbacks[url];\n        try {\n            if (callbacks)\n                return true;\n            this.callbacks[url] = callbacks = [];\n        }\n        finally {\n            callbacks.push(success, error);\n        }\n    }\n    finish(url, status, data) {\n        let callbacks = this.callbacks[url];\n        delete this.callbacks[url];\n        let args = status == 200 ? [data] : [status, data];\n        for (let i = args.length - 1, n = callbacks.length; i < n; i += 2)\n            callbacks[i].apply(null, args);\n    }\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\n/** Stores the current pose values for an {@link Event}.\n *\n * See Timeline {@link Timeline#apply()},\n * AnimationStateListener {@link AnimationStateListener#event()}, and\n * [Events](http://esotericsoftware.com/spine-events) in the Spine User Guide. */\nexport class Event {\n    constructor(time, data) {\n        if (!data)\n            throw new Error(\"data cannot be null.\");\n        this.time = time;\n        this.data = data;\n    }\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\n/** Stores the setup pose values for an {@link Event}.\n *\n * See [Events](http://esotericsoftware.com/spine-events) in the Spine User Guide. */\nexport class EventData {\n    constructor(name) {\n        this.name = name;\n    }\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { TransformMode } from \"./BoneData\";\nimport { MathUtils } from \"./Utils\";\n/** Stores the current pose for an IK constraint. An IK constraint adjusts the rotation of 1 or 2 constrained bones so the tip of\n * the last bone is as close to the target bone as possible.\n *\n * See [IK constraints](http://esotericsoftware.com/spine-ik-constraints) in the Spine User Guide. */\nexport class IkConstraint {\n    constructor(data, skeleton) {\n        /** Controls the bend direction of the IK bones, either 1 or -1. */\n        this.bendDirection = 0;\n        /** When true and only a single bone is being constrained, if the target is too close, the bone is scaled to reach it. */\n        this.compress = false;\n        /** When true, if the target is out of range, the parent bone is scaled to reach it. If more than one bone is being constrained\n         * and the parent bone has local nonuniform scale, stretch is not applied. */\n        this.stretch = false;\n        /** A percentage (0-1) that controls the mix between the constrained and unconstrained rotations. */\n        this.mix = 1;\n        /** For two bone IK, the distance from the maximum reach of the bones that rotation will slow. */\n        this.softness = 0;\n        this.active = false;\n        if (!data)\n            throw new Error(\"data cannot be null.\");\n        if (!skeleton)\n            throw new Error(\"skeleton cannot be null.\");\n        this.data = data;\n        this.mix = data.mix;\n        this.softness = data.softness;\n        this.bendDirection = data.bendDirection;\n        this.compress = data.compress;\n        this.stretch = data.stretch;\n        this.bones = new Array();\n        for (let i = 0; i < data.bones.length; i++)\n            this.bones.push(skeleton.findBone(data.bones[i].name));\n        this.target = skeleton.findBone(data.target.name);\n    }\n    isActive() {\n        return this.active;\n    }\n    update() {\n        if (this.mix == 0)\n            return;\n        let target = this.target;\n        let bones = this.bones;\n        switch (bones.length) {\n            case 1:\n                this.apply1(bones[0], target.worldX, target.worldY, this.compress, this.stretch, this.data.uniform, this.mix);\n                break;\n            case 2:\n                this.apply2(bones[0], bones[1], target.worldX, target.worldY, this.bendDirection, this.stretch, this.data.uniform, this.softness, this.mix);\n                break;\n        }\n    }\n    /** Applies 1 bone IK. The target is specified in the world coordinate system. */\n    apply1(bone, targetX, targetY, compress, stretch, uniform, alpha) {\n        let p = bone.parent;\n        let pa = p.a, pb = p.b, pc = p.c, pd = p.d;\n        let rotationIK = -bone.ashearX - bone.arotation, tx = 0, ty = 0;\n        switch (bone.data.transformMode) {\n            case TransformMode.OnlyTranslation:\n                tx = targetX - bone.worldX;\n                ty = targetY - bone.worldY;\n                break;\n            case TransformMode.NoRotationOrReflection:\n                let s = Math.abs(pa * pd - pb * pc) / (pa * pa + pc * pc);\n                let sa = pa / bone.skeleton.scaleX;\n                let sc = pc / bone.skeleton.scaleY;\n                pb = -sc * s * bone.skeleton.scaleX;\n                pd = sa * s * bone.skeleton.scaleY;\n                rotationIK += Math.atan2(sc, sa) * MathUtils.radDeg;\n            // Fall through\n            default:\n                let x = targetX - p.worldX, y = targetY - p.worldY;\n                let d = pa * pd - pb * pc;\n                tx = (x * pd - y * pb) / d - bone.ax;\n                ty = (y * pa - x * pc) / d - bone.ay;\n        }\n        rotationIK += Math.atan2(ty, tx) * MathUtils.radDeg;\n        if (bone.ascaleX < 0)\n            rotationIK += 180;\n        if (rotationIK > 180)\n            rotationIK -= 360;\n        else if (rotationIK < -180)\n            rotationIK += 360;\n        let sx = bone.ascaleX, sy = bone.ascaleY;\n        if (compress || stretch) {\n            switch (bone.data.transformMode) {\n                case TransformMode.NoScale:\n                case TransformMode.NoScaleOrReflection:\n                    tx = targetX - bone.worldX;\n                    ty = targetY - bone.worldY;\n            }\n            let b = bone.data.length * sx, dd = Math.sqrt(tx * tx + ty * ty);\n            if ((compress && dd < b) || (stretch && dd > b) && b > 0.0001) {\n                let s = (dd / b - 1) * alpha + 1;\n                sx *= s;\n                if (uniform)\n                    sy *= s;\n            }\n        }\n        bone.updateWorldTransformWith(bone.ax, bone.ay, bone.arotation + rotationIK * alpha, sx, sy, bone.ashearX, bone.ashearY);\n    }\n    /** Applies 2 bone IK. The target is specified in the world coordinate system.\n     * @param child A direct descendant of the parent bone. */\n    apply2(parent, child, targetX, targetY, bendDir, stretch, uniform, softness, alpha) {\n        let px = parent.ax, py = parent.ay, psx = parent.ascaleX, psy = parent.ascaleY, sx = psx, sy = psy, csx = child.ascaleX;\n        let os1 = 0, os2 = 0, s2 = 0;\n        if (psx < 0) {\n            psx = -psx;\n            os1 = 180;\n            s2 = -1;\n        }\n        else {\n            os1 = 0;\n            s2 = 1;\n        }\n        if (psy < 0) {\n            psy = -psy;\n            s2 = -s2;\n        }\n        if (csx < 0) {\n            csx = -csx;\n            os2 = 180;\n        }\n        else\n            os2 = 0;\n        let cx = child.ax, cy = 0, cwx = 0, cwy = 0, a = parent.a, b = parent.b, c = parent.c, d = parent.d;\n        let u = Math.abs(psx - psy) <= 0.0001;\n        if (!u || stretch) {\n            cy = 0;\n            cwx = a * cx + parent.worldX;\n            cwy = c * cx + parent.worldY;\n        }\n        else {\n            cy = child.ay;\n            cwx = a * cx + b * cy + parent.worldX;\n            cwy = c * cx + d * cy + parent.worldY;\n        }\n        let pp = parent.parent;\n        a = pp.a;\n        b = pp.b;\n        c = pp.c;\n        d = pp.d;\n        let id = 1 / (a * d - b * c), x = cwx - pp.worldX, y = cwy - pp.worldY;\n        let dx = (x * d - y * b) * id - px, dy = (y * a - x * c) * id - py;\n        let l1 = Math.sqrt(dx * dx + dy * dy), l2 = child.data.length * csx, a1, a2;\n        if (l1 < 0.0001) {\n            this.apply1(parent, targetX, targetY, false, stretch, false, alpha);\n            child.updateWorldTransformWith(cx, cy, 0, child.ascaleX, child.ascaleY, child.ashearX, child.ashearY);\n            return;\n        }\n        x = targetX - pp.worldX;\n        y = targetY - pp.worldY;\n        let tx = (x * d - y * b) * id - px, ty = (y * a - x * c) * id - py;\n        let dd = tx * tx + ty * ty;\n        if (softness != 0) {\n            softness *= psx * (csx + 1) * 0.5;\n            let td = Math.sqrt(dd), sd = td - l1 - l2 * psx + softness;\n            if (sd > 0) {\n                let p = Math.min(1, sd / (softness * 2)) - 1;\n                p = (sd - softness * (1 - p * p)) / td;\n                tx -= p * tx;\n                ty -= p * ty;\n                dd = tx * tx + ty * ty;\n            }\n        }\n        outer: if (u) {\n            l2 *= psx;\n            let cos = (dd - l1 * l1 - l2 * l2) / (2 * l1 * l2);\n            if (cos < -1) {\n                cos = -1;\n                a2 = Math.PI * bendDir;\n            }\n            else if (cos > 1) {\n                cos = 1;\n                a2 = 0;\n                if (stretch) {\n                    a = (Math.sqrt(dd) / (l1 + l2) - 1) * alpha + 1;\n                    sx *= a;\n                    if (uniform)\n                        sy *= a;\n                }\n            }\n            else\n                a2 = Math.acos(cos) * bendDir;\n            a = l1 + l2 * cos;\n            b = l2 * Math.sin(a2);\n            a1 = Math.atan2(ty * a - tx * b, tx * a + ty * b);\n        }\n        else {\n            a = psx * l2;\n            b = psy * l2;\n            let aa = a * a, bb = b * b, ta = Math.atan2(ty, tx);\n            c = bb * l1 * l1 + aa * dd - aa * bb;\n            let c1 = -2 * bb * l1, c2 = bb - aa;\n            d = c1 * c1 - 4 * c2 * c;\n            if (d >= 0) {\n                let q = Math.sqrt(d);\n                if (c1 < 0)\n                    q = -q;\n                q = -(c1 + q) * 0.5;\n                let r0 = q / c2, r1 = c / q;\n                let r = Math.abs(r0) < Math.abs(r1) ? r0 : r1;\n                if (r * r <= dd) {\n                    y = Math.sqrt(dd - r * r) * bendDir;\n                    a1 = ta - Math.atan2(y, r);\n                    a2 = Math.atan2(y / psy, (r - l1) / psx);\n                    break outer;\n                }\n            }\n            let minAngle = MathUtils.PI, minX = l1 - a, minDist = minX * minX, minY = 0;\n            let maxAngle = 0, maxX = l1 + a, maxDist = maxX * maxX, maxY = 0;\n            c = -a * l1 / (aa - bb);\n            if (c >= -1 && c <= 1) {\n                c = Math.acos(c);\n                x = a * Math.cos(c) + l1;\n                y = b * Math.sin(c);\n                d = x * x + y * y;\n                if (d < minDist) {\n                    minAngle = c;\n                    minDist = d;\n                    minX = x;\n                    minY = y;\n                }\n                if (d > maxDist) {\n                    maxAngle = c;\n                    maxDist = d;\n                    maxX = x;\n                    maxY = y;\n                }\n            }\n            if (dd <= (minDist + maxDist) * 0.5) {\n                a1 = ta - Math.atan2(minY * bendDir, minX);\n                a2 = minAngle * bendDir;\n            }\n            else {\n                a1 = ta - Math.atan2(maxY * bendDir, maxX);\n                a2 = maxAngle * bendDir;\n            }\n        }\n        let os = Math.atan2(cy, cx) * s2;\n        let rotation = parent.arotation;\n        a1 = (a1 - os) * MathUtils.radDeg + os1 - rotation;\n        if (a1 > 180)\n            a1 -= 360;\n        else if (a1 < -180) //\n            a1 += 360;\n        parent.updateWorldTransformWith(px, py, rotation + a1 * alpha, sx, sy, 0, 0);\n        rotation = child.arotation;\n        a2 = ((a2 + os) * MathUtils.radDeg - child.ashearX) * s2 + os2 - rotation;\n        if (a2 > 180)\n            a2 -= 360;\n        else if (a2 < -180) //\n            a2 += 360;\n        child.updateWorldTransformWith(cx, cy, rotation + a2 * alpha, child.ascaleX, child.ascaleY, child.ashearX, child.ashearY);\n    }\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { ConstraintData } from \"./ConstraintData\";\n/** Stores the setup pose for an {@link IkConstraint}.\n * <p>\n * See [IK constraints](http://esotericsoftware.com/spine-ik-constraints) in the Spine User Guide. */\nexport class IkConstraintData extends ConstraintData {\n    constructor(name) {\n        super(name, 0, false);\n        /** The bones that are constrained by this IK constraint. */\n        this.bones = new Array();\n        /** Controls the bend direction of the IK bones, either 1 or -1. */\n        this.bendDirection = 1;\n        /** When true and only a single bone is being constrained, if the target is too close, the bone is scaled to reach it. */\n        this.compress = false;\n        /** When true, if the target is out of range, the parent bone is scaled to reach it. If more than one bone is being constrained\n         * and the parent bone has local nonuniform scale, stretch is not applied. */\n        this.stretch = false;\n        /** When true, only a single bone is being constrained, and {@link #getCompress()} or {@link #getStretch()} is used, the bone\n         * is scaled on both the X and Y axes. */\n        this.uniform = false;\n        /** A percentage (0-1) that controls the mix between the constrained and unconstrained rotations. */\n        this.mix = 1;\n        /** For two bone IK, the distance from the maximum reach of the bones that rotation will slow. */\n        this.softness = 0;\n    }\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { ConstraintData } from \"./ConstraintData\";\n/** Stores the setup pose for a {@link PathConstraint}.\n *\n * See [path constraints](http://esotericsoftware.com/spine-path-constraints) in the Spine User Guide. */\nexport class PathConstraintData extends ConstraintData {\n    constructor(name) {\n        super(name, 0, false);\n        /** The bones that will be modified by this path constraint. */\n        this.bones = new Array();\n        this.mixRotate = 0;\n        this.mixX = 0;\n        this.mixY = 0;\n    }\n}\n/** Controls how the first bone is positioned along the path.\n *\n * See [position](http://esotericsoftware.com/spine-path-constraints#Position) in the Spine User Guide. */\nexport var PositionMode;\n(function (PositionMode) {\n    PositionMode[PositionMode[\"Fixed\"] = 0] = \"Fixed\";\n    PositionMode[PositionMode[\"Percent\"] = 1] = \"Percent\";\n})(PositionMode || (PositionMode = {}));\n/** Controls how bones after the first bone are positioned along the path.\n *\n * See [spacing](http://esotericsoftware.com/spine-path-constraints#Spacing) in the Spine User Guide. */\nexport var SpacingMode;\n(function (SpacingMode) {\n    SpacingMode[SpacingMode[\"Length\"] = 0] = \"Length\";\n    SpacingMode[SpacingMode[\"Fixed\"] = 1] = \"Fixed\";\n    SpacingMode[SpacingMode[\"Percent\"] = 2] = \"Percent\";\n    SpacingMode[SpacingMode[\"Proportional\"] = 3] = \"Proportional\";\n})(SpacingMode || (SpacingMode = {}));\n/** Controls how bones are rotated, translated, and scaled to match the path.\n *\n * See [rotate mix](http://esotericsoftware.com/spine-path-constraints#Rotate-mix) in the Spine User Guide. */\nexport var RotateMode;\n(function (RotateMode) {\n    RotateMode[RotateMode[\"Tangent\"] = 0] = \"Tangent\";\n    RotateMode[RotateMode[\"Chain\"] = 1] = \"Chain\";\n    RotateMode[RotateMode[\"ChainScale\"] = 2] = \"ChainScale\";\n})(RotateMode || (RotateMode = {}));","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { PathAttachment } from \"./attachments/PathAttachment\";\nimport { RotateMode, SpacingMode, PositionMode } from \"./PathConstraintData\";\nimport { Utils, MathUtils } from \"./Utils\";\n/** Stores the current pose for a path constraint. A path constraint adjusts the rotation, translation, and scale of the\n * constrained bones so they follow a {@link PathAttachment}.\n *\n * See [Path constraints](http://esotericsoftware.com/spine-path-constraints) in the Spine User Guide. */\nexport class PathConstraint {\n    constructor(data, skeleton) {\n        /** The position along the path. */\n        this.position = 0;\n        /** The spacing between bones. */\n        this.spacing = 0;\n        this.mixRotate = 0;\n        this.mixX = 0;\n        this.mixY = 0;\n        this.spaces = new Array();\n        this.positions = new Array();\n        this.world = new Array();\n        this.curves = new Array();\n        this.lengths = new Array();\n        this.segments = new Array();\n        this.active = false;\n        if (!data)\n            throw new Error(\"data cannot be null.\");\n        if (!skeleton)\n            throw new Error(\"skeleton cannot be null.\");\n        this.data = data;\n        this.bones = new Array();\n        for (let i = 0, n = data.bones.length; i < n; i++)\n            this.bones.push(skeleton.findBone(data.bones[i].name));\n        this.target = skeleton.findSlot(data.target.name);\n        this.position = data.position;\n        this.spacing = data.spacing;\n        this.mixRotate = data.mixRotate;\n        this.mixX = data.mixX;\n        this.mixY = data.mixY;\n    }\n    isActive() {\n        return this.active;\n    }\n    update() {\n        let attachment = this.target.getAttachment();\n        if (!(attachment instanceof PathAttachment))\n            return;\n        let mixRotate = this.mixRotate, mixX = this.mixX, mixY = this.mixY;\n        if (mixRotate == 0 && mixX == 0 && mixY == 0)\n            return;\n        let data = this.data;\n        let tangents = data.rotateMode == RotateMode.Tangent, scale = data.rotateMode == RotateMode.ChainScale;\n        let bones = this.bones;\n        let boneCount = bones.length, spacesCount = tangents ? boneCount : boneCount + 1;\n        let spaces = Utils.setArraySize(this.spaces, spacesCount), lengths = scale ? this.lengths = Utils.setArraySize(this.lengths, boneCount) : null;\n        let spacing = this.spacing;\n        switch (data.spacingMode) {\n            case SpacingMode.Percent:\n                if (scale) {\n                    for (let i = 0, n = spacesCount - 1; i < n; i++) {\n                        let bone = bones[i];\n                        let setupLength = bone.data.length;\n                        if (setupLength < PathConstraint.epsilon)\n                            lengths[i] = 0;\n                        else {\n                            let x = setupLength * bone.a, y = setupLength * bone.c;\n                            lengths[i] = Math.sqrt(x * x + y * y);\n                        }\n                    }\n                }\n                Utils.arrayFill(spaces, 1, spacesCount, spacing);\n                break;\n            case SpacingMode.Proportional:\n                let sum = 0;\n                for (let i = 0, n = spacesCount - 1; i < n;) {\n                    let bone = bones[i];\n                    let setupLength = bone.data.length;\n                    if (setupLength < PathConstraint.epsilon) {\n                        if (scale)\n                            lengths[i] = 0;\n                        spaces[++i] = spacing;\n                    }\n                    else {\n                        let x = setupLength * bone.a, y = setupLength * bone.c;\n                        let length = Math.sqrt(x * x + y * y);\n                        if (scale)\n                            lengths[i] = length;\n                        spaces[++i] = length;\n                        sum += length;\n                    }\n                }\n                if (sum > 0) {\n                    sum = spacesCount / sum * spacing;\n                    for (let i = 1; i < spacesCount; i++)\n                        spaces[i] *= sum;\n                }\n                break;\n            default:\n                let lengthSpacing = data.spacingMode == SpacingMode.Length;\n                for (let i = 0, n = spacesCount - 1; i < n;) {\n                    let bone = bones[i];\n                    let setupLength = bone.data.length;\n                    if (setupLength < PathConstraint.epsilon) {\n                        if (scale)\n                            lengths[i] = 0;\n                        spaces[++i] = spacing;\n                    }\n                    else {\n                        let x = setupLength * bone.a, y = setupLength * bone.c;\n                        let length = Math.sqrt(x * x + y * y);\n                        if (scale)\n                            lengths[i] = length;\n                        spaces[++i] = (lengthSpacing ? setupLength + spacing : spacing) * length / setupLength;\n                    }\n                }\n        }\n        let positions = this.computeWorldPositions(attachment, spacesCount, tangents);\n        let boneX = positions[0], boneY = positions[1], offsetRotation = data.offsetRotation;\n        let tip = false;\n        if (offsetRotation == 0)\n            tip = data.rotateMode == RotateMode.Chain;\n        else {\n            tip = false;\n            let p = this.target.bone;\n            offsetRotation *= p.a * p.d - p.b * p.c > 0 ? MathUtils.degRad : -MathUtils.degRad;\n        }\n        for (let i = 0, p = 3; i < boneCount; i++, p += 3) {\n            let bone = bones[i];\n            bone.worldX += (boneX - bone.worldX) * mixX;\n            bone.worldY += (boneY - bone.worldY) * mixY;\n            let x = positions[p], y = positions[p + 1], dx = x - boneX, dy = y - boneY;\n            if (scale) {\n                let length = lengths[i];\n                if (length != 0) {\n                    let s = (Math.sqrt(dx * dx + dy * dy) / length - 1) * mixRotate + 1;\n                    bone.a *= s;\n                    bone.c *= s;\n                }\n            }\n            boneX = x;\n            boneY = y;\n            if (mixRotate > 0) {\n                let a = bone.a, b = bone.b, c = bone.c, d = bone.d, r = 0, cos = 0, sin = 0;\n                if (tangents)\n                    r = positions[p - 1];\n                else if (spaces[i + 1] == 0)\n                    r = positions[p + 2];\n                else\n                    r = Math.atan2(dy, dx);\n                r -= Math.atan2(c, a);\n                if (tip) {\n                    cos = Math.cos(r);\n                    sin = Math.sin(r);\n                    let length = bone.data.length;\n                    boneX += (length * (cos * a - sin * c) - dx) * mixRotate;\n                    boneY += (length * (sin * a + cos * c) - dy) * mixRotate;\n                }\n                else {\n                    r += offsetRotation;\n                }\n                if (r > MathUtils.PI)\n                    r -= MathUtils.PI2;\n                else if (r < -MathUtils.PI) //\n                    r += MathUtils.PI2;\n                r *= mixRotate;\n                cos = Math.cos(r);\n                sin = Math.sin(r);\n                bone.a = cos * a - sin * c;\n                bone.b = cos * b - sin * d;\n                bone.c = sin * a + cos * c;\n                bone.d = sin * b + cos * d;\n            }\n            bone.updateAppliedTransform();\n        }\n    }\n    computeWorldPositions(path, spacesCount, tangents) {\n        let target = this.target;\n        let position = this.position;\n        let spaces = this.spaces, out = Utils.setArraySize(this.positions, spacesCount * 3 + 2), world = null;\n        let closed = path.closed;\n        let verticesLength = path.worldVerticesLength, curveCount = verticesLength / 6, prevCurve = PathConstraint.NONE;\n        if (!path.constantSpeed) {\n            let lengths = path.lengths;\n            curveCount -= closed ? 1 : 2;\n            let pathLength = lengths[curveCount];\n            if (this.data.positionMode == PositionMode.Percent)\n                position *= pathLength;\n            let multiplier;\n            switch (this.data.spacingMode) {\n                case SpacingMode.Percent:\n                    multiplier = pathLength;\n                    break;\n                case SpacingMode.Proportional:\n                    multiplier = pathLength / spacesCount;\n                    break;\n                default:\n                    multiplier = 1;\n            }\n            world = Utils.setArraySize(this.world, 8);\n            for (let i = 0, o = 0, curve = 0; i < spacesCount; i++, o += 3) {\n                let space = spaces[i] * multiplier;\n                position += space;\n                let p = position;\n                if (closed) {\n                    p %= pathLength;\n                    if (p < 0)\n                        p += pathLength;\n                    curve = 0;\n                }\n                else if (p < 0) {\n                    if (prevCurve != PathConstraint.BEFORE) {\n                        prevCurve = PathConstraint.BEFORE;\n                        path.computeWorldVertices(target, 2, 4, world, 0, 2);\n                    }\n                    this.addBeforePosition(p, world, 0, out, o);\n                    continue;\n                }\n                else if (p > pathLength) {\n                    if (prevCurve != PathConstraint.AFTER) {\n                        prevCurve = PathConstraint.AFTER;\n                        path.computeWorldVertices(target, verticesLength - 6, 4, world, 0, 2);\n                    }\n                    this.addAfterPosition(p - pathLength, world, 0, out, o);\n                    continue;\n                }\n                // Determine curve containing position.\n                for (;; curve++) {\n                    let length = lengths[curve];\n                    if (p > length)\n                        continue;\n                    if (curve == 0)\n                        p /= length;\n                    else {\n                        let prev = lengths[curve - 1];\n                        p = (p - prev) / (length - prev);\n                    }\n                    break;\n                }\n                if (curve != prevCurve) {\n                    prevCurve = curve;\n                    if (closed && curve == curveCount) {\n                        path.computeWorldVertices(target, verticesLength - 4, 4, world, 0, 2);\n                        path.computeWorldVertices(target, 0, 4, world, 4, 2);\n                    }\n                    else\n                        path.computeWorldVertices(target, curve * 6 + 2, 8, world, 0, 2);\n                }\n                this.addCurvePosition(p, world[0], world[1], world[2], world[3], world[4], world[5], world[6], world[7], out, o, tangents || (i > 0 && space == 0));\n            }\n            return out;\n        }\n        // World vertices.\n        if (closed) {\n            verticesLength += 2;\n            world = Utils.setArraySize(this.world, verticesLength);\n            path.computeWorldVertices(target, 2, verticesLength - 4, world, 0, 2);\n            path.computeWorldVertices(target, 0, 2, world, verticesLength - 4, 2);\n            world[verticesLength - 2] = world[0];\n            world[verticesLength - 1] = world[1];\n        }\n        else {\n            curveCount--;\n            verticesLength -= 4;\n            world = Utils.setArraySize(this.world, verticesLength);\n            path.computeWorldVertices(target, 2, verticesLength, world, 0, 2);\n        }\n        // Curve lengths.\n        let curves = Utils.setArraySize(this.curves, curveCount);\n        let pathLength = 0;\n        let x1 = world[0], y1 = world[1], cx1 = 0, cy1 = 0, cx2 = 0, cy2 = 0, x2 = 0, y2 = 0;\n        let tmpx = 0, tmpy = 0, dddfx = 0, dddfy = 0, ddfx = 0, ddfy = 0, dfx = 0, dfy = 0;\n        for (let i = 0, w = 2; i < curveCount; i++, w += 6) {\n            cx1 = world[w];\n            cy1 = world[w + 1];\n            cx2 = world[w + 2];\n            cy2 = world[w + 3];\n            x2 = world[w + 4];\n            y2 = world[w + 5];\n            tmpx = (x1 - cx1 * 2 + cx2) * 0.1875;\n            tmpy = (y1 - cy1 * 2 + cy2) * 0.1875;\n            dddfx = ((cx1 - cx2) * 3 - x1 + x2) * 0.09375;\n            dddfy = ((cy1 - cy2) * 3 - y1 + y2) * 0.09375;\n            ddfx = tmpx * 2 + dddfx;\n            ddfy = tmpy * 2 + dddfy;\n            dfx = (cx1 - x1) * 0.75 + tmpx + dddfx * 0.16666667;\n            dfy = (cy1 - y1) * 0.75 + tmpy + dddfy * 0.16666667;\n            pathLength += Math.sqrt(dfx * dfx + dfy * dfy);\n            dfx += ddfx;\n            dfy += ddfy;\n            ddfx += dddfx;\n            ddfy += dddfy;\n            pathLength += Math.sqrt(dfx * dfx + dfy * dfy);\n            dfx += ddfx;\n            dfy += ddfy;\n            pathLength += Math.sqrt(dfx * dfx + dfy * dfy);\n            dfx += ddfx + dddfx;\n            dfy += ddfy + dddfy;\n            pathLength += Math.sqrt(dfx * dfx + dfy * dfy);\n            curves[i] = pathLength;\n            x1 = x2;\n            y1 = y2;\n        }\n        if (this.data.positionMode == PositionMode.Percent)\n            position *= pathLength;\n        let multiplier;\n        switch (this.data.spacingMode) {\n            case SpacingMode.Percent:\n                multiplier = pathLength;\n                break;\n            case SpacingMode.Proportional:\n                multiplier = pathLength / spacesCount;\n                break;\n            default:\n                multiplier = 1;\n        }\n        let segments = this.segments;\n        let curveLength = 0;\n        for (let i = 0, o = 0, curve = 0, segment = 0; i < spacesCount; i++, o += 3) {\n            let space = spaces[i] * multiplier;\n            position += space;\n            let p = position;\n            if (closed) {\n                p %= pathLength;\n                if (p < 0)\n                    p += pathLength;\n                curve = 0;\n            }\n            else if (p < 0) {\n                this.addBeforePosition(p, world, 0, out, o);\n                continue;\n            }\n            else if (p > pathLength) {\n                this.addAfterPosition(p - pathLength, world, verticesLength - 4, out, o);\n                continue;\n            }\n            // Determine curve containing position.\n            for (;; curve++) {\n                let length = curves[curve];\n                if (p > length)\n                    continue;\n                if (curve == 0)\n                    p /= length;\n                else {\n                    let prev = curves[curve - 1];\n                    p = (p - prev) / (length - prev);\n                }\n                break;\n            }\n            // Curve segment lengths.\n            if (curve != prevCurve) {\n                prevCurve = curve;\n                let ii = curve * 6;\n                x1 = world[ii];\n                y1 = world[ii + 1];\n                cx1 = world[ii + 2];\n                cy1 = world[ii + 3];\n                cx2 = world[ii + 4];\n                cy2 = world[ii + 5];\n                x2 = world[ii + 6];\n                y2 = world[ii + 7];\n                tmpx = (x1 - cx1 * 2 + cx2) * 0.03;\n                tmpy = (y1 - cy1 * 2 + cy2) * 0.03;\n                dddfx = ((cx1 - cx2) * 3 - x1 + x2) * 0.006;\n                dddfy = ((cy1 - cy2) * 3 - y1 + y2) * 0.006;\n                ddfx = tmpx * 2 + dddfx;\n                ddfy = tmpy * 2 + dddfy;\n                dfx = (cx1 - x1) * 0.3 + tmpx + dddfx * 0.16666667;\n                dfy = (cy1 - y1) * 0.3 + tmpy + dddfy * 0.16666667;\n                curveLength = Math.sqrt(dfx * dfx + dfy * dfy);\n                segments[0] = curveLength;\n                for (ii = 1; ii < 8; ii++) {\n                    dfx += ddfx;\n                    dfy += ddfy;\n                    ddfx += dddfx;\n                    ddfy += dddfy;\n                    curveLength += Math.sqrt(dfx * dfx + dfy * dfy);\n                    segments[ii] = curveLength;\n                }\n                dfx += ddfx;\n                dfy += ddfy;\n                curveLength += Math.sqrt(dfx * dfx + dfy * dfy);\n                segments[8] = curveLength;\n                dfx += ddfx + dddfx;\n                dfy += ddfy + dddfy;\n                curveLength += Math.sqrt(dfx * dfx + dfy * dfy);\n                segments[9] = curveLength;\n                segment = 0;\n            }\n            // Weight by segment length.\n            p *= curveLength;\n            for (;; segment++) {\n                let length = segments[segment];\n                if (p > length)\n                    continue;\n                if (segment == 0)\n                    p /= length;\n                else {\n                    let prev = segments[segment - 1];\n                    p = segment + (p - prev) / (length - prev);\n                }\n                break;\n            }\n            this.addCurvePosition(p * 0.1, x1, y1, cx1, cy1, cx2, cy2, x2, y2, out, o, tangents || (i > 0 && space == 0));\n        }\n        return out;\n    }\n    addBeforePosition(p, temp, i, out, o) {\n        let x1 = temp[i], y1 = temp[i + 1], dx = temp[i + 2] - x1, dy = temp[i + 3] - y1, r = Math.atan2(dy, dx);\n        out[o] = x1 + p * Math.cos(r);\n        out[o + 1] = y1 + p * Math.sin(r);\n        out[o + 2] = r;\n    }\n    addAfterPosition(p, temp, i, out, o) {\n        let x1 = temp[i + 2], y1 = temp[i + 3], dx = x1 - temp[i], dy = y1 - temp[i + 1], r = Math.atan2(dy, dx);\n        out[o] = x1 + p * Math.cos(r);\n        out[o + 1] = y1 + p * Math.sin(r);\n        out[o + 2] = r;\n    }\n    addCurvePosition(p, x1, y1, cx1, cy1, cx2, cy2, x2, y2, out, o, tangents) {\n        if (p == 0 || isNaN(p)) {\n            out[o] = x1;\n            out[o + 1] = y1;\n            out[o + 2] = Math.atan2(cy1 - y1, cx1 - x1);\n            return;\n        }\n        let tt = p * p, ttt = tt * p, u = 1 - p, uu = u * u, uuu = uu * u;\n        let ut = u * p, ut3 = ut * 3, uut3 = u * ut3, utt3 = ut3 * p;\n        let x = x1 * uuu + cx1 * uut3 + cx2 * utt3 + x2 * ttt, y = y1 * uuu + cy1 * uut3 + cy2 * utt3 + y2 * ttt;\n        out[o] = x;\n        out[o + 1] = y;\n        if (tangents) {\n            if (p < 0.001)\n                out[o + 2] = Math.atan2(cy1 - y1, cx1 - x1);\n            else\n                out[o + 2] = Math.atan2(y - (y1 * uu + cy1 * ut * 2 + cy2 * tt), x - (x1 * uu + cx1 * ut * 2 + cx2 * tt));\n        }\n    }\n}\nPathConstraint.NONE = -1;\nPathConstraint.BEFORE = -2;\nPathConstraint.AFTER = -3;\nPathConstraint.epsilon = 0.00001;","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { VertexAttachment } from \"./attachments/Attachment\";\nimport { Color } from \"./Utils\";\n/** Stores a slot's current pose. Slots organize attachments for {@link Skeleton#drawOrder} purposes and provide a place to store\n * state for an attachment. State cannot be stored in an attachment itself because attachments are stateless and may be shared\n * across multiple skeletons. */\nexport class Slot {\n    constructor(data, bone) {\n        /** Values to deform the slot's attachment. For an unweighted mesh, the entries are local positions for each vertex. For a\n         * weighted mesh, the entries are an offset for each vertex which will be added to the mesh's local vertex positions.\n         *\n         * See {@link VertexAttachment#computeWorldVertices()} and {@link DeformTimeline}. */\n        this.deform = new Array();\n        if (!data)\n            throw new Error(\"data cannot be null.\");\n        if (!bone)\n            throw new Error(\"bone cannot be null.\");\n        this.data = data;\n        this.bone = bone;\n        this.color = new Color();\n        this.darkColor = !data.darkColor ? null : new Color();\n        this.setToSetupPose();\n    }\n    /** The skeleton this slot belongs to. */\n    getSkeleton() {\n        return this.bone.skeleton;\n    }\n    /** The current attachment for the slot, or null if the slot has no attachment. */\n    getAttachment() {\n        return this.attachment;\n    }\n    /** Sets the slot's attachment and, if the attachment changed, resets {@link #attachmentTime} and clears the {@link #deform}.\n     * The deform is not cleared if the old attachment has the same {@link VertexAttachment#getDeformAttachment()} as the specified\n     * attachment.\n     * @param attachment May be null. */\n    setAttachment(attachment) {\n        if (this.attachment == attachment)\n            return;\n        if (!(attachment instanceof VertexAttachment) || !(this.attachment instanceof VertexAttachment)\n            || attachment.deformAttachment != this.attachment.deformAttachment) {\n            this.deform.length = 0;\n        }\n        this.attachment = attachment;\n        this.attachmentTime = this.bone.skeleton.time;\n    }\n    setAttachmentTime(time) {\n        this.attachmentTime = this.bone.skeleton.time - time;\n    }\n    /** The time that has elapsed since the last time the attachment was set or cleared. Relies on Skeleton\n     * {@link Skeleton#time}. */\n    getAttachmentTime() {\n        return this.bone.skeleton.time - this.attachmentTime;\n    }\n    /** Sets this slot to the setup pose. */\n    setToSetupPose() {\n        this.color.setFromColor(this.data.color);\n        if (this.darkColor)\n            this.darkColor.setFromColor(this.data.darkColor);\n        if (!this.data.attachmentName)\n            this.attachment = null;\n        else {\n            this.attachment = null;\n            this.setAttachment(this.bone.skeleton.getAttachment(this.data.index, this.data.attachmentName));\n        }\n    }\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { Vector2, MathUtils } from \"./Utils\";\n/** Stores the current pose for a transform constraint. A transform constraint adjusts the world transform of the constrained\n * bones to match that of the target bone.\n *\n * See [Transform constraints](http://esotericsoftware.com/spine-transform-constraints) in the Spine User Guide. */\nexport class TransformConstraint {\n    constructor(data, skeleton) {\n        this.mixRotate = 0;\n        this.mixX = 0;\n        this.mixY = 0;\n        this.mixScaleX = 0;\n        this.mixScaleY = 0;\n        this.mixShearY = 0;\n        this.temp = new Vector2();\n        this.active = false;\n        if (!data)\n            throw new Error(\"data cannot be null.\");\n        if (!skeleton)\n            throw new Error(\"skeleton cannot be null.\");\n        this.data = data;\n        this.mixRotate = data.mixRotate;\n        this.mixX = data.mixX;\n        this.mixY = data.mixY;\n        this.mixScaleX = data.mixScaleX;\n        this.mixScaleY = data.mixScaleY;\n        this.mixShearY = data.mixShearY;\n        this.bones = new Array();\n        for (let i = 0; i < data.bones.length; i++)\n            this.bones.push(skeleton.findBone(data.bones[i].name));\n        this.target = skeleton.findBone(data.target.name);\n    }\n    isActive() {\n        return this.active;\n    }\n    update() {\n        if (this.mixRotate == 0 && this.mixX == 0 && this.mixY == 0 && this.mixScaleX == 0 && this.mixScaleX == 0 && this.mixShearY == 0)\n            return;\n        if (this.data.local) {\n            if (this.data.relative)\n                this.applyRelativeLocal();\n            else\n                this.applyAbsoluteLocal();\n        }\n        else {\n            if (this.data.relative)\n                this.applyRelativeWorld();\n            else\n                this.applyAbsoluteWorld();\n        }\n    }\n    applyAbsoluteWorld() {\n        let mixRotate = this.mixRotate, mixX = this.mixX, mixY = this.mixY, mixScaleX = this.mixScaleX, mixScaleY = this.mixScaleY, mixShearY = this.mixShearY;\n        let translate = mixX != 0 || mixY != 0;\n        let target = this.target;\n        let ta = target.a, tb = target.b, tc = target.c, td = target.d;\n        let degRadReflect = ta * td - tb * tc > 0 ? MathUtils.degRad : -MathUtils.degRad;\n        let offsetRotation = this.data.offsetRotation * degRadReflect;\n        let offsetShearY = this.data.offsetShearY * degRadReflect;\n        let bones = this.bones;\n        for (let i = 0, n = bones.length; i < n; i++) {\n            let bone = bones[i];\n            if (mixRotate != 0) {\n                let a = bone.a, b = bone.b, c = bone.c, d = bone.d;\n                let r = Math.atan2(tc, ta) - Math.atan2(c, a) + offsetRotation;\n                if (r > MathUtils.PI)\n                    r -= MathUtils.PI2;\n                else if (r < -MathUtils.PI) //\n                    r += MathUtils.PI2;\n                r *= mixRotate;\n                let cos = Math.cos(r), sin = Math.sin(r);\n                bone.a = cos * a - sin * c;\n                bone.b = cos * b - sin * d;\n                bone.c = sin * a + cos * c;\n                bone.d = sin * b + cos * d;\n            }\n            if (translate) {\n                let temp = this.temp;\n                target.localToWorld(temp.set(this.data.offsetX, this.data.offsetY));\n                bone.worldX += (temp.x - bone.worldX) * mixX;\n                bone.worldY += (temp.y - bone.worldY) * mixY;\n            }\n            if (mixScaleX != 0) {\n                let s = Math.sqrt(bone.a * bone.a + bone.c * bone.c);\n                if (s != 0)\n                    s = (s + (Math.sqrt(ta * ta + tc * tc) - s + this.data.offsetScaleX) * mixScaleX) / s;\n                bone.a *= s;\n                bone.c *= s;\n            }\n            if (mixScaleY != 0) {\n                let s = Math.sqrt(bone.b * bone.b + bone.d * bone.d);\n                if (s != 0)\n                    s = (s + (Math.sqrt(tb * tb + td * td) - s + this.data.offsetScaleY) * mixScaleY) / s;\n                bone.b *= s;\n                bone.d *= s;\n            }\n            if (mixShearY > 0) {\n                let b = bone.b, d = bone.d;\n                let by = Math.atan2(d, b);\n                let r = Math.atan2(td, tb) - Math.atan2(tc, ta) - (by - Math.atan2(bone.c, bone.a));\n                if (r > MathUtils.PI)\n                    r -= MathUtils.PI2;\n                else if (r < -MathUtils.PI) //\n                    r += MathUtils.PI2;\n                r = by + (r + offsetShearY) * mixShearY;\n                let s = Math.sqrt(b * b + d * d);\n                bone.b = Math.cos(r) * s;\n                bone.d = Math.sin(r) * s;\n            }\n            bone.updateAppliedTransform();\n        }\n    }\n    applyRelativeWorld() {\n        let mixRotate = this.mixRotate, mixX = this.mixX, mixY = this.mixY, mixScaleX = this.mixScaleX, mixScaleY = this.mixScaleY, mixShearY = this.mixShearY;\n        let translate = mixX != 0 || mixY != 0;\n        let target = this.target;\n        let ta = target.a, tb = target.b, tc = target.c, td = target.d;\n        let degRadReflect = ta * td - tb * tc > 0 ? MathUtils.degRad : -MathUtils.degRad;\n        let offsetRotation = this.data.offsetRotation * degRadReflect, offsetShearY = this.data.offsetShearY * degRadReflect;\n        let bones = this.bones;\n        for (let i = 0, n = bones.length; i < n; i++) {\n            let bone = bones[i];\n            if (mixRotate != 0) {\n                let a = bone.a, b = bone.b, c = bone.c, d = bone.d;\n                let r = Math.atan2(tc, ta) + offsetRotation;\n                if (r > MathUtils.PI)\n                    r -= MathUtils.PI2;\n                else if (r < -MathUtils.PI) //\n                    r += MathUtils.PI2;\n                r *= mixRotate;\n                let cos = Math.cos(r), sin = Math.sin(r);\n                bone.a = cos * a - sin * c;\n                bone.b = cos * b - sin * d;\n                bone.c = sin * a + cos * c;\n                bone.d = sin * b + cos * d;\n            }\n            if (translate) {\n                let temp = this.temp;\n                target.localToWorld(temp.set(this.data.offsetX, this.data.offsetY));\n                bone.worldX += temp.x * mixX;\n                bone.worldY += temp.y * mixY;\n            }\n            if (mixScaleX != 0) {\n                let s = (Math.sqrt(ta * ta + tc * tc) - 1 + this.data.offsetScaleX) * mixScaleX + 1;\n                bone.a *= s;\n                bone.c *= s;\n            }\n            if (mixScaleY != 0) {\n                let s = (Math.sqrt(tb * tb + td * td) - 1 + this.data.offsetScaleY) * mixScaleY + 1;\n                bone.b *= s;\n                bone.d *= s;\n            }\n            if (mixShearY > 0) {\n                let r = Math.atan2(td, tb) - Math.atan2(tc, ta);\n                if (r > MathUtils.PI)\n                    r -= MathUtils.PI2;\n                else if (r < -MathUtils.PI) //\n                    r += MathUtils.PI2;\n                let b = bone.b, d = bone.d;\n                r = Math.atan2(d, b) + (r - MathUtils.PI / 2 + offsetShearY) * mixShearY;\n                let s = Math.sqrt(b * b + d * d);\n                bone.b = Math.cos(r) * s;\n                bone.d = Math.sin(r) * s;\n            }\n            bone.updateAppliedTransform();\n        }\n    }\n    applyAbsoluteLocal() {\n        let mixRotate = this.mixRotate, mixX = this.mixX, mixY = this.mixY, mixScaleX = this.mixScaleX, mixScaleY = this.mixScaleY, mixShearY = this.mixShearY;\n        let target = this.target;\n        let bones = this.bones;\n        for (let i = 0, n = bones.length; i < n; i++) {\n            let bone = bones[i];\n            let rotation = bone.arotation;\n            if (mixRotate != 0) {\n                let r = target.arotation - rotation + this.data.offsetRotation;\n                r -= (16384 - ((16384.499999999996 - r / 360) | 0)) * 360;\n                rotation += r * mixRotate;\n            }\n            let x = bone.ax, y = bone.ay;\n            x += (target.ax - x + this.data.offsetX) * mixX;\n            y += (target.ay - y + this.data.offsetY) * mixY;\n            let scaleX = bone.ascaleX, scaleY = bone.ascaleY;\n            if (mixScaleX != 0 && scaleX != 0)\n                scaleX = (scaleX + (target.ascaleX - scaleX + this.data.offsetScaleX) * mixScaleX) / scaleX;\n            if (mixScaleY != 0 && scaleY != 0)\n                scaleY = (scaleY + (target.ascaleY - scaleY + this.data.offsetScaleY) * mixScaleY) / scaleY;\n            let shearY = bone.ashearY;\n            if (mixShearY != 0) {\n                let r = target.ashearY - shearY + this.data.offsetShearY;\n                r -= (16384 - ((16384.499999999996 - r / 360) | 0)) * 360;\n                shearY += r * mixShearY;\n            }\n            bone.updateWorldTransformWith(x, y, rotation, scaleX, scaleY, bone.ashearX, shearY);\n        }\n    }\n    applyRelativeLocal() {\n        let mixRotate = this.mixRotate, mixX = this.mixX, mixY = this.mixY, mixScaleX = this.mixScaleX, mixScaleY = this.mixScaleY, mixShearY = this.mixShearY;\n        let target = this.target;\n        let bones = this.bones;\n        for (let i = 0, n = bones.length; i < n; i++) {\n            let bone = bones[i];\n            let rotation = bone.arotation + (target.arotation + this.data.offsetRotation) * mixRotate;\n            let x = bone.ax + (target.ax + this.data.offsetX) * mixX;\n            let y = bone.ay + (target.ay + this.data.offsetY) * mixY;\n            let scaleX = bone.ascaleX * (((target.ascaleX - 1 + this.data.offsetScaleX) * mixScaleX) + 1);\n            let scaleY = bone.ascaleY * (((target.ascaleY - 1 + this.data.offsetScaleY) * mixScaleY) + 1);\n            let shearY = bone.ashearY + (target.ashearY + this.data.offsetShearY) * mixShearY;\n            bone.updateWorldTransformWith(x, y, rotation, scaleX, scaleY, bone.ashearX, shearY);\n        }\n    }\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { MeshAttachment } from \"./attachments/MeshAttachment\";\nimport { PathAttachment } from \"./attachments/PathAttachment\";\nimport { RegionAttachment } from \"./attachments/RegionAttachment\";\nimport { Bone } from \"./Bone\";\nimport { IkConstraint } from \"./IkConstraint\";\nimport { PathConstraint } from \"./PathConstraint\";\nimport { Slot } from \"./Slot\";\nimport { TransformConstraint } from \"./TransformConstraint\";\nimport { Color, Utils, MathUtils } from \"./Utils\";\n/** Stores the current pose for a skeleton.\n *\n * See [Instance objects](http://esotericsoftware.com/spine-runtime-architecture#Instance-objects) in the Spine Runtimes Guide. */\nexport class Skeleton {\n    constructor(data) {\n        /** The list of bones and constraints, sorted in the order they should be updated, as computed by {@link #updateCache()}. */\n        this._updateCache = new Array();\n        /** Returns the skeleton's time. This can be used for tracking, such as with Slot {@link Slot#attachmentTime}.\n         * <p>\n         * See {@link #update()}. */\n        this.time = 0;\n        /** Scales the entire skeleton on the X axis. This affects all bones, even if the bone's transform mode disallows scale\n          * inheritance. */\n        this.scaleX = 1;\n        /** Scales the entire skeleton on the Y axis. This affects all bones, even if the bone's transform mode disallows scale\n          * inheritance. */\n        this.scaleY = 1;\n        /** Sets the skeleton X position, which is added to the root bone worldX position. */\n        this.x = 0;\n        /** Sets the skeleton Y position, which is added to the root bone worldY position. */\n        this.y = 0;\n        if (!data)\n            throw new Error(\"data cannot be null.\");\n        this.data = data;\n        this.bones = new Array();\n        for (let i = 0; i < data.bones.length; i++) {\n            let boneData = data.bones[i];\n            let bone;\n            if (!boneData.parent)\n                bone = new Bone(boneData, this, null);\n            else {\n                let parent = this.bones[boneData.parent.index];\n                bone = new Bone(boneData, this, parent);\n                parent.children.push(bone);\n            }\n            this.bones.push(bone);\n        }\n        this.slots = new Array();\n        this.drawOrder = new Array();\n        for (let i = 0; i < data.slots.length; i++) {\n            let slotData = data.slots[i];\n            let bone = this.bones[slotData.boneData.index];\n            let slot = new Slot(slotData, bone);\n            this.slots.push(slot);\n            this.drawOrder.push(slot);\n        }\n        this.ikConstraints = new Array();\n        for (let i = 0; i < data.ikConstraints.length; i++) {\n            let ikConstraintData = data.ikConstraints[i];\n            this.ikConstraints.push(new IkConstraint(ikConstraintData, this));\n        }\n        this.transformConstraints = new Array();\n        for (let i = 0; i < data.transformConstraints.length; i++) {\n            let transformConstraintData = data.transformConstraints[i];\n            this.transformConstraints.push(new TransformConstraint(transformConstraintData, this));\n        }\n        this.pathConstraints = new Array();\n        for (let i = 0; i < data.pathConstraints.length; i++) {\n            let pathConstraintData = data.pathConstraints[i];\n            this.pathConstraints.push(new PathConstraint(pathConstraintData, this));\n        }\n        this.color = new Color(1, 1, 1, 1);\n        this.updateCache();\n    }\n    /** Caches information about bones and constraints. Must be called if the {@link #getSkin()} is modified or if bones,\n     * constraints, or weighted path attachments are added or removed. */\n    updateCache() {\n        let updateCache = this._updateCache;\n        updateCache.length = 0;\n        let bones = this.bones;\n        for (let i = 0, n = bones.length; i < n; i++) {\n            let bone = bones[i];\n            bone.sorted = bone.data.skinRequired;\n            bone.active = !bone.sorted;\n        }\n        if (this.skin) {\n            let skinBones = this.skin.bones;\n            for (let i = 0, n = this.skin.bones.length; i < n; i++) {\n                let bone = this.bones[skinBones[i].index];\n                do {\n                    bone.sorted = false;\n                    bone.active = true;\n                    bone = bone.parent;\n                } while (bone);\n            }\n        }\n        // IK first, lowest hierarchy depth first.\n        let ikConstraints = this.ikConstraints;\n        let transformConstraints = this.transformConstraints;\n        let pathConstraints = this.pathConstraints;\n        let ikCount = ikConstraints.length, transformCount = transformConstraints.length, pathCount = pathConstraints.length;\n        let constraintCount = ikCount + transformCount + pathCount;\n        outer: for (let i = 0; i < constraintCount; i++) {\n            for (let ii = 0; ii < ikCount; ii++) {\n                let constraint = ikConstraints[ii];\n                if (constraint.data.order == i) {\n                    this.sortIkConstraint(constraint);\n                    continue outer;\n                }\n            }\n            for (let ii = 0; ii < transformCount; ii++) {\n                let constraint = transformConstraints[ii];\n                if (constraint.data.order == i) {\n                    this.sortTransformConstraint(constraint);\n                    continue outer;\n                }\n            }\n            for (let ii = 0; ii < pathCount; ii++) {\n                let constraint = pathConstraints[ii];\n                if (constraint.data.order == i) {\n                    this.sortPathConstraint(constraint);\n                    continue outer;\n                }\n            }\n        }\n        for (let i = 0, n = bones.length; i < n; i++)\n            this.sortBone(bones[i]);\n    }\n    sortIkConstraint(constraint) {\n        constraint.active = constraint.target.isActive() && (!constraint.data.skinRequired || (this.skin && Utils.contains(this.skin.constraints, constraint.data, true)));\n        if (!constraint.active)\n            return;\n        let target = constraint.target;\n        this.sortBone(target);\n        let constrained = constraint.bones;\n        let parent = constrained[0];\n        this.sortBone(parent);\n        if (constrained.length == 1) {\n            this._updateCache.push(constraint);\n            this.sortReset(parent.children);\n        }\n        else {\n            let child = constrained[constrained.length - 1];\n            this.sortBone(child);\n            this._updateCache.push(constraint);\n            this.sortReset(parent.children);\n            child.sorted = true;\n        }\n    }\n    sortPathConstraint(constraint) {\n        constraint.active = constraint.target.bone.isActive() && (!constraint.data.skinRequired || (this.skin && Utils.contains(this.skin.constraints, constraint.data, true)));\n        if (!constraint.active)\n            return;\n        let slot = constraint.target;\n        let slotIndex = slot.data.index;\n        let slotBone = slot.bone;\n        if (this.skin)\n            this.sortPathConstraintAttachment(this.skin, slotIndex, slotBone);\n        if (this.data.defaultSkin && this.data.defaultSkin != this.skin)\n            this.sortPathConstraintAttachment(this.data.defaultSkin, slotIndex, slotBone);\n        for (let i = 0, n = this.data.skins.length; i < n; i++)\n            this.sortPathConstraintAttachment(this.data.skins[i], slotIndex, slotBone);\n        let attachment = slot.getAttachment();\n        if (attachment instanceof PathAttachment)\n            this.sortPathConstraintAttachmentWith(attachment, slotBone);\n        let constrained = constraint.bones;\n        let boneCount = constrained.length;\n        for (let i = 0; i < boneCount; i++)\n            this.sortBone(constrained[i]);\n        this._updateCache.push(constraint);\n        for (let i = 0; i < boneCount; i++)\n            this.sortReset(constrained[i].children);\n        for (let i = 0; i < boneCount; i++)\n            constrained[i].sorted = true;\n    }\n    sortTransformConstraint(constraint) {\n        constraint.active = constraint.target.isActive() && (!constraint.data.skinRequired || (this.skin && Utils.contains(this.skin.constraints, constraint.data, true)));\n        if (!constraint.active)\n            return;\n        this.sortBone(constraint.target);\n        let constrained = constraint.bones;\n        let boneCount = constrained.length;\n        if (constraint.data.local) {\n            for (let i = 0; i < boneCount; i++) {\n                let child = constrained[i];\n                this.sortBone(child.parent);\n                this.sortBone(child);\n            }\n        }\n        else {\n            for (let i = 0; i < boneCount; i++) {\n                this.sortBone(constrained[i]);\n            }\n        }\n        this._updateCache.push(constraint);\n        for (let i = 0; i < boneCount; i++)\n            this.sortReset(constrained[i].children);\n        for (let i = 0; i < boneCount; i++)\n            constrained[i].sorted = true;\n    }\n    sortPathConstraintAttachment(skin, slotIndex, slotBone) {\n        let attachments = skin.attachments[slotIndex];\n        if (!attachments)\n            return;\n        for (let key in attachments) {\n            this.sortPathConstraintAttachmentWith(attachments[key], slotBone);\n        }\n    }\n    sortPathConstraintAttachmentWith(attachment, slotBone) {\n        if (!(attachment instanceof PathAttachment))\n            return;\n        let pathBones = attachment.bones;\n        if (!pathBones)\n            this.sortBone(slotBone);\n        else {\n            let bones = this.bones;\n            for (let i = 0, n = pathBones.length; i < n;) {\n                let nn = pathBones[i++];\n                nn += i;\n                while (i < nn)\n                    this.sortBone(bones[pathBones[i++]]);\n            }\n        }\n    }\n    sortBone(bone) {\n        if (bone.sorted)\n            return;\n        let parent = bone.parent;\n        if (parent)\n            this.sortBone(parent);\n        bone.sorted = true;\n        this._updateCache.push(bone);\n    }\n    sortReset(bones) {\n        for (let i = 0, n = bones.length; i < n; i++) {\n            let bone = bones[i];\n            if (!bone.active)\n                continue;\n            if (bone.sorted)\n                this.sortReset(bone.children);\n            bone.sorted = false;\n        }\n    }\n    /** Updates the world transform for each bone and applies all constraints.\n     *\n     * See [World transforms](http://esotericsoftware.com/spine-runtime-skeletons#World-transforms) in the Spine\n     * Runtimes Guide. */\n    updateWorldTransform() {\n        let bones = this.bones;\n        for (let i = 0, n = bones.length; i < n; i++) {\n            let bone = bones[i];\n            bone.ax = bone.x;\n            bone.ay = bone.y;\n            bone.arotation = bone.rotation;\n            bone.ascaleX = bone.scaleX;\n            bone.ascaleY = bone.scaleY;\n            bone.ashearX = bone.shearX;\n            bone.ashearY = bone.shearY;\n        }\n        let updateCache = this._updateCache;\n        for (let i = 0, n = updateCache.length; i < n; i++)\n            updateCache[i].update();\n    }\n    updateWorldTransformWith(parent) {\n        // Apply the parent bone transform to the root bone. The root bone always inherits scale, rotation and reflection.\n        let rootBone = this.getRootBone();\n        let pa = parent.a, pb = parent.b, pc = parent.c, pd = parent.d;\n        rootBone.worldX = pa * this.x + pb * this.y + parent.worldX;\n        rootBone.worldY = pc * this.x + pd * this.y + parent.worldY;\n        let rotationY = rootBone.rotation + 90 + rootBone.shearY;\n        let la = MathUtils.cosDeg(rootBone.rotation + rootBone.shearX) * rootBone.scaleX;\n        let lb = MathUtils.cosDeg(rotationY) * rootBone.scaleY;\n        let lc = MathUtils.sinDeg(rootBone.rotation + rootBone.shearX) * rootBone.scaleX;\n        let ld = MathUtils.sinDeg(rotationY) * rootBone.scaleY;\n        rootBone.a = (pa * la + pb * lc) * this.scaleX;\n        rootBone.b = (pa * lb + pb * ld) * this.scaleX;\n        rootBone.c = (pc * la + pd * lc) * this.scaleY;\n        rootBone.d = (pc * lb + pd * ld) * this.scaleY;\n        // Update everything except root bone.\n        let updateCache = this._updateCache;\n        for (let i = 0, n = updateCache.length; i < n; i++) {\n            let updatable = updateCache[i];\n            if (updatable != rootBone)\n                updatable.update();\n        }\n    }\n    /** Sets the bones, constraints, and slots to their setup pose values. */\n    setToSetupPose() {\n        this.setBonesToSetupPose();\n        this.setSlotsToSetupPose();\n    }\n    /** Sets the bones and constraints to their setup pose values. */\n    setBonesToSetupPose() {\n        let bones = this.bones;\n        for (let i = 0, n = bones.length; i < n; i++)\n            bones[i].setToSetupPose();\n        let ikConstraints = this.ikConstraints;\n        for (let i = 0, n = ikConstraints.length; i < n; i++) {\n            let constraint = ikConstraints[i];\n            constraint.mix = constraint.data.mix;\n            constraint.softness = constraint.data.softness;\n            constraint.bendDirection = constraint.data.bendDirection;\n            constraint.compress = constraint.data.compress;\n            constraint.stretch = constraint.data.stretch;\n        }\n        let transformConstraints = this.transformConstraints;\n        for (let i = 0, n = transformConstraints.length; i < n; i++) {\n            let constraint = transformConstraints[i];\n            let data = constraint.data;\n            constraint.mixRotate = data.mixRotate;\n            constraint.mixX = data.mixX;\n            constraint.mixY = data.mixY;\n            constraint.mixScaleX = data.mixScaleX;\n            constraint.mixScaleY = data.mixScaleY;\n            constraint.mixShearY = data.mixShearY;\n        }\n        let pathConstraints = this.pathConstraints;\n        for (let i = 0, n = pathConstraints.length; i < n; i++) {\n            let constraint = pathConstraints[i];\n            let data = constraint.data;\n            constraint.position = data.position;\n            constraint.spacing = data.spacing;\n            constraint.mixRotate = data.mixRotate;\n            constraint.mixX = data.mixX;\n            constraint.mixY = data.mixY;\n        }\n    }\n    /** Sets the slots and draw order to their setup pose values. */\n    setSlotsToSetupPose() {\n        let slots = this.slots;\n        Utils.arrayCopy(slots, 0, this.drawOrder, 0, slots.length);\n        for (let i = 0, n = slots.length; i < n; i++)\n            slots[i].setToSetupPose();\n    }\n    /** @returns May return null. */\n    getRootBone() {\n        if (this.bones.length == 0)\n            return null;\n        return this.bones[0];\n    }\n    /** @returns May be null. */\n    findBone(boneName) {\n        if (!boneName)\n            throw new Error(\"boneName cannot be null.\");\n        let bones = this.bones;\n        for (let i = 0, n = bones.length; i < n; i++) {\n            let bone = bones[i];\n            if (bone.data.name == boneName)\n                return bone;\n        }\n        return null;\n    }\n    /** Finds a slot by comparing each slot's name. It is more efficient to cache the results of this method than to call it\n     * repeatedly.\n     * @returns May be null. */\n    findSlot(slotName) {\n        if (!slotName)\n            throw new Error(\"slotName cannot be null.\");\n        let slots = this.slots;\n        for (let i = 0, n = slots.length; i < n; i++) {\n            let slot = slots[i];\n            if (slot.data.name == slotName)\n                return slot;\n        }\n        return null;\n    }\n    /** Sets a skin by name.\n     *\n     * See {@link #setSkin()}. */\n    setSkinByName(skinName) {\n        let skin = this.data.findSkin(skinName);\n        if (!skin)\n            throw new Error(\"Skin not found: \" + skinName);\n        this.setSkin(skin);\n    }\n    /** Sets the skin used to look up attachments before looking in the {@link SkeletonData#defaultSkin default skin}. If the\n     * skin is changed, {@link #updateCache()} is called.\n     *\n     * Attachments from the new skin are attached if the corresponding attachment from the old skin was attached. If there was no\n     * old skin, each slot's setup mode attachment is attached from the new skin.\n     *\n     * After changing the skin, the visible attachments can be reset to those attached in the setup pose by calling\n     * {@link #setSlotsToSetupPose()}. Also, often {@link AnimationState#apply()} is called before the next time the\n     * skeleton is rendered to allow any attachment keys in the current animation(s) to hide or show attachments from the new skin.\n     * @param newSkin May be null. */\n    setSkin(newSkin) {\n        if (newSkin == this.skin)\n            return;\n        if (newSkin) {\n            if (this.skin)\n                newSkin.attachAll(this, this.skin);\n            else {\n                let slots = this.slots;\n                for (let i = 0, n = slots.length; i < n; i++) {\n                    let slot = slots[i];\n                    let name = slot.data.attachmentName;\n                    if (name) {\n                        let attachment = newSkin.getAttachment(i, name);\n                        if (attachment)\n                            slot.setAttachment(attachment);\n                    }\n                }\n            }\n        }\n        this.skin = newSkin;\n        this.updateCache();\n    }\n    /** Finds an attachment by looking in the {@link #skin} and {@link SkeletonData#defaultSkin} using the slot name and attachment\n     * name.\n     *\n     * See {@link #getAttachment()}.\n     * @returns May be null. */\n    getAttachmentByName(slotName, attachmentName) {\n        return this.getAttachment(this.data.findSlot(slotName).index, attachmentName);\n    }\n    /** Finds an attachment by looking in the {@link #skin} and {@link SkeletonData#defaultSkin} using the slot index and\n     * attachment name. First the skin is checked and if the attachment was not found, the default skin is checked.\n     *\n     * See [Runtime skins](http://esotericsoftware.com/spine-runtime-skins) in the Spine Runtimes Guide.\n     * @returns May be null. */\n    getAttachment(slotIndex, attachmentName) {\n        if (!attachmentName)\n            throw new Error(\"attachmentName cannot be null.\");\n        if (this.skin) {\n            let attachment = this.skin.getAttachment(slotIndex, attachmentName);\n            if (attachment)\n                return attachment;\n        }\n        if (this.data.defaultSkin)\n            return this.data.defaultSkin.getAttachment(slotIndex, attachmentName);\n        return null;\n    }\n    /** A convenience method to set an attachment by finding the slot with {@link #findSlot()}, finding the attachment with\n     * {@link #getAttachment()}, then setting the slot's {@link Slot#attachment}.\n     * @param attachmentName May be null to clear the slot's attachment. */\n    setAttachment(slotName, attachmentName) {\n        if (!slotName)\n            throw new Error(\"slotName cannot be null.\");\n        let slots = this.slots;\n        for (let i = 0, n = slots.length; i < n; i++) {\n            let slot = slots[i];\n            if (slot.data.name == slotName) {\n                let attachment = null;\n                if (attachmentName) {\n                    attachment = this.getAttachment(i, attachmentName);\n                    if (!attachment)\n                        throw new Error(\"Attachment not found: \" + attachmentName + \", for slot: \" + slotName);\n                }\n                slot.setAttachment(attachment);\n                return;\n            }\n        }\n        throw new Error(\"Slot not found: \" + slotName);\n    }\n    /** Finds an IK constraint by comparing each IK constraint's name. It is more efficient to cache the results of this method\n     * than to call it repeatedly.\n     * @return May be null. */\n    findIkConstraint(constraintName) {\n        if (!constraintName)\n            throw new Error(\"constraintName cannot be null.\");\n        let ikConstraints = this.ikConstraints;\n        for (let i = 0, n = ikConstraints.length; i < n; i++) {\n            let ikConstraint = ikConstraints[i];\n            if (ikConstraint.data.name == constraintName)\n                return ikConstraint;\n        }\n        return null;\n    }\n    /** Finds a transform constraint by comparing each transform constraint's name. It is more efficient to cache the results of\n     * this method than to call it repeatedly.\n     * @return May be null. */\n    findTransformConstraint(constraintName) {\n        if (!constraintName)\n            throw new Error(\"constraintName cannot be null.\");\n        let transformConstraints = this.transformConstraints;\n        for (let i = 0, n = transformConstraints.length; i < n; i++) {\n            let constraint = transformConstraints[i];\n            if (constraint.data.name == constraintName)\n                return constraint;\n        }\n        return null;\n    }\n    /** Finds a path constraint by comparing each path constraint's name. It is more efficient to cache the results of this method\n     * than to call it repeatedly.\n     * @return May be null. */\n    findPathConstraint(constraintName) {\n        if (!constraintName)\n            throw new Error(\"constraintName cannot be null.\");\n        let pathConstraints = this.pathConstraints;\n        for (let i = 0, n = pathConstraints.length; i < n; i++) {\n            let constraint = pathConstraints[i];\n            if (constraint.data.name == constraintName)\n                return constraint;\n        }\n        return null;\n    }\n    /** Returns the axis aligned bounding box (AABB) of the region and mesh attachments for the current pose.\n     * @param offset An output value, the distance from the skeleton origin to the bottom left corner of the AABB.\n     * @param size An output value, the width and height of the AABB.\n     * @param temp Working memory to temporarily store attachments' computed world vertices. */\n    getBounds(offset, size, temp = new Array(2)) {\n        if (!offset)\n            throw new Error(\"offset cannot be null.\");\n        if (!size)\n            throw new Error(\"size cannot be null.\");\n        let drawOrder = this.drawOrder;\n        let minX = Number.POSITIVE_INFINITY, minY = Number.POSITIVE_INFINITY, maxX = Number.NEGATIVE_INFINITY, maxY = Number.NEGATIVE_INFINITY;\n        for (let i = 0, n = drawOrder.length; i < n; i++) {\n            let slot = drawOrder[i];\n            if (!slot.bone.active)\n                continue;\n            let verticesLength = 0;\n            let vertices = null;\n            let attachment = slot.getAttachment();\n            if (attachment instanceof RegionAttachment) {\n                verticesLength = 8;\n                vertices = Utils.setArraySize(temp, verticesLength, 0);\n                attachment.computeWorldVertices(slot.bone, vertices, 0, 2);\n            }\n            else if (attachment instanceof MeshAttachment) {\n                let mesh = attachment;\n                verticesLength = mesh.worldVerticesLength;\n                vertices = Utils.setArraySize(temp, verticesLength, 0);\n                mesh.computeWorldVertices(slot, 0, verticesLength, vertices, 0, 2);\n            }\n            if (vertices) {\n                for (let ii = 0, nn = vertices.length; ii < nn; ii += 2) {\n                    let x = vertices[ii], y = vertices[ii + 1];\n                    minX = Math.min(minX, x);\n                    minY = Math.min(minY, y);\n                    maxX = Math.max(maxX, x);\n                    maxY = Math.max(maxY, y);\n                }\n            }\n        }\n        offset.set(minX, minY);\n        size.set(maxX - minX, maxY - minY);\n    }\n    /** Increments the skeleton's {@link #time}. */\n    update(delta) {\n        this.time += delta;\n    }\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\n/** Stores the setup pose and all of the stateless data for a skeleton.\n *\n * See [Data objects](http://esotericsoftware.com/spine-runtime-architecture#Data-objects) in the Spine Runtimes\n * Guide. */\nexport class SkeletonData {\n    constructor() {\n        /** The skeleton's bones, sorted parent first. The root bone is always the first bone. */\n        this.bones = new Array(); // Ordered parents first.\n        /** The skeleton's slots. */\n        this.slots = new Array(); // Setup pose draw order.\n        this.skins = new Array();\n        /** The skeleton's events. */\n        this.events = new Array();\n        /** The skeleton's animations. */\n        this.animations = new Array();\n        /** The skeleton's IK constraints. */\n        this.ikConstraints = new Array();\n        /** The skeleton's transform constraints. */\n        this.transformConstraints = new Array();\n        /** The skeleton's path constraints. */\n        this.pathConstraints = new Array();\n        // Nonessential\n        /** The dopesheet FPS in Spine. Available only when nonessential data was exported. */\n        this.fps = 0;\n    }\n    /** Finds a bone by comparing each bone's name. It is more efficient to cache the results of this method than to call it\n     * multiple times.\n     * @returns May be null. */\n    findBone(boneName) {\n        if (!boneName)\n            throw new Error(\"boneName cannot be null.\");\n        let bones = this.bones;\n        for (let i = 0, n = bones.length; i < n; i++) {\n            let bone = bones[i];\n            if (bone.name == boneName)\n                return bone;\n        }\n        return null;\n    }\n    /** Finds a slot by comparing each slot's name. It is more efficient to cache the results of this method than to call it\n     * multiple times.\n     * @returns May be null. */\n    findSlot(slotName) {\n        if (!slotName)\n            throw new Error(\"slotName cannot be null.\");\n        let slots = this.slots;\n        for (let i = 0, n = slots.length; i < n; i++) {\n            let slot = slots[i];\n            if (slot.name == slotName)\n                return slot;\n        }\n        return null;\n    }\n    /** Finds a skin by comparing each skin's name. It is more efficient to cache the results of this method than to call it\n     * multiple times.\n     * @returns May be null. */\n    findSkin(skinName) {\n        if (!skinName)\n            throw new Error(\"skinName cannot be null.\");\n        let skins = this.skins;\n        for (let i = 0, n = skins.length; i < n; i++) {\n            let skin = skins[i];\n            if (skin.name == skinName)\n                return skin;\n        }\n        return null;\n    }\n    /** Finds an event by comparing each events's name. It is more efficient to cache the results of this method than to call it\n     * multiple times.\n     * @returns May be null. */\n    findEvent(eventDataName) {\n        if (!eventDataName)\n            throw new Error(\"eventDataName cannot be null.\");\n        let events = this.events;\n        for (let i = 0, n = events.length; i < n; i++) {\n            let event = events[i];\n            if (event.name == eventDataName)\n                return event;\n        }\n        return null;\n    }\n    /** Finds an animation by comparing each animation's name. It is more efficient to cache the results of this method than to\n     * call it multiple times.\n     * @returns May be null. */\n    findAnimation(animationName) {\n        if (!animationName)\n            throw new Error(\"animationName cannot be null.\");\n        let animations = this.animations;\n        for (let i = 0, n = animations.length; i < n; i++) {\n            let animation = animations[i];\n            if (animation.name == animationName)\n                return animation;\n        }\n        return null;\n    }\n    /** Finds an IK constraint by comparing each IK constraint's name. It is more efficient to cache the results of this method\n     * than to call it multiple times.\n     * @return May be null. */\n    findIkConstraint(constraintName) {\n        if (!constraintName)\n            throw new Error(\"constraintName cannot be null.\");\n        let ikConstraints = this.ikConstraints;\n        for (let i = 0, n = ikConstraints.length; i < n; i++) {\n            let constraint = ikConstraints[i];\n            if (constraint.name == constraintName)\n                return constraint;\n        }\n        return null;\n    }\n    /** Finds a transform constraint by comparing each transform constraint's name. It is more efficient to cache the results of\n     * this method than to call it multiple times.\n     * @return May be null. */\n    findTransformConstraint(constraintName) {\n        if (!constraintName)\n            throw new Error(\"constraintName cannot be null.\");\n        let transformConstraints = this.transformConstraints;\n        for (let i = 0, n = transformConstraints.length; i < n; i++) {\n            let constraint = transformConstraints[i];\n            if (constraint.name == constraintName)\n                return constraint;\n        }\n        return null;\n    }\n    /** Finds a path constraint by comparing each path constraint's name. It is more efficient to cache the results of this method\n     * than to call it multiple times.\n     * @return May be null. */\n    findPathConstraint(constraintName) {\n        if (!constraintName)\n            throw new Error(\"constraintName cannot be null.\");\n        let pathConstraints = this.pathConstraints;\n        for (let i = 0, n = pathConstraints.length; i < n; i++) {\n            let constraint = pathConstraints[i];\n            if (constraint.name == constraintName)\n                return constraint;\n        }\n        return null;\n    }\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { MeshAttachment } from \"./attachments/MeshAttachment\";\n/** Stores an entry in the skin consisting of the slot index, name, and attachment **/\nexport class SkinEntry {\n    constructor(slotIndex, name, attachment) {\n        this.slotIndex = slotIndex;\n        this.name = name;\n        this.attachment = attachment;\n    }\n}\n/** Stores attachments by slot index and attachment name.\n *\n * See SkeletonData {@link SkeletonData#defaultSkin}, Skeleton {@link Skeleton#skin}, and\n * [Runtime skins](http://esotericsoftware.com/spine-runtime-skins) in the Spine Runtimes Guide. */\nexport class Skin {\n    constructor(name) {\n        this.attachments = new Array();\n        this.bones = Array();\n        this.constraints = new Array();\n        if (!name)\n            throw new Error(\"name cannot be null.\");\n        this.name = name;\n    }\n    /** Adds an attachment to the skin for the specified slot index and name. */\n    setAttachment(slotIndex, name, attachment) {\n        if (!attachment)\n            throw new Error(\"attachment cannot be null.\");\n        let attachments = this.attachments;\n        if (slotIndex >= attachments.length)\n            attachments.length = slotIndex + 1;\n        if (!attachments[slotIndex])\n            attachments[slotIndex] = {};\n        attachments[slotIndex][name] = attachment;\n    }\n    /** Adds all attachments, bones, and constraints from the specified skin to this skin. */\n    addSkin(skin) {\n        for (let i = 0; i < skin.bones.length; i++) {\n            let bone = skin.bones[i];\n            let contained = false;\n            for (let ii = 0; ii < this.bones.length; ii++) {\n                if (this.bones[ii] == bone) {\n                    contained = true;\n                    break;\n                }\n            }\n            if (!contained)\n                this.bones.push(bone);\n        }\n        for (let i = 0; i < skin.constraints.length; i++) {\n            let constraint = skin.constraints[i];\n            let contained = false;\n            for (let ii = 0; ii < this.constraints.length; ii++) {\n                if (this.constraints[ii] == constraint) {\n                    contained = true;\n                    break;\n                }\n            }\n            if (!contained)\n                this.constraints.push(constraint);\n        }\n        let attachments = skin.getAttachments();\n        for (let i = 0; i < attachments.length; i++) {\n            var attachment = attachments[i];\n            this.setAttachment(attachment.slotIndex, attachment.name, attachment.attachment);\n        }\n    }\n    /** Adds all bones and constraints and copies of all attachments from the specified skin to this skin. Mesh attachments are not\n     * copied, instead a new linked mesh is created. The attachment copies can be modified without affecting the originals. */\n    copySkin(skin) {\n        for (let i = 0; i < skin.bones.length; i++) {\n            let bone = skin.bones[i];\n            let contained = false;\n            for (let ii = 0; ii < this.bones.length; ii++) {\n                if (this.bones[ii] == bone) {\n                    contained = true;\n                    break;\n                }\n            }\n            if (!contained)\n                this.bones.push(bone);\n        }\n        for (let i = 0; i < skin.constraints.length; i++) {\n            let constraint = skin.constraints[i];\n            let contained = false;\n            for (let ii = 0; ii < this.constraints.length; ii++) {\n                if (this.constraints[ii] == constraint) {\n                    contained = true;\n                    break;\n                }\n            }\n            if (!contained)\n                this.constraints.push(constraint);\n        }\n        let attachments = skin.getAttachments();\n        for (let i = 0; i < attachments.length; i++) {\n            var attachment = attachments[i];\n            if (!attachment.attachment)\n                continue;\n            if (attachment.attachment instanceof MeshAttachment) {\n                attachment.attachment = attachment.attachment.newLinkedMesh();\n                this.setAttachment(attachment.slotIndex, attachment.name, attachment.attachment);\n            }\n            else {\n                attachment.attachment = attachment.attachment.copy();\n                this.setAttachment(attachment.slotIndex, attachment.name, attachment.attachment);\n            }\n        }\n    }\n    /** Returns the attachment for the specified slot index and name, or null. */\n    getAttachment(slotIndex, name) {\n        let dictionary = this.attachments[slotIndex];\n        return dictionary ? dictionary[name] : null;\n    }\n    /** Removes the attachment in the skin for the specified slot index and name, if any. */\n    removeAttachment(slotIndex, name) {\n        let dictionary = this.attachments[slotIndex];\n        if (dictionary)\n            dictionary[name] = null;\n    }\n    /** Returns all attachments in this skin. */\n    getAttachments() {\n        let entries = new Array();\n        for (var i = 0; i < this.attachments.length; i++) {\n            let slotAttachments = this.attachments[i];\n            if (slotAttachments) {\n                for (let name in slotAttachments) {\n                    let attachment = slotAttachments[name];\n                    if (attachment)\n                        entries.push(new SkinEntry(i, name, attachment));\n                }\n            }\n        }\n        return entries;\n    }\n    /** Returns all attachments in this skin for the specified slot index. */\n    getAttachmentsForSlot(slotIndex, attachments) {\n        let slotAttachments = this.attachments[slotIndex];\n        if (slotAttachments) {\n            for (let name in slotAttachments) {\n                let attachment = slotAttachments[name];\n                if (attachment)\n                    attachments.push(new SkinEntry(slotIndex, name, attachment));\n            }\n        }\n    }\n    /** Clears all attachments, bones, and constraints. */\n    clear() {\n        this.attachments.length = 0;\n        this.bones.length = 0;\n        this.constraints.length = 0;\n    }\n    /** Attach each attachment in this skin if the corresponding attachment in the old skin is currently attached. */\n    attachAll(skeleton, oldSkin) {\n        let slotIndex = 0;\n        for (let i = 0; i < skeleton.slots.length; i++) {\n            let slot = skeleton.slots[i];\n            let slotAttachment = slot.getAttachment();\n            if (slotAttachment && slotIndex < oldSkin.attachments.length) {\n                let dictionary = oldSkin.attachments[slotIndex];\n                for (let key in dictionary) {\n                    let skinAttachment = dictionary[key];\n                    if (slotAttachment == skinAttachment) {\n                        let attachment = this.getAttachment(slotIndex, key);\n                        if (attachment)\n                            slot.setAttachment(attachment);\n                        break;\n                    }\n                }\n            }\n            slotIndex++;\n        }\n    }\n}","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { Color } from \"./Utils\";\n/** Stores the setup pose for a {@link Slot}. */\nexport class SlotData {\n    constructor(index, name, boneData) {\n        /** The color used to tint the slot's attachment. If {@link #getDarkColor()} is set, this is used as the light color for two\n         * color tinting. */\n        this.color = new Color(1, 1, 1, 1);\n        if (index < 0)\n            throw new Error(\"index must be >= 0.\");\n        if (!name)\n            throw new Error(\"name cannot be null.\");\n        if (!boneData)\n            throw new Error(\"boneData cannot be null.\");\n        this.index = index;\n        this.name = name;\n        this.boneData = boneData;\n    }\n}\n/** Determines how images are blended with existing pixels when drawn. */\nexport var BlendMode;\n(function (BlendMode) {\n    BlendMode[BlendMode[\"Normal\"] = 0] = \"Normal\";\n    BlendMode[BlendMode[\"Additive\"] = 1] = \"Additive\";\n    BlendMode[BlendMode[\"Multiply\"] = 2] = \"Multiply\";\n    BlendMode[BlendMode[\"Screen\"] = 3] = \"Screen\";\n})(BlendMode || (BlendMode = {}));","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { ConstraintData } from \"./ConstraintData\";\n/** Stores the setup pose for a {@link TransformConstraint}.\n *\n * See [Transform constraints](http://esotericsoftware.com/spine-transform-constraints) in the Spine User Guide. */\nexport class TransformConstraintData extends ConstraintData {\n    constructor(name) {\n        super(name, 0, false);\n        /** The bones that will be modified by this transform constraint. */\n        this.bones = new Array();\n        this.mixRotate = 0;\n        this.mixX = 0;\n        this.mixY = 0;\n        this.mixScaleX = 0;\n        this.mixScaleY = 0;\n        this.mixShearY = 0;\n        /** An offset added to the constrained bone rotation. */\n        this.offsetRotation = 0;\n        /** An offset added to the constrained bone X translation. */\n        this.offsetX = 0;\n        /** An offset added to the constrained bone Y translation. */\n        this.offsetY = 0;\n        /** An offset added to the constrained bone scaleX. */\n        this.offsetScaleX = 0;\n        /** An offset added to the constrained bone scaleY. */\n        this.offsetScaleY = 0;\n        /** An offset added to the constrained bone shearY. */\n        this.offsetShearY = 0;\n        this.relative = false;\n        this.local = false;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJhbnNmb3JtQ29uc3RyYWludERhdGEuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvVHJhbnNmb3JtQ29uc3RyYWludERhdGEudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsrRUEyQitFO0FBRS9FLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUdsRDs7bUhBRW1IO0FBQ25ILE1BQU0sT0FBTyx1QkFBd0IsU0FBUSxjQUFjO0lBb0MxRCxZQUFhLElBQVk7UUFDeEIsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFuQ3ZCLG9FQUFvRTtRQUNwRSxVQUFLLEdBQUcsSUFBSSxLQUFLLEVBQVksQ0FBQztRQUs5QixjQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsU0FBSSxHQUFHLENBQUMsQ0FBQztRQUNULFNBQUksR0FBRyxDQUFDLENBQUM7UUFDVCxjQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsY0FBUyxHQUFHLENBQUMsQ0FBQztRQUNkLGNBQVMsR0FBRyxDQUFDLENBQUM7UUFFZCx3REFBd0Q7UUFDeEQsbUJBQWMsR0FBRyxDQUFDLENBQUM7UUFFbkIsNkRBQTZEO1FBQzdELFlBQU8sR0FBRyxDQUFDLENBQUM7UUFFWiw2REFBNkQ7UUFDN0QsWUFBTyxHQUFHLENBQUMsQ0FBQztRQUVaLHNEQUFzRDtRQUN0RCxpQkFBWSxHQUFHLENBQUMsQ0FBQztRQUVqQixzREFBc0Q7UUFDdEQsaUJBQVksR0FBRyxDQUFDLENBQUM7UUFFakIsc0RBQXNEO1FBQ3RELGlCQUFZLEdBQUcsQ0FBQyxDQUFDO1FBRWpCLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFDakIsVUFBSyxHQUFHLEtBQUssQ0FBQztJQUlkLENBQUM7Q0FDRCJ9","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { Animation, AttachmentTimeline, RGBATimeline, RGBTimeline, RGBA2Timeline, RGB2Timeline, AlphaTimeline, RotateTimeline, TranslateTimeline, TranslateXTimeline, TranslateYTimeline, ScaleTimeline, ScaleXTimeline, ScaleYTimeline, ShearTimeline, ShearXTimeline, ShearYTimeline, IkConstraintTimeline, TransformConstraintTimeline, PathConstraintPositionTimeline, PathConstraintSpacingTimeline, PathConstraintMixTimeline, DeformTimeline, DrawOrderTimeline, EventTimeline } from \"./Animation\";\nimport { BoneData } from \"./BoneData\";\nimport { Event } from \"./Event\";\nimport { EventData } from \"./EventData\";\nimport { IkConstraintData } from \"./IkConstraintData\";\nimport { PathConstraintData, PositionMode, SpacingMode } from \"./PathConstraintData\";\nimport { SkeletonData } from \"./SkeletonData\";\nimport { Skin } from \"./Skin\";\nimport { SlotData } from \"./SlotData\";\nimport { TransformConstraintData } from \"./TransformConstraintData\";\nimport { Color, Utils } from \"./Utils\";\n/** Loads skeleton data in the Spine binary format.\n *\n * See [Spine binary format](http://esotericsoftware.com/spine-binary-format) and\n * [JSON and binary data](http://esotericsoftware.com/spine-loading-skeleton-data#JSON-and-binary-data) in the Spine\n * Runtimes Guide. */\nexport class SkeletonBinary {\n    constructor(attachmentLoader) {\n        /** Scales bone positions, image sizes, and translations as they are loaded. This allows different size images to be used at\n         * runtime than were used in Spine.\n         *\n         * See [Scaling](http://esotericsoftware.com/spine-loading-skeleton-data#Scaling) in the Spine Runtimes Guide. */\n        this.scale = 1;\n        this.linkedMeshes = new Array();\n        this.attachmentLoader = attachmentLoader;\n    }\n    readSkeletonData(binary) {\n        let scale = this.scale;\n        let skeletonData = new SkeletonData();\n        skeletonData.name = \"\"; // BOZO\n        let input = new BinaryInput(binary);\n        let lowHash = input.readInt32();\n        let highHash = input.readInt32();\n        skeletonData.hash = highHash == 0 && lowHash == 0 ? null : highHash.toString(16) + lowHash.toString(16);\n        skeletonData.version = input.readString();\n        skeletonData.x = input.readFloat();\n        skeletonData.y = input.readFloat();\n        skeletonData.width = input.readFloat();\n        skeletonData.height = input.readFloat();\n        let nonessential = input.readBoolean();\n        if (nonessential) {\n            skeletonData.fps = input.readFloat();\n            skeletonData.imagesPath = input.readString();\n            skeletonData.audioPath = input.readString();\n        }\n        let n = 0;\n        // Strings.\n        n = input.readInt(true);\n        for (let i = 0; i < n; i++)\n            input.strings.push(input.readString());\n        // Bones.\n        n = input.readInt(true);\n        for (let i = 0; i < n; i++) {\n            let name = input.readString();\n            let parent = i == 0 ? null : skeletonData.bones[input.readInt(true)];\n            let data = new BoneData(i, name, parent);\n            data.rotation = input.readFloat();\n            data.x = input.readFloat() * scale;\n            data.y = input.readFloat() * scale;\n            data.scaleX = input.readFloat();\n            data.scaleY = input.readFloat();\n            data.shearX = input.readFloat();\n            data.shearY = input.readFloat();\n            data.length = input.readFloat() * scale;\n            data.transformMode = input.readInt(true);\n            data.skinRequired = input.readBoolean();\n            if (nonessential)\n                Color.rgba8888ToColor(data.color, input.readInt32());\n            skeletonData.bones.push(data);\n        }\n        // Slots.\n        n = input.readInt(true);\n        for (let i = 0; i < n; i++) {\n            let slotName = input.readString();\n            let boneData = skeletonData.bones[input.readInt(true)];\n            let data = new SlotData(i, slotName, boneData);\n            Color.rgba8888ToColor(data.color, input.readInt32());\n            let darkColor = input.readInt32();\n            if (darkColor != -1)\n                Color.rgb888ToColor(data.darkColor = new Color(), darkColor);\n            data.attachmentName = input.readStringRef();\n            data.blendMode = input.readInt(true);\n            skeletonData.slots.push(data);\n        }\n        // IK constraints.\n        n = input.readInt(true);\n        for (let i = 0, nn; i < n; i++) {\n            let data = new IkConstraintData(input.readString());\n            data.order = input.readInt(true);\n            data.skinRequired = input.readBoolean();\n            nn = input.readInt(true);\n            for (let ii = 0; ii < nn; ii++)\n                data.bones.push(skeletonData.bones[input.readInt(true)]);\n            data.target = skeletonData.bones[input.readInt(true)];\n            data.mix = input.readFloat();\n            data.softness = input.readFloat() * scale;\n            data.bendDirection = input.readByte();\n            data.compress = input.readBoolean();\n            data.stretch = input.readBoolean();\n            data.uniform = input.readBoolean();\n            skeletonData.ikConstraints.push(data);\n        }\n        // Transform constraints.\n        n = input.readInt(true);\n        for (let i = 0, nn; i < n; i++) {\n            let data = new TransformConstraintData(input.readString());\n            data.order = input.readInt(true);\n            data.skinRequired = input.readBoolean();\n            nn = input.readInt(true);\n            for (let ii = 0; ii < nn; ii++)\n                data.bones.push(skeletonData.bones[input.readInt(true)]);\n            data.target = skeletonData.bones[input.readInt(true)];\n            data.local = input.readBoolean();\n            data.relative = input.readBoolean();\n            data.offsetRotation = input.readFloat();\n            data.offsetX = input.readFloat() * scale;\n            data.offsetY = input.readFloat() * scale;\n            data.offsetScaleX = input.readFloat();\n            data.offsetScaleY = input.readFloat();\n            data.offsetShearY = input.readFloat();\n            data.mixRotate = input.readFloat();\n            data.mixX = input.readFloat();\n            data.mixY = input.readFloat();\n            data.mixScaleX = input.readFloat();\n            data.mixScaleY = input.readFloat();\n            data.mixShearY = input.readFloat();\n            skeletonData.transformConstraints.push(data);\n        }\n        // Path constraints.\n        n = input.readInt(true);\n        for (let i = 0, nn; i < n; i++) {\n            let data = new PathConstraintData(input.readString());\n            data.order = input.readInt(true);\n            data.skinRequired = input.readBoolean();\n            nn = input.readInt(true);\n            for (let ii = 0; ii < nn; ii++)\n                data.bones.push(skeletonData.bones[input.readInt(true)]);\n            data.target = skeletonData.slots[input.readInt(true)];\n            data.positionMode = input.readInt(true);\n            data.spacingMode = input.readInt(true);\n            data.rotateMode = input.readInt(true);\n            data.offsetRotation = input.readFloat();\n            data.position = input.readFloat();\n            if (data.positionMode == PositionMode.Fixed)\n                data.position *= scale;\n            data.spacing = input.readFloat();\n            if (data.spacingMode == SpacingMode.Length || data.spacingMode == SpacingMode.Fixed)\n                data.spacing *= scale;\n            data.mixRotate = input.readFloat();\n            data.mixX = input.readFloat();\n            data.mixY = input.readFloat();\n            skeletonData.pathConstraints.push(data);\n        }\n        // Default skin.\n        let defaultSkin = this.readSkin(input, skeletonData, true, nonessential);\n        if (defaultSkin) {\n            skeletonData.defaultSkin = defaultSkin;\n            skeletonData.skins.push(defaultSkin);\n        }\n        // Skins.\n        {\n            let i = skeletonData.skins.length;\n            Utils.setArraySize(skeletonData.skins, n = i + input.readInt(true));\n            for (; i < n; i++)\n                skeletonData.skins[i] = this.readSkin(input, skeletonData, false, nonessential);\n        }\n        // Linked meshes.\n        n = this.linkedMeshes.length;\n        for (let i = 0; i < n; i++) {\n            let linkedMesh = this.linkedMeshes[i];\n            let skin = !linkedMesh.skin ? skeletonData.defaultSkin : skeletonData.findSkin(linkedMesh.skin);\n            let parent = skin.getAttachment(linkedMesh.slotIndex, linkedMesh.parent);\n            linkedMesh.mesh.deformAttachment = linkedMesh.inheritDeform ? parent : linkedMesh.mesh;\n            linkedMesh.mesh.setParentMesh(parent);\n            linkedMesh.mesh.updateUVs();\n        }\n        this.linkedMeshes.length = 0;\n        // Events.\n        n = input.readInt(true);\n        for (let i = 0; i < n; i++) {\n            let data = new EventData(input.readStringRef());\n            data.intValue = input.readInt(false);\n            data.floatValue = input.readFloat();\n            data.stringValue = input.readString();\n            data.audioPath = input.readString();\n            if (data.audioPath) {\n                data.volume = input.readFloat();\n                data.balance = input.readFloat();\n            }\n            skeletonData.events.push(data);\n        }\n        // Animations.\n        n = input.readInt(true);\n        for (let i = 0; i < n; i++)\n            skeletonData.animations.push(this.readAnimation(input, input.readString(), skeletonData));\n        return skeletonData;\n    }\n    readSkin(input, skeletonData, defaultSkin, nonessential) {\n        let skin = null;\n        let slotCount = 0;\n        if (defaultSkin) {\n            slotCount = input.readInt(true);\n            if (slotCount == 0)\n                return null;\n            skin = new Skin(\"default\");\n        }\n        else {\n            skin = new Skin(input.readStringRef());\n            skin.bones.length = input.readInt(true);\n            for (let i = 0, n = skin.bones.length; i < n; i++)\n                skin.bones[i] = skeletonData.bones[input.readInt(true)];\n            for (let i = 0, n = input.readInt(true); i < n; i++)\n                skin.constraints.push(skeletonData.ikConstraints[input.readInt(true)]);\n            for (let i = 0, n = input.readInt(true); i < n; i++)\n                skin.constraints.push(skeletonData.transformConstraints[input.readInt(true)]);\n            for (let i = 0, n = input.readInt(true); i < n; i++)\n                skin.constraints.push(skeletonData.pathConstraints[input.readInt(true)]);\n            slotCount = input.readInt(true);\n        }\n        for (let i = 0; i < slotCount; i++) {\n            let slotIndex = input.readInt(true);\n            for (let ii = 0, nn = input.readInt(true); ii < nn; ii++) {\n                let name = input.readStringRef();\n                let attachment = this.readAttachment(input, skeletonData, skin, slotIndex, name, nonessential);\n                if (attachment)\n                    skin.setAttachment(slotIndex, name, attachment);\n            }\n        }\n        return skin;\n    }\n    readAttachment(input, skeletonData, skin, slotIndex, attachmentName, nonessential) {\n        let scale = this.scale;\n        let name = input.readStringRef();\n        if (!name)\n            name = attachmentName;\n        switch (input.readByte()) {\n            case AttachmentType.Region: {\n                let path = input.readStringRef();\n                let rotation = input.readFloat();\n                let x = input.readFloat();\n                let y = input.readFloat();\n                let scaleX = input.readFloat();\n                let scaleY = input.readFloat();\n                let width = input.readFloat();\n                let height = input.readFloat();\n                let color = input.readInt32();\n                if (!path)\n                    path = name;\n                let region = this.attachmentLoader.newRegionAttachment(skin, name, path);\n                if (!region)\n                    return null;\n                region.path = path;\n                region.x = x * scale;\n                region.y = y * scale;\n                region.scaleX = scaleX;\n                region.scaleY = scaleY;\n                region.rotation = rotation;\n                region.width = width * scale;\n                region.height = height * scale;\n                Color.rgba8888ToColor(region.color, color);\n                region.updateOffset();\n                return region;\n            }\n            case AttachmentType.BoundingBox: {\n                let vertexCount = input.readInt(true);\n                let vertices = this.readVertices(input, vertexCount);\n                let color = nonessential ? input.readInt32() : 0;\n                let box = this.attachmentLoader.newBoundingBoxAttachment(skin, name);\n                if (!box)\n                    return null;\n                box.worldVerticesLength = vertexCount << 1;\n                box.vertices = vertices.vertices;\n                box.bones = vertices.bones;\n                if (nonessential)\n                    Color.rgba8888ToColor(box.color, color);\n                return box;\n            }\n            case AttachmentType.Mesh: {\n                let path = input.readStringRef();\n                let color = input.readInt32();\n                let vertexCount = input.readInt(true);\n                let uvs = this.readFloatArray(input, vertexCount << 1, 1);\n                let triangles = this.readShortArray(input);\n                let vertices = this.readVertices(input, vertexCount);\n                let hullLength = input.readInt(true);\n                let edges = null;\n                let width = 0, height = 0;\n                if (nonessential) {\n                    edges = this.readShortArray(input);\n                    width = input.readFloat();\n                    height = input.readFloat();\n                }\n                if (!path)\n                    path = name;\n                let mesh = this.attachmentLoader.newMeshAttachment(skin, name, path);\n                if (!mesh)\n                    return null;\n                mesh.path = path;\n                Color.rgba8888ToColor(mesh.color, color);\n                mesh.bones = vertices.bones;\n                mesh.vertices = vertices.vertices;\n                mesh.worldVerticesLength = vertexCount << 1;\n                mesh.triangles = triangles;\n                mesh.regionUVs = uvs;\n                mesh.updateUVs();\n                mesh.hullLength = hullLength << 1;\n                if (nonessential) {\n                    mesh.edges = edges;\n                    mesh.width = width * scale;\n                    mesh.height = height * scale;\n                }\n                return mesh;\n            }\n            case AttachmentType.LinkedMesh: {\n                let path = input.readStringRef();\n                let color = input.readInt32();\n                let skinName = input.readStringRef();\n                let parent = input.readStringRef();\n                let inheritDeform = input.readBoolean();\n                let width = 0, height = 0;\n                if (nonessential) {\n                    width = input.readFloat();\n                    height = input.readFloat();\n                }\n                if (!path)\n                    path = name;\n                let mesh = this.attachmentLoader.newMeshAttachment(skin, name, path);\n                if (!mesh)\n                    return null;\n                mesh.path = path;\n                Color.rgba8888ToColor(mesh.color, color);\n                if (nonessential) {\n                    mesh.width = width * scale;\n                    mesh.height = height * scale;\n                }\n                this.linkedMeshes.push(new LinkedMesh(mesh, skinName, slotIndex, parent, inheritDeform));\n                return mesh;\n            }\n            case AttachmentType.Path: {\n                let closed = input.readBoolean();\n                let constantSpeed = input.readBoolean();\n                let vertexCount = input.readInt(true);\n                let vertices = this.readVertices(input, vertexCount);\n                let lengths = Utils.newArray(vertexCount / 3, 0);\n                for (let i = 0, n = lengths.length; i < n; i++)\n                    lengths[i] = input.readFloat() * scale;\n                let color = nonessential ? input.readInt32() : 0;\n                let path = this.attachmentLoader.newPathAttachment(skin, name);\n                if (!path)\n                    return null;\n                path.closed = closed;\n                path.constantSpeed = constantSpeed;\n                path.worldVerticesLength = vertexCount << 1;\n                path.vertices = vertices.vertices;\n                path.bones = vertices.bones;\n                path.lengths = lengths;\n                if (nonessential)\n                    Color.rgba8888ToColor(path.color, color);\n                return path;\n            }\n            case AttachmentType.Point: {\n                let rotation = input.readFloat();\n                let x = input.readFloat();\n                let y = input.readFloat();\n                let color = nonessential ? input.readInt32() : 0;\n                let point = this.attachmentLoader.newPointAttachment(skin, name);\n                if (!point)\n                    return null;\n                point.x = x * scale;\n                point.y = y * scale;\n                point.rotation = rotation;\n                if (nonessential)\n                    Color.rgba8888ToColor(point.color, color);\n                return point;\n            }\n            case AttachmentType.Clipping: {\n                let endSlotIndex = input.readInt(true);\n                let vertexCount = input.readInt(true);\n                let vertices = this.readVertices(input, vertexCount);\n                let color = nonessential ? input.readInt32() : 0;\n                let clip = this.attachmentLoader.newClippingAttachment(skin, name);\n                if (!clip)\n                    return null;\n                clip.endSlot = skeletonData.slots[endSlotIndex];\n                clip.worldVerticesLength = vertexCount << 1;\n                clip.vertices = vertices.vertices;\n                clip.bones = vertices.bones;\n                if (nonessential)\n                    Color.rgba8888ToColor(clip.color, color);\n                return clip;\n            }\n        }\n        return null;\n    }\n    readVertices(input, vertexCount) {\n        let scale = this.scale;\n        let verticesLength = vertexCount << 1;\n        let vertices = new Vertices();\n        if (!input.readBoolean()) {\n            vertices.vertices = this.readFloatArray(input, verticesLength, scale);\n            return vertices;\n        }\n        let weights = new Array();\n        let bonesArray = new Array();\n        for (let i = 0; i < vertexCount; i++) {\n            let boneCount = input.readInt(true);\n            bonesArray.push(boneCount);\n            for (let ii = 0; ii < boneCount; ii++) {\n                bonesArray.push(input.readInt(true));\n                weights.push(input.readFloat() * scale);\n                weights.push(input.readFloat() * scale);\n                weights.push(input.readFloat());\n            }\n        }\n        vertices.vertices = Utils.toFloatArray(weights);\n        vertices.bones = bonesArray;\n        return vertices;\n    }\n    readFloatArray(input, n, scale) {\n        let array = new Array(n);\n        if (scale == 1) {\n            for (let i = 0; i < n; i++)\n                array[i] = input.readFloat();\n        }\n        else {\n            for (let i = 0; i < n; i++)\n                array[i] = input.readFloat() * scale;\n        }\n        return array;\n    }\n    readShortArray(input) {\n        let n = input.readInt(true);\n        let array = new Array(n);\n        for (let i = 0; i < n; i++)\n            array[i] = input.readShort();\n        return array;\n    }\n    readAnimation(input, name, skeletonData) {\n        input.readInt(true); // Number of timelines.\n        let timelines = new Array();\n        let scale = this.scale;\n        let tempColor1 = new Color();\n        let tempColor2 = new Color();\n        // Slot timelines.\n        for (let i = 0, n = input.readInt(true); i < n; i++) {\n            let slotIndex = input.readInt(true);\n            for (let ii = 0, nn = input.readInt(true); ii < nn; ii++) {\n                let timelineType = input.readByte();\n                let frameCount = input.readInt(true);\n                let frameLast = frameCount - 1;\n                switch (timelineType) {\n                    case SLOT_ATTACHMENT: {\n                        let timeline = new AttachmentTimeline(frameCount, slotIndex);\n                        for (let frame = 0; frame < frameCount; frame++)\n                            timeline.setFrame(frame, input.readFloat(), input.readStringRef());\n                        timelines.push(timeline);\n                        break;\n                    }\n                    case SLOT_RGBA: {\n                        let bezierCount = input.readInt(true);\n                        let timeline = new RGBATimeline(frameCount, bezierCount, slotIndex);\n                        let time = input.readFloat();\n                        let r = input.readUnsignedByte() / 255.0;\n                        let g = input.readUnsignedByte() / 255.0;\n                        let b = input.readUnsignedByte() / 255.0;\n                        let a = input.readUnsignedByte() / 255.0;\n                        for (let frame = 0, bezier = 0;; frame++) {\n                            timeline.setFrame(frame, time, r, g, b, a);\n                            if (frame == frameLast)\n                                break;\n                            let time2 = input.readFloat();\n                            let r2 = input.readUnsignedByte() / 255.0;\n                            let g2 = input.readUnsignedByte() / 255.0;\n                            let b2 = input.readUnsignedByte() / 255.0;\n                            let a2 = input.readUnsignedByte() / 255.0;\n                            switch (input.readByte()) {\n                                case CURVE_STEPPED:\n                                    timeline.setStepped(frame);\n                                    break;\n                                case CURVE_BEZIER:\n                                    setBezier(input, timeline, bezier++, frame, 0, time, time2, r, r2, 1);\n                                    setBezier(input, timeline, bezier++, frame, 1, time, time2, g, g2, 1);\n                                    setBezier(input, timeline, bezier++, frame, 2, time, time2, b, b2, 1);\n                                    setBezier(input, timeline, bezier++, frame, 3, time, time2, a, a2, 1);\n                            }\n                            time = time2;\n                            r = r2;\n                            g = g2;\n                            b = b2;\n                            a = a2;\n                        }\n                        timelines.push(timeline);\n                        break;\n                    }\n                    case SLOT_RGB: {\n                        let bezierCount = input.readInt(true);\n                        let timeline = new RGBTimeline(frameCount, bezierCount, slotIndex);\n                        let time = input.readFloat();\n                        let r = input.readUnsignedByte() / 255.0;\n                        let g = input.readUnsignedByte() / 255.0;\n                        let b = input.readUnsignedByte() / 255.0;\n                        for (let frame = 0, bezier = 0;; frame++) {\n                            timeline.setFrame(frame, time, r, g, b);\n                            if (frame == frameLast)\n                                break;\n                            let time2 = input.readFloat();\n                            let r2 = input.readUnsignedByte() / 255.0;\n                            let g2 = input.readUnsignedByte() / 255.0;\n                            let b2 = input.readUnsignedByte() / 255.0;\n                            switch (input.readByte()) {\n                                case CURVE_STEPPED:\n                                    timeline.setStepped(frame);\n                                    break;\n                                case CURVE_BEZIER:\n                                    setBezier(input, timeline, bezier++, frame, 0, time, time2, r, r2, 1);\n                                    setBezier(input, timeline, bezier++, frame, 1, time, time2, g, g2, 1);\n                                    setBezier(input, timeline, bezier++, frame, 2, time, time2, b, b2, 1);\n                            }\n                            time = time2;\n                            r = r2;\n                            g = g2;\n                            b = b2;\n                        }\n                        timelines.push(timeline);\n                        break;\n                    }\n                    case SLOT_RGBA2: {\n                        let bezierCount = input.readInt(true);\n                        let timeline = new RGBA2Timeline(frameCount, bezierCount, slotIndex);\n                        let time = input.readFloat();\n                        let r = input.readUnsignedByte() / 255.0;\n                        let g = input.readUnsignedByte() / 255.0;\n                        let b = input.readUnsignedByte() / 255.0;\n                        let a = input.readUnsignedByte() / 255.0;\n                        let r2 = input.readUnsignedByte() / 255.0;\n                        let g2 = input.readUnsignedByte() / 255.0;\n                        let b2 = input.readUnsignedByte() / 255.0;\n                        for (let frame = 0, bezier = 0;; frame++) {\n                            timeline.setFrame(frame, time, r, g, b, a, r2, g2, b2);\n                            if (frame == frameLast)\n                                break;\n                            let time2 = input.readFloat();\n                            let nr = input.readUnsignedByte() / 255.0;\n                            let ng = input.readUnsignedByte() / 255.0;\n                            let nb = input.readUnsignedByte() / 255.0;\n                            let na = input.readUnsignedByte() / 255.0;\n                            let nr2 = input.readUnsignedByte() / 255.0;\n                            let ng2 = input.readUnsignedByte() / 255.0;\n                            let nb2 = input.readUnsignedByte() / 255.0;\n                            switch (input.readByte()) {\n                                case CURVE_STEPPED:\n                                    timeline.setStepped(frame);\n                                    break;\n                                case CURVE_BEZIER:\n                                    setBezier(input, timeline, bezier++, frame, 0, time, time2, r, nr, 1);\n                                    setBezier(input, timeline, bezier++, frame, 1, time, time2, g, ng, 1);\n                                    setBezier(input, timeline, bezier++, frame, 2, time, time2, b, nb, 1);\n                                    setBezier(input, timeline, bezier++, frame, 3, time, time2, a, na, 1);\n                                    setBezier(input, timeline, bezier++, frame, 4, time, time2, r2, nr2, 1);\n                                    setBezier(input, timeline, bezier++, frame, 5, time, time2, g2, ng2, 1);\n                                    setBezier(input, timeline, bezier++, frame, 6, time, time2, b2, nb2, 1);\n                            }\n                            time = time2;\n                            r = nr;\n                            g = ng;\n                            b = nb;\n                            a = na;\n                            r2 = nr2;\n                            g2 = ng2;\n                            b2 = nb2;\n                        }\n                        timelines.push(timeline);\n                        break;\n                    }\n                    case SLOT_RGB2: {\n                        let bezierCount = input.readInt(true);\n                        let timeline = new RGB2Timeline(frameCount, bezierCount, slotIndex);\n                        let time = input.readFloat();\n                        let r = input.readUnsignedByte() / 255.0;\n                        let g = input.readUnsignedByte() / 255.0;\n                        let b = input.readUnsignedByte() / 255.0;\n                        let r2 = input.readUnsignedByte() / 255.0;\n                        let g2 = input.readUnsignedByte() / 255.0;\n                        let b2 = input.readUnsignedByte() / 255.0;\n                        for (let frame = 0, bezier = 0;; frame++) {\n                            timeline.setFrame(frame, time, r, g, b, r2, g2, b2);\n                            if (frame == frameLast)\n                                break;\n                            let time2 = input.readFloat();\n                            let nr = input.readUnsignedByte() / 255.0;\n                            let ng = input.readUnsignedByte() / 255.0;\n                            let nb = input.readUnsignedByte() / 255.0;\n                            let nr2 = input.readUnsignedByte() / 255.0;\n                            let ng2 = input.readUnsignedByte() / 255.0;\n                            let nb2 = input.readUnsignedByte() / 255.0;\n                            switch (input.readByte()) {\n                                case CURVE_STEPPED:\n                                    timeline.setStepped(frame);\n                                    break;\n                                case CURVE_BEZIER:\n                                    setBezier(input, timeline, bezier++, frame, 0, time, time2, r, nr, 1);\n                                    setBezier(input, timeline, bezier++, frame, 1, time, time2, g, ng, 1);\n                                    setBezier(input, timeline, bezier++, frame, 2, time, time2, b, nb, 1);\n                                    setBezier(input, timeline, bezier++, frame, 3, time, time2, r2, nr2, 1);\n                                    setBezier(input, timeline, bezier++, frame, 4, time, time2, g2, ng2, 1);\n                                    setBezier(input, timeline, bezier++, frame, 5, time, time2, b2, nb2, 1);\n                            }\n                            time = time2;\n                            r = nr;\n                            g = ng;\n                            b = nb;\n                            r2 = nr2;\n                            g2 = ng2;\n                            b2 = nb2;\n                        }\n                        timelines.push(timeline);\n                        break;\n                    }\n                    case SLOT_ALPHA: {\n                        let timeline = new AlphaTimeline(frameCount, input.readInt(true), slotIndex);\n                        let time = input.readFloat(), a = input.readUnsignedByte() / 255;\n                        for (let frame = 0, bezier = 0;; frame++) {\n                            timeline.setFrame(frame, time, a);\n                            if (frame == frameLast)\n                                break;\n                            let time2 = input.readFloat();\n                            let a2 = input.readUnsignedByte() / 255;\n                            switch (input.readByte()) {\n                                case CURVE_STEPPED:\n                                    timeline.setStepped(frame);\n                                    break;\n                                case CURVE_BEZIER:\n                                    setBezier(input, timeline, bezier++, frame, 0, time, time2, a, a2, 1);\n                            }\n                            time = time2;\n                            a = a2;\n                        }\n                        timelines.push(timeline);\n                        break;\n                    }\n                }\n            }\n        }\n        // Bone timelines.\n        for (let i = 0, n = input.readInt(true); i < n; i++) {\n            let boneIndex = input.readInt(true);\n            for (let ii = 0, nn = input.readInt(true); ii < nn; ii++) {\n                let type = input.readByte(), frameCount = input.readInt(true), bezierCount = input.readInt(true);\n                switch (type) {\n                    case BONE_ROTATE:\n                        timelines.push(readTimeline1(input, new RotateTimeline(frameCount, bezierCount, boneIndex), 1));\n                        break;\n                    case BONE_TRANSLATE:\n                        timelines.push(readTimeline2(input, new TranslateTimeline(frameCount, bezierCount, boneIndex), scale));\n                        break;\n                    case BONE_TRANSLATEX:\n                        timelines.push(readTimeline1(input, new TranslateXTimeline(frameCount, bezierCount, boneIndex), scale));\n                        break;\n                    case BONE_TRANSLATEY:\n                        timelines.push(readTimeline1(input, new TranslateYTimeline(frameCount, bezierCount, boneIndex), scale));\n                        break;\n                    case BONE_SCALE:\n                        timelines.push(readTimeline2(input, new ScaleTimeline(frameCount, bezierCount, boneIndex), 1));\n                        break;\n                    case BONE_SCALEX:\n                        timelines.push(readTimeline1(input, new ScaleXTimeline(frameCount, bezierCount, boneIndex), 1));\n                        break;\n                    case BONE_SCALEY:\n                        timelines.push(readTimeline1(input, new ScaleYTimeline(frameCount, bezierCount, boneIndex), 1));\n                        break;\n                    case BONE_SHEAR:\n                        timelines.push(readTimeline2(input, new ShearTimeline(frameCount, bezierCount, boneIndex), 1));\n                        break;\n                    case BONE_SHEARX:\n                        timelines.push(readTimeline1(input, new ShearXTimeline(frameCount, bezierCount, boneIndex), 1));\n                        break;\n                    case BONE_SHEARY:\n                        timelines.push(readTimeline1(input, new ShearYTimeline(frameCount, bezierCount, boneIndex), 1));\n                }\n            }\n        }\n        // IK constraint timelines.\n        for (let i = 0, n = input.readInt(true); i < n; i++) {\n            let index = input.readInt(true), frameCount = input.readInt(true), frameLast = frameCount - 1;\n            let timeline = new IkConstraintTimeline(frameCount, input.readInt(true), index);\n            let time = input.readFloat(), mix = input.readFloat(), softness = input.readFloat() * scale;\n            for (let frame = 0, bezier = 0;; frame++) {\n                timeline.setFrame(frame, time, mix, softness, input.readByte(), input.readBoolean(), input.readBoolean());\n                if (frame == frameLast)\n                    break;\n                let time2 = input.readFloat(), mix2 = input.readFloat(), softness2 = input.readFloat() * scale;\n                switch (input.readByte()) {\n                    case CURVE_STEPPED:\n                        timeline.setStepped(frame);\n                        break;\n                    case CURVE_BEZIER:\n                        setBezier(input, timeline, bezier++, frame, 0, time, time2, mix, mix2, 1);\n                        setBezier(input, timeline, bezier++, frame, 1, time, time2, softness, softness2, scale);\n                }\n                time = time2;\n                mix = mix2;\n                softness = softness2;\n            }\n            timelines.push(timeline);\n        }\n        // Transform constraint timelines.\n        for (let i = 0, n = input.readInt(true); i < n; i++) {\n            let index = input.readInt(true), frameCount = input.readInt(true), frameLast = frameCount - 1;\n            let timeline = new TransformConstraintTimeline(frameCount, input.readInt(true), index);\n            let time = input.readFloat(), mixRotate = input.readFloat(), mixX = input.readFloat(), mixY = input.readFloat(), mixScaleX = input.readFloat(), mixScaleY = input.readFloat(), mixShearY = input.readFloat();\n            for (let frame = 0, bezier = 0;; frame++) {\n                timeline.setFrame(frame, time, mixRotate, mixX, mixY, mixScaleX, mixScaleY, mixShearY);\n                if (frame == frameLast)\n                    break;\n                let time2 = input.readFloat(), mixRotate2 = input.readFloat(), mixX2 = input.readFloat(), mixY2 = input.readFloat(), mixScaleX2 = input.readFloat(), mixScaleY2 = input.readFloat(), mixShearY2 = input.readFloat();\n                switch (input.readByte()) {\n                    case CURVE_STEPPED:\n                        timeline.setStepped(frame);\n                        break;\n                    case CURVE_BEZIER:\n                        setBezier(input, timeline, bezier++, frame, 0, time, time2, mixRotate, mixRotate2, 1);\n                        setBezier(input, timeline, bezier++, frame, 1, time, time2, mixX, mixX2, 1);\n                        setBezier(input, timeline, bezier++, frame, 2, time, time2, mixY, mixY2, 1);\n                        setBezier(input, timeline, bezier++, frame, 3, time, time2, mixScaleX, mixScaleX2, 1);\n                        setBezier(input, timeline, bezier++, frame, 4, time, time2, mixScaleY, mixScaleY2, 1);\n                        setBezier(input, timeline, bezier++, frame, 5, time, time2, mixShearY, mixShearY2, 1);\n                }\n                time = time2;\n                mixRotate = mixRotate2;\n                mixX = mixX2;\n                mixY = mixY2;\n                mixScaleX = mixScaleX2;\n                mixScaleY = mixScaleY2;\n                mixShearY = mixShearY2;\n            }\n            timelines.push(timeline);\n        }\n        // Path constraint timelines.\n        for (let i = 0, n = input.readInt(true); i < n; i++) {\n            let index = input.readInt(true);\n            let data = skeletonData.pathConstraints[index];\n            for (let ii = 0, nn = input.readInt(true); ii < nn; ii++) {\n                switch (input.readByte()) {\n                    case PATH_POSITION:\n                        timelines\n                            .push(readTimeline1(input, new PathConstraintPositionTimeline(input.readInt(true), input.readInt(true), index), data.positionMode == PositionMode.Fixed ? scale : 1));\n                        break;\n                    case PATH_SPACING:\n                        timelines\n                            .push(readTimeline1(input, new PathConstraintSpacingTimeline(input.readInt(true), input.readInt(true), index), data.spacingMode == SpacingMode.Length || data.spacingMode == SpacingMode.Fixed ? scale : 1));\n                        break;\n                    case PATH_MIX:\n                        let timeline = new PathConstraintMixTimeline(input.readInt(true), input.readInt(true), index);\n                        let time = input.readFloat(), mixRotate = input.readFloat(), mixX = input.readFloat(), mixY = input.readFloat();\n                        for (let frame = 0, bezier = 0, frameLast = timeline.getFrameCount() - 1;; frame++) {\n                            timeline.setFrame(frame, time, mixRotate, mixX, mixY);\n                            if (frame == frameLast)\n                                break;\n                            let time2 = input.readFloat(), mixRotate2 = input.readFloat(), mixX2 = input.readFloat(), mixY2 = input.readFloat();\n                            switch (input.readByte()) {\n                                case CURVE_STEPPED:\n                                    timeline.setStepped(frame);\n                                    break;\n                                case CURVE_BEZIER:\n                                    setBezier(input, timeline, bezier++, frame, 0, time, time2, mixRotate, mixRotate2, 1);\n                                    setBezier(input, timeline, bezier++, frame, 1, time, time2, mixX, mixX2, 1);\n                                    setBezier(input, timeline, bezier++, frame, 2, time, time2, mixY, mixY2, 1);\n                            }\n                            time = time2;\n                            mixRotate = mixRotate2;\n                            mixX = mixX2;\n                            mixY = mixY2;\n                        }\n                        timelines.push(timeline);\n                }\n            }\n        }\n        // Deform timelines.\n        for (let i = 0, n = input.readInt(true); i < n; i++) {\n            let skin = skeletonData.skins[input.readInt(true)];\n            for (let ii = 0, nn = input.readInt(true); ii < nn; ii++) {\n                let slotIndex = input.readInt(true);\n                for (let iii = 0, nnn = input.readInt(true); iii < nnn; iii++) {\n                    let attachmentName = input.readStringRef();\n                    let attachment = skin.getAttachment(slotIndex, attachmentName);\n                    let weighted = attachment.bones;\n                    let vertices = attachment.vertices;\n                    let deformLength = weighted ? vertices.length / 3 * 2 : vertices.length;\n                    let frameCount = input.readInt(true);\n                    let frameLast = frameCount - 1;\n                    let bezierCount = input.readInt(true);\n                    let timeline = new DeformTimeline(frameCount, bezierCount, slotIndex, attachment);\n                    let time = input.readFloat();\n                    for (let frame = 0, bezier = 0;; frame++) {\n                        let deform;\n                        let end = input.readInt(true);\n                        if (end == 0)\n                            deform = weighted ? Utils.newFloatArray(deformLength) : vertices;\n                        else {\n                            deform = Utils.newFloatArray(deformLength);\n                            let start = input.readInt(true);\n                            end += start;\n                            if (scale == 1) {\n                                for (let v = start; v < end; v++)\n                                    deform[v] = input.readFloat();\n                            }\n                            else {\n                                for (let v = start; v < end; v++)\n                                    deform[v] = input.readFloat() * scale;\n                            }\n                            if (!weighted) {\n                                for (let v = 0, vn = deform.length; v < vn; v++)\n                                    deform[v] += vertices[v];\n                            }\n                        }\n                        timeline.setFrame(frame, time, deform);\n                        if (frame == frameLast)\n                            break;\n                        let time2 = input.readFloat();\n                        switch (input.readByte()) {\n                            case CURVE_STEPPED:\n                                timeline.setStepped(frame);\n                                break;\n                            case CURVE_BEZIER:\n                                setBezier(input, timeline, bezier++, frame, 0, time, time2, 0, 1, 1);\n                        }\n                        time = time2;\n                    }\n                    timelines.push(timeline);\n                }\n            }\n        }\n        // Draw order timeline.\n        let drawOrderCount = input.readInt(true);\n        if (drawOrderCount > 0) {\n            let timeline = new DrawOrderTimeline(drawOrderCount);\n            let slotCount = skeletonData.slots.length;\n            for (let i = 0; i < drawOrderCount; i++) {\n                let time = input.readFloat();\n                let offsetCount = input.readInt(true);\n                let drawOrder = Utils.newArray(slotCount, 0);\n                for (let ii = slotCount - 1; ii >= 0; ii--)\n                    drawOrder[ii] = -1;\n                let unchanged = Utils.newArray(slotCount - offsetCount, 0);\n                let originalIndex = 0, unchangedIndex = 0;\n                for (let ii = 0; ii < offsetCount; ii++) {\n                    let slotIndex = input.readInt(true);\n                    // Collect unchanged items.\n                    while (originalIndex != slotIndex)\n                        unchanged[unchangedIndex++] = originalIndex++;\n                    // Set changed items.\n                    drawOrder[originalIndex + input.readInt(true)] = originalIndex++;\n                }\n                // Collect remaining unchanged items.\n                while (originalIndex < slotCount)\n                    unchanged[unchangedIndex++] = originalIndex++;\n                // Fill in unchanged items.\n                for (let ii = slotCount - 1; ii >= 0; ii--)\n                    if (drawOrder[ii] == -1)\n                        drawOrder[ii] = unchanged[--unchangedIndex];\n                timeline.setFrame(i, time, drawOrder);\n            }\n            timelines.push(timeline);\n        }\n        // Event timeline.\n        let eventCount = input.readInt(true);\n        if (eventCount > 0) {\n            let timeline = new EventTimeline(eventCount);\n            for (let i = 0; i < eventCount; i++) {\n                let time = input.readFloat();\n                let eventData = skeletonData.events[input.readInt(true)];\n                let event = new Event(time, eventData);\n                event.intValue = input.readInt(false);\n                event.floatValue = input.readFloat();\n                event.stringValue = input.readBoolean() ? input.readString() : eventData.stringValue;\n                if (event.data.audioPath) {\n                    event.volume = input.readFloat();\n                    event.balance = input.readFloat();\n                }\n                timeline.setFrame(i, event);\n            }\n            timelines.push(timeline);\n        }\n        let duration = 0;\n        for (let i = 0, n = timelines.length; i < n; i++)\n            duration = Math.max(duration, timelines[i].getDuration());\n        return new Animation(name, timelines, duration);\n    }\n}\nexport class BinaryInput {\n    constructor(data, strings = new Array(), index = 0, buffer = new DataView(data.buffer)) {\n        this.strings = strings;\n        this.index = index;\n        this.buffer = buffer;\n    }\n    readByte() {\n        return this.buffer.getInt8(this.index++);\n    }\n    readUnsignedByte() {\n        return this.buffer.getUint8(this.index++);\n    }\n    readShort() {\n        let value = this.buffer.getInt16(this.index);\n        this.index += 2;\n        return value;\n    }\n    readInt32() {\n        let value = this.buffer.getInt32(this.index);\n        this.index += 4;\n        return value;\n    }\n    readInt(optimizePositive) {\n        let b = this.readByte();\n        let result = b & 0x7F;\n        if ((b & 0x80) != 0) {\n            b = this.readByte();\n            result |= (b & 0x7F) << 7;\n            if ((b & 0x80) != 0) {\n                b = this.readByte();\n                result |= (b & 0x7F) << 14;\n                if ((b & 0x80) != 0) {\n                    b = this.readByte();\n                    result |= (b & 0x7F) << 21;\n                    if ((b & 0x80) != 0) {\n                        b = this.readByte();\n                        result |= (b & 0x7F) << 28;\n                    }\n                }\n            }\n        }\n        return optimizePositive ? result : ((result >>> 1) ^ -(result & 1));\n    }\n    readStringRef() {\n        let index = this.readInt(true);\n        return index == 0 ? null : this.strings[index - 1];\n    }\n    readString() {\n        let byteCount = this.readInt(true);\n        switch (byteCount) {\n            case 0:\n                return null;\n            case 1:\n                return \"\";\n        }\n        byteCount--;\n        let chars = \"\";\n        let charCount = 0;\n        for (let i = 0; i < byteCount;) {\n            let b = this.readByte();\n            switch (b >> 4) {\n                case 12:\n                case 13:\n                    chars += String.fromCharCode(((b & 0x1F) << 6 | this.readByte() & 0x3F));\n                    i += 2;\n                    break;\n                case 14:\n                    chars += String.fromCharCode(((b & 0x0F) << 12 | (this.readByte() & 0x3F) << 6 | this.readByte() & 0x3F));\n                    i += 3;\n                    break;\n                default:\n                    chars += String.fromCharCode(b);\n                    i++;\n            }\n        }\n        return chars;\n    }\n    readFloat() {\n        let value = this.buffer.getFloat32(this.index);\n        this.index += 4;\n        return value;\n    }\n    readBoolean() {\n        return this.readByte() != 0;\n    }\n}\nclass LinkedMesh {\n    constructor(mesh, skin, slotIndex, parent, inheritDeform) {\n        this.mesh = mesh;\n        this.skin = skin;\n        this.slotIndex = slotIndex;\n        this.parent = parent;\n        this.inheritDeform = inheritDeform;\n    }\n}\nclass Vertices {\n    constructor(bones = null, vertices = null) {\n        this.bones = bones;\n        this.vertices = vertices;\n    }\n}\nvar AttachmentType;\n(function (AttachmentType) {\n    AttachmentType[AttachmentType[\"Region\"] = 0] = \"Region\";\n    AttachmentType[AttachmentType[\"BoundingBox\"] = 1] = \"BoundingBox\";\n    AttachmentType[AttachmentType[\"Mesh\"] = 2] = \"Mesh\";\n    AttachmentType[AttachmentType[\"LinkedMesh\"] = 3] = \"LinkedMesh\";\n    AttachmentType[AttachmentType[\"Path\"] = 4] = \"Path\";\n    AttachmentType[AttachmentType[\"Point\"] = 5] = \"Point\";\n    AttachmentType[AttachmentType[\"Clipping\"] = 6] = \"Clipping\";\n})(AttachmentType || (AttachmentType = {}));\nfunction readTimeline1(input, timeline, scale) {\n    let time = input.readFloat(), value = input.readFloat() * scale;\n    for (let frame = 0, bezier = 0, frameLast = timeline.getFrameCount() - 1;; frame++) {\n        timeline.setFrame(frame, time, value);\n        if (frame == frameLast)\n            break;\n        let time2 = input.readFloat(), value2 = input.readFloat() * scale;\n        switch (input.readByte()) {\n            case CURVE_STEPPED:\n                timeline.setStepped(frame);\n                break;\n            case CURVE_BEZIER:\n                setBezier(input, timeline, bezier++, frame, 0, time, time2, value, value2, scale);\n        }\n        time = time2;\n        value = value2;\n    }\n    return timeline;\n}\nfunction readTimeline2(input, timeline, scale) {\n    let time = input.readFloat(), value1 = input.readFloat() * scale, value2 = input.readFloat() * scale;\n    for (let frame = 0, bezier = 0, frameLast = timeline.getFrameCount() - 1;; frame++) {\n        timeline.setFrame(frame, time, value1, value2);\n        if (frame == frameLast)\n            break;\n        let time2 = input.readFloat(), nvalue1 = input.readFloat() * scale, nvalue2 = input.readFloat() * scale;\n        switch (input.readByte()) {\n            case CURVE_STEPPED:\n                timeline.setStepped(frame);\n                break;\n            case CURVE_BEZIER:\n                setBezier(input, timeline, bezier++, frame, 0, time, time2, value1, nvalue1, scale);\n                setBezier(input, timeline, bezier++, frame, 1, time, time2, value2, nvalue2, scale);\n        }\n        time = time2;\n        value1 = nvalue1;\n        value2 = nvalue2;\n    }\n    return timeline;\n}\nfunction setBezier(input, timeline, bezier, frame, value, time1, time2, value1, value2, scale) {\n    timeline.setBezier(bezier, frame, value, time1, value1, input.readFloat(), input.readFloat() * scale, input.readFloat(), input.readFloat() * scale, time2, value2);\n}\nconst BONE_ROTATE = 0;\nconst BONE_TRANSLATE = 1;\nconst BONE_TRANSLATEX = 2;\nconst BONE_TRANSLATEY = 3;\nconst BONE_SCALE = 4;\nconst BONE_SCALEX = 5;\nconst BONE_SCALEY = 6;\nconst BONE_SHEAR = 7;\nconst BONE_SHEARX = 8;\nconst BONE_SHEARY = 9;\nconst SLOT_ATTACHMENT = 0;\nconst SLOT_RGBA = 1;\nconst SLOT_RGB = 2;\nconst SLOT_RGBA2 = 3;\nconst SLOT_RGB2 = 4;\nconst SLOT_ALPHA = 5;\nconst PATH_POSITION = 0;\nconst PATH_SPACING = 1;\nconst PATH_MIX = 2;\nconst CURVE_LINEAR = 0;\nconst CURVE_STEPPED = 1;\nconst CURVE_BEZIER = 2;","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { Animation, AttachmentTimeline, RGBATimeline, RGBTimeline, AlphaTimeline, RGBA2Timeline, RGB2Timeline, RotateTimeline, TranslateTimeline, TranslateXTimeline, TranslateYTimeline, ScaleTimeline, ScaleXTimeline, ScaleYTimeline, ShearTimeline, ShearXTimeline, ShearYTimeline, IkConstraintTimeline, TransformConstraintTimeline, PathConstraintPositionTimeline, PathConstraintSpacingTimeline, PathConstraintMixTimeline, DeformTimeline, DrawOrderTimeline, EventTimeline } from \"./Animation\";\nimport { BoneData, TransformMode } from \"./BoneData\";\nimport { EventData } from \"./EventData\";\nimport { Event } from \"./Event\";\nimport { IkConstraintData } from \"./IkConstraintData\";\nimport { PathConstraintData, PositionMode, SpacingMode, RotateMode } from \"./PathConstraintData\";\nimport { SkeletonData } from \"./SkeletonData\";\nimport { Skin } from \"./Skin\";\nimport { SlotData, BlendMode } from \"./SlotData\";\nimport { TransformConstraintData } from \"./TransformConstraintData\";\nimport { Utils, Color } from \"./Utils\";\n/** Loads skeleton data in the Spine JSON format.\n *\n * See [Spine JSON format](http://esotericsoftware.com/spine-json-format) and\n * [JSON and binary data](http://esotericsoftware.com/spine-loading-skeleton-data#JSON-and-binary-data) in the Spine\n * Runtimes Guide. */\nexport class SkeletonJson {\n    constructor(attachmentLoader) {\n        /** Scales bone positions, image sizes, and translations as they are loaded. This allows different size images to be used at\n         * runtime than were used in Spine.\n         *\n         * See [Scaling](http://esotericsoftware.com/spine-loading-skeleton-data#Scaling) in the Spine Runtimes Guide. */\n        this.scale = 1;\n        this.linkedMeshes = new Array();\n        this.attachmentLoader = attachmentLoader;\n    }\n    readSkeletonData(json) {\n        let scale = this.scale;\n        let skeletonData = new SkeletonData();\n        let root = typeof (json) === \"string\" ? JSON.parse(json) : json;\n        // Skeleton\n        let skeletonMap = root.skeleton;\n        if (skeletonMap) {\n            skeletonData.hash = skeletonMap.hash;\n            skeletonData.version = skeletonMap.spine;\n            skeletonData.x = skeletonMap.x;\n            skeletonData.y = skeletonMap.y;\n            skeletonData.width = skeletonMap.width;\n            skeletonData.height = skeletonMap.height;\n            skeletonData.fps = skeletonMap.fps;\n            skeletonData.imagesPath = skeletonMap.images;\n        }\n        // Bones\n        if (root.bones) {\n            for (let i = 0; i < root.bones.length; i++) {\n                let boneMap = root.bones[i];\n                let parent = null;\n                let parentName = getValue(boneMap, \"parent\", null);\n                if (parentName)\n                    parent = skeletonData.findBone(parentName);\n                let data = new BoneData(skeletonData.bones.length, boneMap.name, parent);\n                data.length = getValue(boneMap, \"length\", 0) * scale;\n                data.x = getValue(boneMap, \"x\", 0) * scale;\n                data.y = getValue(boneMap, \"y\", 0) * scale;\n                data.rotation = getValue(boneMap, \"rotation\", 0);\n                data.scaleX = getValue(boneMap, \"scaleX\", 1);\n                data.scaleY = getValue(boneMap, \"scaleY\", 1);\n                data.shearX = getValue(boneMap, \"shearX\", 0);\n                data.shearY = getValue(boneMap, \"shearY\", 0);\n                data.transformMode = Utils.enumValue(TransformMode, getValue(boneMap, \"transform\", \"Normal\"));\n                data.skinRequired = getValue(boneMap, \"skin\", false);\n                let color = getValue(boneMap, \"color\", null);\n                if (color)\n                    data.color.setFromString(color);\n                skeletonData.bones.push(data);\n            }\n        }\n        // Slots.\n        if (root.slots) {\n            for (let i = 0; i < root.slots.length; i++) {\n                let slotMap = root.slots[i];\n                let boneData = skeletonData.findBone(slotMap.bone);\n                let data = new SlotData(skeletonData.slots.length, slotMap.name, boneData);\n                let color = getValue(slotMap, \"color\", null);\n                if (color)\n                    data.color.setFromString(color);\n                let dark = getValue(slotMap, \"dark\", null);\n                if (dark)\n                    data.darkColor = Color.fromString(dark);\n                data.attachmentName = getValue(slotMap, \"attachment\", null);\n                data.blendMode = Utils.enumValue(BlendMode, getValue(slotMap, \"blend\", \"normal\"));\n                skeletonData.slots.push(data);\n            }\n        }\n        // IK constraints\n        if (root.ik) {\n            for (let i = 0; i < root.ik.length; i++) {\n                let constraintMap = root.ik[i];\n                let data = new IkConstraintData(constraintMap.name);\n                data.order = getValue(constraintMap, \"order\", 0);\n                data.skinRequired = getValue(constraintMap, \"skin\", false);\n                for (let ii = 0; ii < constraintMap.bones.length; ii++)\n                    data.bones.push(skeletonData.findBone(constraintMap.bones[ii]));\n                data.target = skeletonData.findBone(constraintMap.target);\n                data.mix = getValue(constraintMap, \"mix\", 1);\n                data.softness = getValue(constraintMap, \"softness\", 0) * scale;\n                data.bendDirection = getValue(constraintMap, \"bendPositive\", true) ? 1 : -1;\n                data.compress = getValue(constraintMap, \"compress\", false);\n                data.stretch = getValue(constraintMap, \"stretch\", false);\n                data.uniform = getValue(constraintMap, \"uniform\", false);\n                skeletonData.ikConstraints.push(data);\n            }\n        }\n        // Transform constraints.\n        if (root.transform) {\n            for (let i = 0; i < root.transform.length; i++) {\n                let constraintMap = root.transform[i];\n                let data = new TransformConstraintData(constraintMap.name);\n                data.order = getValue(constraintMap, \"order\", 0);\n                data.skinRequired = getValue(constraintMap, \"skin\", false);\n                for (let ii = 0; ii < constraintMap.bones.length; ii++)\n                    data.bones.push(skeletonData.findBone(constraintMap.bones[ii]));\n                let targetName = constraintMap.target;\n                data.target = skeletonData.findBone(targetName);\n                data.local = getValue(constraintMap, \"local\", false);\n                data.relative = getValue(constraintMap, \"relative\", false);\n                data.offsetRotation = getValue(constraintMap, \"rotation\", 0);\n                data.offsetX = getValue(constraintMap, \"x\", 0) * scale;\n                data.offsetY = getValue(constraintMap, \"y\", 0) * scale;\n                data.offsetScaleX = getValue(constraintMap, \"scaleX\", 0);\n                data.offsetScaleY = getValue(constraintMap, \"scaleY\", 0);\n                data.offsetShearY = getValue(constraintMap, \"shearY\", 0);\n                data.mixRotate = getValue(constraintMap, \"mixRotate\", 1);\n                data.mixX = getValue(constraintMap, \"mixX\", 1);\n                data.mixY = getValue(constraintMap, \"mixY\", data.mixX);\n                data.mixScaleX = getValue(constraintMap, \"mixScaleX\", 1);\n                data.mixScaleY = getValue(constraintMap, \"mixScaleY\", data.mixScaleX);\n                data.mixShearY = getValue(constraintMap, \"mixShearY\", 1);\n                skeletonData.transformConstraints.push(data);\n            }\n        }\n        // Path constraints.\n        if (root.path) {\n            for (let i = 0; i < root.path.length; i++) {\n                let constraintMap = root.path[i];\n                let data = new PathConstraintData(constraintMap.name);\n                data.order = getValue(constraintMap, \"order\", 0);\n                data.skinRequired = getValue(constraintMap, \"skin\", false);\n                for (let ii = 0; ii < constraintMap.bones.length; ii++)\n                    data.bones.push(skeletonData.findBone(constraintMap.bones[ii]));\n                let targetName = constraintMap.target;\n                data.target = skeletonData.findSlot(targetName);\n                data.positionMode = Utils.enumValue(PositionMode, getValue(constraintMap, \"positionMode\", \"Percent\"));\n                data.spacingMode = Utils.enumValue(SpacingMode, getValue(constraintMap, \"spacingMode\", \"Length\"));\n                data.rotateMode = Utils.enumValue(RotateMode, getValue(constraintMap, \"rotateMode\", \"Tangent\"));\n                data.offsetRotation = getValue(constraintMap, \"rotation\", 0);\n                data.position = getValue(constraintMap, \"position\", 0);\n                if (data.positionMode == PositionMode.Fixed)\n                    data.position *= scale;\n                data.spacing = getValue(constraintMap, \"spacing\", 0);\n                if (data.spacingMode == SpacingMode.Length || data.spacingMode == SpacingMode.Fixed)\n                    data.spacing *= scale;\n                data.mixRotate = getValue(constraintMap, \"mixRotate\", 1);\n                data.mixX = getValue(constraintMap, \"mixX\", 1);\n                data.mixY = getValue(constraintMap, \"mixY\", data.mixX);\n                skeletonData.pathConstraints.push(data);\n            }\n        }\n        // Skins.\n        if (root.skins) {\n            // 2demoskinevademo\n            if (root.skins instanceof Array) {\n                for (let i = 0; i < root.skins.length; i++) {\n                    let skinMap = root.skins[i];\n                    let skin = new Skin(skinMap.name);\n                    if (skinMap.bones) {\n                        for (let ii = 0; ii < skinMap.bones.length; ii++)\n                            skin.bones.push(skeletonData.findBone(skinMap.bones[ii]));\n                    }\n                    if (skinMap.ik) {\n                        for (let ii = 0; ii < skinMap.ik.length; ii++)\n                            skin.constraints.push(skeletonData.findIkConstraint(skinMap.ik[ii]));\n                    }\n                    if (skinMap.transform) {\n                        for (let ii = 0; ii < skinMap.transform.length; ii++)\n                            skin.constraints.push(skeletonData.findTransformConstraint(skinMap.transform[ii]));\n                    }\n                    if (skinMap.path) {\n                        for (let ii = 0; ii < skinMap.path.length; ii++)\n                            skin.constraints.push(skeletonData.findPathConstraint(skinMap.path[ii]));\n                    }\n                    for (let slotName in skinMap.attachments) {\n                        let slot = skeletonData.findSlot(slotName);\n                        let slotMap = skinMap.attachments[slotName];\n                        for (let entryName in slotMap) {\n                            let attachment = this.readAttachment(slotMap[entryName], skin, slot.index, entryName, skeletonData);\n                            if (attachment)\n                                skin.setAttachment(slot.index, entryName, attachment);\n                        }\n                    }\n                    skeletonData.skins.push(skin);\n                    if (skin.name == \"default\")\n                        skeletonData.defaultSkin = skin;\n                }\n            } else {\n                for (let i in root.skins) {\n                    let skinMap = root.skins[i];\n                    let skin = new Skin(i);\n                    if (skinMap.bones) {\n                        for (let ii = 0; ii < skinMap.bones.length; ii++)\n                            skin.bones.push(skeletonData.findBone(skinMap.bones[ii]));\n                    }\n                    if (skinMap.ik) {\n                        for (let ii = 0; ii < skinMap.ik.length; ii++)\n                            skin.constraints.push(skeletonData.findIkConstraint(skinMap.ik[ii]));\n                    }\n                    if (skinMap.transform) {\n                        for (let ii = 0; ii < skinMap.transform.length; ii++)\n                            skin.constraints.push(skeletonData.findTransformConstraint(skinMap.transform[ii]));\n                    }\n                    if (skinMap.path) {\n                        for (let ii = 0; ii < skinMap.path.length; ii++)\n                            skin.constraints.push(skeletonData.findPathConstraint(skinMap.path[ii]));\n                    }\n                    for (let slotName in skinMap) {\n                        let slot = skeletonData.findSlot(slotName);\n                        let slotMap = skinMap[slotName];\n                        for (let entryName in slotMap) {\n                            let attachment = this.readAttachment(slotMap[entryName], skin, slot.index, entryName, skeletonData);\n                            if (attachment)\n                                skin.setAttachment(slot.index, entryName, attachment);\n                        }\n                    }\n                    skeletonData.skins.push(skin);\n                    if (i == \"default\")\n                        skeletonData.defaultSkin = skin;\n                }\n            }\n            \n        }\n        // Linked meshes.\n        for (let i = 0, n = this.linkedMeshes.length; i < n; i++) {\n            let linkedMesh = this.linkedMeshes[i];\n            let skin = !linkedMesh.skin ? skeletonData.defaultSkin : skeletonData.findSkin(linkedMesh.skin);\n            let parent = skin.getAttachment(linkedMesh.slotIndex, linkedMesh.parent);\n            linkedMesh.mesh.deformAttachment = linkedMesh.inheritDeform ? parent : linkedMesh.mesh;\n            linkedMesh.mesh.setParentMesh(parent);\n            linkedMesh.mesh.updateUVs();\n        }\n        this.linkedMeshes.length = 0;\n        // Events.\n        if (root.events) {\n            for (let eventName in root.events) {\n                let eventMap = root.events[eventName];\n                let data = new EventData(eventName);\n                data.intValue = getValue(eventMap, \"int\", 0);\n                data.floatValue = getValue(eventMap, \"float\", 0);\n                data.stringValue = getValue(eventMap, \"string\", \"\");\n                data.audioPath = getValue(eventMap, \"audio\", null);\n                if (data.audioPath) {\n                    data.volume = getValue(eventMap, \"volume\", 1);\n                    data.balance = getValue(eventMap, \"balance\", 0);\n                }\n                skeletonData.events.push(data);\n            }\n        }\n        // Animations.\n        if (root.animations) {\n            for (let animationName in root.animations) {\n                let animationMap = root.animations[animationName];\n                this.readAnimation(animationMap, animationName, skeletonData);\n            }\n        }\n        return skeletonData;\n    }\n    readAttachment(map, skin, slotIndex, name, skeletonData) {\n        let scale = this.scale;\n        name = getValue(map, \"name\", name);\n        switch (getValue(map, \"type\", \"region\")) {\n            case \"region\": {\n                let path = getValue(map, \"path\", name);\n                let region = this.attachmentLoader.newRegionAttachment(skin, name, path);\n                if (!region)\n                    return null;\n                region.path = path;\n                region.x = getValue(map, \"x\", 0) * scale;\n                region.y = getValue(map, \"y\", 0) * scale;\n                region.scaleX = getValue(map, \"scaleX\", 1);\n                region.scaleY = getValue(map, \"scaleY\", 1);\n                region.rotation = getValue(map, \"rotation\", 0);\n                region.width = map.width * scale;\n                region.height = map.height * scale;\n                let color = getValue(map, \"color\", null);\n                if (color)\n                    region.color.setFromString(color);\n                region.updateOffset();\n                return region;\n            }\n            case \"boundingbox\": {\n                let box = this.attachmentLoader.newBoundingBoxAttachment(skin, name);\n                if (!box)\n                    return null;\n                this.readVertices(map, box, map.vertexCount << 1);\n                let color = getValue(map, \"color\", null);\n                if (color)\n                    box.color.setFromString(color);\n                return box;\n            }\n            case \"mesh\":\n            case \"linkedmesh\": {\n                let path = getValue(map, \"path\", name);\n                let mesh = this.attachmentLoader.newMeshAttachment(skin, name, path);\n                if (!mesh)\n                    return null;\n                mesh.path = path;\n                let color = getValue(map, \"color\", null);\n                if (color)\n                    mesh.color.setFromString(color);\n                mesh.width = getValue(map, \"width\", 0) * scale;\n                mesh.height = getValue(map, \"height\", 0) * scale;\n                let parent = getValue(map, \"parent\", null);\n                if (parent) {\n                    this.linkedMeshes.push(new LinkedMesh(mesh, getValue(map, \"skin\", null), slotIndex, parent, getValue(map, \"deform\", true)));\n                    return mesh;\n                }\n                let uvs = map.uvs;\n                this.readVertices(map, mesh, uvs.length);\n                mesh.triangles = map.triangles;\n                mesh.regionUVs = uvs;\n                mesh.updateUVs();\n                mesh.edges = getValue(map, \"edges\", null);\n                mesh.hullLength = getValue(map, \"hull\", 0) * 2;\n                return mesh;\n            }\n            case \"path\": {\n                let path = this.attachmentLoader.newPathAttachment(skin, name);\n                if (!path)\n                    return null;\n                path.closed = getValue(map, \"closed\", false);\n                path.constantSpeed = getValue(map, \"constantSpeed\", true);\n                let vertexCount = map.vertexCount;\n                this.readVertices(map, path, vertexCount << 1);\n                let lengths = Utils.newArray(vertexCount / 3, 0);\n                for (let i = 0; i < map.lengths.length; i++)\n                    lengths[i] = map.lengths[i] * scale;\n                path.lengths = lengths;\n                let color = getValue(map, \"color\", null);\n                if (color)\n                    path.color.setFromString(color);\n                return path;\n            }\n            case \"point\": {\n                let point = this.attachmentLoader.newPointAttachment(skin, name);\n                if (!point)\n                    return null;\n                point.x = getValue(map, \"x\", 0) * scale;\n                point.y = getValue(map, \"y\", 0) * scale;\n                point.rotation = getValue(map, \"rotation\", 0);\n                let color = getValue(map, \"color\", null);\n                if (color)\n                    point.color.setFromString(color);\n                return point;\n            }\n            case \"clipping\": {\n                let clip = this.attachmentLoader.newClippingAttachment(skin, name);\n                if (!clip)\n                    return null;\n                let end = getValue(map, \"end\", null);\n                if (end)\n                    clip.endSlot = skeletonData.findSlot(end);\n                let vertexCount = map.vertexCount;\n                this.readVertices(map, clip, vertexCount << 1);\n                let color = getValue(map, \"color\", null);\n                if (color)\n                    clip.color.setFromString(color);\n                return clip;\n            }\n        }\n        return null;\n    }\n    readVertices(map, attachment, verticesLength) {\n        let scale = this.scale;\n        attachment.worldVerticesLength = verticesLength;\n        let vertices = map.vertices;\n        if (verticesLength == vertices.length) {\n            let scaledVertices = Utils.toFloatArray(vertices);\n            if (scale != 1) {\n                for (let i = 0, n = vertices.length; i < n; i++)\n                    scaledVertices[i] *= scale;\n            }\n            attachment.vertices = scaledVertices;\n            return;\n        }\n        let weights = new Array();\n        let bones = new Array();\n        for (let i = 0, n = vertices.length; i < n;) {\n            let boneCount = vertices[i++];\n            bones.push(boneCount);\n            for (let nn = i + boneCount * 4; i < nn; i += 4) {\n                bones.push(vertices[i]);\n                weights.push(vertices[i + 1] * scale);\n                weights.push(vertices[i + 2] * scale);\n                weights.push(vertices[i + 3]);\n            }\n        }\n        attachment.bones = bones;\n        attachment.vertices = Utils.toFloatArray(weights);\n    }\n    readAnimation(map, name, skeletonData) {\n        let scale = this.scale;\n        let timelines = new Array();\n        // Slot timelines.\n        if (map.slots) {\n            for (let slotName in map.slots) {\n                let slotMap = map.slots[slotName];\n                let slotIndex = skeletonData.findSlot(slotName).index;\n                for (let timelineName in slotMap) {\n                    let timelineMap = slotMap[timelineName];\n                    if (!timelineMap)\n                        continue;\n                    let frames = timelineMap.length;\n                    if (timelineName == \"attachment\") {\n                        let timeline = new AttachmentTimeline(frames, slotIndex);\n                        for (let frame = 0; frame < frames; frame++) {\n                            let keyMap = timelineMap[frame];\n                            timeline.setFrame(frame, getValue(keyMap, \"time\", 0), keyMap.name);\n                        }\n                        timelines.push(timeline);\n                    }\n                    else if (timelineName == \"rgba\") {\n                        let timeline = new RGBATimeline(frames, frames << 2, slotIndex);\n                        let keyMap = timelineMap[0];\n                        let time = getValue(keyMap, \"time\", 0);\n                        let color = Color.fromString(keyMap.color);\n                        for (let frame = 0, bezier = 0;; frame++) {\n                            timeline.setFrame(frame, time, color.r, color.g, color.b, color.a);\n                            let nextMap = timelineMap[frame + 1];\n                            if (!nextMap) {\n                                timeline.shrink(bezier);\n                                break;\n                            }\n                            let time2 = getValue(nextMap, \"time\", 0);\n                            let newColor = Color.fromString(nextMap.color);\n                            let curve = keyMap.curve;\n                            if (curve) {\n                                bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, color.r, newColor.r, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, color.g, newColor.g, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 2, time, time2, color.b, newColor.b, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 3, time, time2, color.a, newColor.a, 1);\n                            }\n                            time = time2;\n                            color = newColor;\n                            keyMap = nextMap;\n                        }\n                        timelines.push(timeline);\n                    }\n                    else if (timelineName == \"rgb\") {\n                        let timeline = new RGBTimeline(frames, frames * 3, slotIndex);\n                        let keyMap = timelineMap[0];\n                        let time = getValue(keyMap, \"time\", 0);\n                        let color = Color.fromString(keyMap.color);\n                        for (let frame = 0, bezier = 0;; frame++) {\n                            timeline.setFrame(frame, time, color.r, color.g, color.b);\n                            let nextMap = timelineMap[frame + 1];\n                            if (!nextMap) {\n                                timeline.shrink(bezier);\n                                break;\n                            }\n                            let time2 = getValue(nextMap, \"time\", 0);\n                            let newColor = Color.fromString(nextMap.color);\n                            let curve = keyMap.curve;\n                            if (curve) {\n                                bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, color.r, newColor.r, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, color.g, newColor.g, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 2, time, time2, color.b, newColor.b, 1);\n                            }\n                            time = time2;\n                            color = newColor;\n                            keyMap = nextMap;\n                        }\n                        timelines.push(timeline);\n                    }\n                    else if (timelineName == \"alpha\") {\n                        timelines.push(readTimeline1(timelineMap, new AlphaTimeline(frames, frames, slotIndex), 0, 1));\n                    }\n                    else if (timelineName == \"rgba2\") {\n                        let timeline = new RGBA2Timeline(frames, frames * 7, slotIndex);\n                        let keyMap = timelineMap[0];\n                        let time = getValue(keyMap, \"time\", 0);\n                        let color = Color.fromString(keyMap.light);\n                        let color2 = Color.fromString(keyMap.dark);\n                        for (let frame = 0, bezier = 0;; frame++) {\n                            timeline.setFrame(frame, time, color.r, color.g, color.b, color.a, color2.r, color2.g, color2.b);\n                            let nextMap = timelineMap[frame + 1];\n                            if (!nextMap) {\n                                timeline.shrink(bezier);\n                                break;\n                            }\n                            let time2 = getValue(nextMap, \"time\", 0);\n                            let newColor = Color.fromString(nextMap.light);\n                            let newColor2 = Color.fromString(nextMap.dark);\n                            let curve = keyMap.curve;\n                            if (curve) {\n                                bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, color.r, newColor.r, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, color.g, newColor.g, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 2, time, time2, color.b, newColor.b, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 3, time, time2, color.a, newColor.a, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 4, time, time2, color2.r, newColor2.r, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 5, time, time2, color2.g, newColor2.g, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 6, time, time2, color2.b, newColor2.b, 1);\n                            }\n                            time = time2;\n                            color = newColor;\n                            color2 = newColor2;\n                            keyMap = nextMap;\n                        }\n                        timelines.push(timeline);\n                    }\n                    else if (timelineName == \"rgb2\") {\n                        let timeline = new RGB2Timeline(frames, frames * 6, slotIndex);\n                        let keyMap = timelineMap[0];\n                        let time = getValue(keyMap, \"time\", 0);\n                        let color = Color.fromString(keyMap.light);\n                        let color2 = Color.fromString(keyMap.dark);\n                        for (let frame = 0, bezier = 0;; frame++) {\n                            timeline.setFrame(frame, time, color.r, color.g, color.b, color2.r, color2.g, color2.b);\n                            let nextMap = timelineMap[frame + 1];\n                            if (!nextMap) {\n                                timeline.shrink(bezier);\n                                break;\n                            }\n                            let time2 = getValue(nextMap, \"time\", 0);\n                            let newColor = Color.fromString(nextMap.light);\n                            let newColor2 = Color.fromString(nextMap.dark);\n                            let curve = keyMap.curve;\n                            if (curve) {\n                                bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, color.r, newColor.r, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, color.g, newColor.g, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 2, time, time2, color.b, newColor.b, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 3, time, time2, color2.r, newColor2.r, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 4, time, time2, color2.g, newColor2.g, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 5, time, time2, color2.b, newColor2.b, 1);\n                            }\n                            time = time2;\n                            color = newColor;\n                            color2 = newColor2;\n                            keyMap = nextMap;\n                        }\n                        timelines.push(timeline);\n                    }\n                }\n            }\n        }\n        // Bone timelines.\n        if (map.bones) {\n            for (let boneName in map.bones) {\n                let boneMap = map.bones[boneName];\n                let boneIndex = skeletonData.findBone(boneName).index;\n                for (let timelineName in boneMap) {\n                    let timelineMap = boneMap[timelineName];\n                    let frames = timelineMap.length;\n                    if (frames == 0)\n                        continue;\n                    if (timelineName === \"rotate\") {\n                        timelines.push(readTimeline1(timelineMap, new RotateTimeline(frames, frames, boneIndex), 0, 1));\n                    }\n                    else if (timelineName === \"translate\") {\n                        let timeline = new TranslateTimeline(frames, frames << 1, boneIndex);\n                        timelines.push(readTimeline2(timelineMap, timeline, \"x\", \"y\", 0, scale));\n                    }\n                    else if (timelineName === \"translatex\") {\n                        let timeline = new TranslateXTimeline(frames, frames, boneIndex);\n                        timelines.push(readTimeline1(timelineMap, timeline, 0, scale));\n                    }\n                    else if (timelineName === \"translatey\") {\n                        let timeline = new TranslateYTimeline(frames, frames, boneIndex);\n                        timelines.push(readTimeline1(timelineMap, timeline, 0, scale));\n                    }\n                    else if (timelineName === \"scale\") {\n                        let timeline = new ScaleTimeline(frames, frames << 1, boneIndex);\n                        timelines.push(readTimeline2(timelineMap, timeline, \"x\", \"y\", 1, 1));\n                    }\n                    else if (timelineName === \"scalex\") {\n                        let timeline = new ScaleXTimeline(frames, frames, boneIndex);\n                        timelines.push(readTimeline1(timelineMap, timeline, 1, 1));\n                    }\n                    else if (timelineName === \"scaley\") {\n                        let timeline = new ScaleYTimeline(frames, frames, boneIndex);\n                        timelines.push(readTimeline1(timelineMap, timeline, 1, 1));\n                    }\n                    else if (timelineName === \"shear\") {\n                        let timeline = new ShearTimeline(frames, frames << 1, boneIndex);\n                        timelines.push(readTimeline2(timelineMap, timeline, \"x\", \"y\", 0, 1));\n                    }\n                    else if (timelineName === \"shearx\") {\n                        let timeline = new ShearXTimeline(frames, frames, boneIndex);\n                        timelines.push(readTimeline1(timelineMap, timeline, 0, 1));\n                    }\n                    else if (timelineName === \"sheary\") {\n                        let timeline = new ShearYTimeline(frames, frames, boneIndex);\n                        timelines.push(readTimeline1(timelineMap, timeline, 0, 1));\n                    }\n                }\n            }\n        }\n        // IK constraint timelines.\n        if (map.ik) {\n            for (let constraintName in map.ik) {\n                let constraintMap = map.ik[constraintName];\n                let keyMap = constraintMap[0];\n                if (!keyMap)\n                    continue;\n                let constraint = skeletonData.findIkConstraint(constraintName);\n                let constraintIndex = skeletonData.ikConstraints.indexOf(constraint);\n                let timeline = new IkConstraintTimeline(constraintMap.length, constraintMap.length << 1, constraintIndex);\n                let time = getValue(keyMap, \"time\", 0);\n                let mix = getValue(keyMap, \"mix\", 1);\n                let softness = getValue(keyMap, \"softness\", 0) * scale;\n                for (let frame = 0, bezier = 0;; frame++) {\n                    timeline.setFrame(frame, time, mix, softness, getValue(keyMap, \"bendPositive\", true) ? 1 : -1, getValue(keyMap, \"compress\", false), getValue(keyMap, \"stretch\", false));\n                    let nextMap = constraintMap[frame + 1];\n                    if (!nextMap) {\n                        timeline.shrink(bezier);\n                        break;\n                    }\n                    let time2 = getValue(nextMap, \"time\", 0);\n                    let mix2 = getValue(nextMap, \"mix\", 1);\n                    let softness2 = getValue(nextMap, \"softness\", 0) * scale;\n                    let curve = keyMap.curve;\n                    if (curve) {\n                        bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, mix, mix2, 1);\n                        bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, softness, softness2, scale);\n                    }\n                    time = time2;\n                    mix = mix2;\n                    softness = softness2;\n                    keyMap = nextMap;\n                }\n                timelines.push(timeline);\n            }\n        }\n        // Transform constraint timelines.\n        if (map.transform) {\n            for (let constraintName in map.transform) {\n                let timelineMap = map.transform[constraintName];\n                let keyMap = timelineMap[0];\n                if (!keyMap)\n                    continue;\n                let constraint = skeletonData.findTransformConstraint(constraintName);\n                let constraintIndex = skeletonData.transformConstraints.indexOf(constraint);\n                let timeline = new TransformConstraintTimeline(timelineMap.length, timelineMap.length * 6, constraintIndex);\n                let time = getValue(keyMap, \"time\", 0);\n                let mixRotate = getValue(keyMap, \"mixRotate\", 1);\n                let mixX = getValue(keyMap, \"mixX\", 1);\n                let mixY = getValue(keyMap, \"mixY\", mixX);\n                let mixScaleX = getValue(keyMap, \"mixScaleX\", 1);\n                let mixScaleY = getValue(keyMap, \"mixScaleY\", mixScaleX);\n                let mixShearY = getValue(keyMap, \"mixShearY\", 1);\n                for (let frame = 0, bezier = 0;; frame++) {\n                    timeline.setFrame(frame, time, mixRotate, mixX, mixY, mixScaleX, mixScaleY, mixShearY);\n                    let nextMap = timelineMap[frame + 1];\n                    if (!nextMap) {\n                        timeline.shrink(bezier);\n                        break;\n                    }\n                    let time2 = getValue(nextMap, \"time\", 0);\n                    let mixRotate2 = getValue(nextMap, \"mixRotate\", 1);\n                    let mixX2 = getValue(nextMap, \"mixX\", 1);\n                    let mixY2 = getValue(nextMap, \"mixY\", mixX2);\n                    let mixScaleX2 = getValue(nextMap, \"mixScaleX\", 1);\n                    let mixScaleY2 = getValue(nextMap, \"mixScaleY\", mixScaleX2);\n                    let mixShearY2 = getValue(nextMap, \"mixShearY\", 1);\n                    let curve = keyMap.curve;\n                    if (curve) {\n                        bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, mixRotate, mixRotate2, 1);\n                        bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, mixX, mixX2, 1);\n                        bezier = readCurve(curve, timeline, bezier, frame, 2, time, time2, mixY, mixY2, 1);\n                        bezier = readCurve(curve, timeline, bezier, frame, 3, time, time2, mixScaleX, mixScaleX2, 1);\n                        bezier = readCurve(curve, timeline, bezier, frame, 4, time, time2, mixScaleY, mixScaleY2, 1);\n                        bezier = readCurve(curve, timeline, bezier, frame, 5, time, time2, mixShearY, mixShearY2, 1);\n                    }\n                    time = time2;\n                    mixRotate = mixRotate2;\n                    mixX = mixX2;\n                    mixY = mixY2;\n                    mixScaleX = mixScaleX2;\n                    mixScaleY = mixScaleY2;\n                    mixScaleX = mixScaleX2;\n                    keyMap = nextMap;\n                }\n                timelines.push(timeline);\n            }\n        }\n        // Path constraint timelines.\n        if (map.path) {\n            for (let constraintName in map.path) {\n                let constraintMap = map.path[constraintName];\n                let constraint = skeletonData.findPathConstraint(constraintName);\n                let constraintIndex = skeletonData.pathConstraints.indexOf(constraint);\n                for (let timelineName in constraintMap) {\n                    let timelineMap = constraintMap[timelineName];\n                    let keyMap = timelineMap[0];\n                    if (!keyMap)\n                        continue;\n                    let frames = timelineMap.length;\n                    if (timelineName === \"position\") {\n                        let timeline = new PathConstraintPositionTimeline(frames, frames, constraintIndex);\n                        timelines.push(readTimeline1(timelineMap, timeline, 0, constraint.positionMode == PositionMode.Fixed ? scale : 1));\n                    }\n                    else if (timelineName === \"spacing\") {\n                        let timeline = new PathConstraintSpacingTimeline(frames, frames, constraintIndex);\n                        timelines.push(readTimeline1(timelineMap, timeline, 0, constraint.spacingMode == SpacingMode.Length || constraint.spacingMode == SpacingMode.Fixed ? scale : 1));\n                    }\n                    else if (timelineName === \"mix\") {\n                        let timeline = new PathConstraintMixTimeline(frames, frames * 3, constraintIndex);\n                        let time = getValue(keyMap, \"time\", 0);\n                        let mixRotate = getValue(keyMap, \"mixRotate\", 1);\n                        let mixX = getValue(keyMap, \"mixX\", 1);\n                        let mixY = getValue(keyMap, \"mixY\", mixX);\n                        for (let frame = 0, bezier = 0;; frame++) {\n                            timeline.setFrame(frame, time, mixRotate, mixX, mixY);\n                            let nextMap = timelineMap[frame + 1];\n                            if (!nextMap) {\n                                timeline.shrink(bezier);\n                                break;\n                            }\n                            let time2 = getValue(nextMap, \"time\", 0);\n                            let mixRotate2 = getValue(nextMap, \"mixRotate\", 1);\n                            let mixX2 = getValue(nextMap, \"mixX\", 1);\n                            let mixY2 = getValue(nextMap, \"mixY\", mixX2);\n                            let curve = keyMap.curve;\n                            if (curve) {\n                                bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, mixRotate, mixRotate2, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, mixX, mixX2, 1);\n                                bezier = readCurve(curve, timeline, bezier, frame, 2, time, time2, mixY, mixY2, 1);\n                            }\n                            time = time2;\n                            mixRotate = mixRotate2;\n                            mixX = mixX2;\n                            mixY = mixY2;\n                            keyMap = nextMap;\n                        }\n                        timelines.push(timeline);\n                    }\n                }\n            }\n        }\n        // Deform timelines.\n        if (map.deform) {\n            for (let deformName in map.deform) {\n                let deformMap = map.deform[deformName];\n                let skin = skeletonData.findSkin(deformName);\n                for (let slotName in deformMap) {\n                    let slotMap = deformMap[slotName];\n                    let slotIndex = skeletonData.findSlot(slotName).index;\n                    for (let timelineName in slotMap) {\n                        let timelineMap = slotMap[timelineName];\n                        let keyMap = timelineMap[0];\n                        if (!keyMap)\n                            continue;\n                        let attachment = skin.getAttachment(slotIndex, timelineName);\n                        let weighted = attachment.bones;\n                        let vertices = attachment.vertices;\n                        let deformLength = weighted ? vertices.length / 3 * 2 : vertices.length;\n                        let timeline = new DeformTimeline(timelineMap.length, timelineMap.length, slotIndex, attachment);\n                        let time = getValue(keyMap, \"time\", 0);\n                        for (let frame = 0, bezier = 0;; frame++) {\n                            let deform;\n                            let verticesValue = getValue(keyMap, \"vertices\", null);\n                            if (!verticesValue)\n                                deform = weighted ? Utils.newFloatArray(deformLength) : vertices;\n                            else {\n                                deform = Utils.newFloatArray(deformLength);\n                                let start = getValue(keyMap, \"offset\", 0);\n                                Utils.arrayCopy(verticesValue, 0, deform, start, verticesValue.length);\n                                if (scale != 1) {\n                                    for (let i = start, n = i + verticesValue.length; i < n; i++)\n                                        deform[i] *= scale;\n                                }\n                                if (!weighted) {\n                                    for (let i = 0; i < deformLength; i++)\n                                        deform[i] += vertices[i];\n                                }\n                            }\n                            timeline.setFrame(frame, time, deform);\n                            let nextMap = timelineMap[frame + 1];\n                            if (!nextMap) {\n                                timeline.shrink(bezier);\n                                break;\n                            }\n                            let time2 = getValue(nextMap, \"time\", 0);\n                            let curve = keyMap.curve;\n                            if (curve)\n                                bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, 0, 1, 1);\n                            time = time2;\n                            keyMap = nextMap;\n                        }\n                        timelines.push(timeline);\n                    }\n                }\n            }\n        }\n        // Draw order timelines.\n        if (map.drawOrder) {\n            let timeline = new DrawOrderTimeline(map.drawOrder.length);\n            let slotCount = skeletonData.slots.length;\n            let frame = 0;\n            for (let i = 0; i < map.drawOrder.length; i++, frame++) {\n                let drawOrderMap = map.drawOrder[i];\n                let drawOrder = null;\n                let offsets = getValue(drawOrderMap, \"offsets\", null);\n                if (offsets) {\n                    drawOrder = Utils.newArray(slotCount, -1);\n                    let unchanged = Utils.newArray(slotCount - offsets.length, 0);\n                    let originalIndex = 0, unchangedIndex = 0;\n                    for (let ii = 0; ii < offsets.length; ii++) {\n                        let offsetMap = offsets[ii];\n                        let slotIndex = skeletonData.findSlot(offsetMap.slot).index;\n                        // Collect unchanged items.\n                        while (originalIndex != slotIndex)\n                            unchanged[unchangedIndex++] = originalIndex++;\n                        // Set changed items.\n                        drawOrder[originalIndex + offsetMap.offset] = originalIndex++;\n                    }\n                    // Collect remaining unchanged items.\n                    while (originalIndex < slotCount)\n                        unchanged[unchangedIndex++] = originalIndex++;\n                    // Fill in unchanged items.\n                    for (let ii = slotCount - 1; ii >= 0; ii--)\n                        if (drawOrder[ii] == -1)\n                            drawOrder[ii] = unchanged[--unchangedIndex];\n                }\n                timeline.setFrame(frame, getValue(drawOrderMap, \"time\", 0), drawOrder);\n            }\n            timelines.push(timeline);\n        }\n        // Event timelines.\n        if (map.events) {\n            let timeline = new EventTimeline(map.events.length);\n            let frame = 0;\n            for (let i = 0; i < map.events.length; i++, frame++) {\n                let eventMap = map.events[i];\n                let eventData = skeletonData.findEvent(eventMap.name);\n                let event = new Event(Utils.toSinglePrecision(getValue(eventMap, \"time\", 0)), eventData);\n                event.intValue = getValue(eventMap, \"int\", eventData.intValue);\n                event.floatValue = getValue(eventMap, \"float\", eventData.floatValue);\n                event.stringValue = getValue(eventMap, \"string\", eventData.stringValue);\n                if (event.data.audioPath) {\n                    event.volume = getValue(eventMap, \"volume\", 1);\n                    event.balance = getValue(eventMap, \"balance\", 0);\n                }\n                timeline.setFrame(frame, event);\n            }\n            timelines.push(timeline);\n        }\n        let duration = 0;\n        for (let i = 0, n = timelines.length; i < n; i++)\n            duration = Math.max(duration, timelines[i].getDuration());\n        skeletonData.animations.push(new Animation(name, timelines, duration));\n    }\n}\nclass LinkedMesh {\n    constructor(mesh, skin, slotIndex, parent, inheritDeform) {\n        this.mesh = mesh;\n        this.skin = skin;\n        this.slotIndex = slotIndex;\n        this.parent = parent;\n        this.inheritDeform = inheritDeform;\n    }\n}\nfunction readTimeline1(keys, timeline, defaultValue, scale) {\n    let keyMap = keys[0];\n    let time = getValue(keyMap, \"time\", 0);\n    let value = getValue(keyMap, \"value\", defaultValue) * scale;\n    let bezier = 0;\n    for (let frame = 0;; frame++) {\n        timeline.setFrame(frame, time, value);\n        let nextMap = keys[frame + 1];\n        if (!nextMap) {\n            timeline.shrink(bezier);\n            return timeline;\n        }\n        let time2 = getValue(nextMap, \"time\", 0);\n        let value2 = getValue(nextMap, \"value\", defaultValue) * scale;\n        if (keyMap.curve)\n            bezier = readCurve(keyMap.curve, timeline, bezier, frame, 0, time, time2, value, value2, scale);\n        time = time2;\n        value = value2;\n        keyMap = nextMap;\n    }\n}\nfunction readTimeline2(keys, timeline, name1, name2, defaultValue, scale) {\n    let keyMap = keys[0];\n    let time = getValue(keyMap, \"time\", 0);\n    let value1 = getValue(keyMap, name1, defaultValue) * scale;\n    let value2 = getValue(keyMap, name2, defaultValue) * scale;\n    let bezier = 0;\n    for (let frame = 0;; frame++) {\n        timeline.setFrame(frame, time, value1, value2);\n        let nextMap = keys[frame + 1];\n        if (!nextMap) {\n            timeline.shrink(bezier);\n            return timeline;\n        }\n        let time2 = getValue(nextMap, \"time\", 0);\n        let nvalue1 = getValue(nextMap, name1, defaultValue) * scale;\n        let nvalue2 = getValue(nextMap, name2, defaultValue) * scale;\n        let curve = keyMap.curve;\n        if (curve) {\n            bezier = readCurve(curve, timeline, bezier, frame, 0, time, time2, value1, nvalue1, scale);\n            bezier = readCurve(curve, timeline, bezier, frame, 1, time, time2, value2, nvalue2, scale);\n        }\n        time = time2;\n        value1 = nvalue1;\n        value2 = nvalue2;\n        keyMap = nextMap;\n    }\n}\nfunction readCurve(curve, timeline, bezier, frame, value, time1, time2, value1, value2, scale) {\n    if (curve == \"stepped\") {\n        timeline.setStepped(frame);\n        return bezier;\n    }\n    let i = value << 2;\n    let cx1 = curve[i];\n    let cy1 = curve[i + 1] * scale;\n    let cx2 = curve[i + 2];\n    let cy2 = curve[i + 3] * scale;\n    timeline.setBezier(bezier, frame, value, time1, value1, cx1, cy1, cx2, cy2, time2, value2);\n    return bezier + 1;\n}\nfunction getValue(map, property, defaultValue) {\n    return map[property] !== undefined ? map[property] : defaultValue;\n}\n","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\n(() => {\n    if (typeof Math.fround === \"undefined\") {\n        Math.fround = (function (array) {\n            return function (x) {\n                return array[0] = x, array[0];\n            };\n        })(new Float32Array(1));\n    }\n})();\nexport {};","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { PowOut, MathUtils } from \"../Utils\";\nexport class SwirlEffect {\n    constructor(radius) {\n        this.centerX = 0;\n        this.centerY = 0;\n        this.radius = 0;\n        this.angle = 0;\n        this.worldX = 0;\n        this.worldY = 0;\n        this.radius = radius;\n    }\n    begin(skeleton) {\n        this.worldX = skeleton.x + this.centerX;\n        this.worldY = skeleton.y + this.centerY;\n    }\n    transform(position, uv, light, dark) {\n        let radAngle = this.angle * MathUtils.degreesToRadians;\n        let x = position.x - this.worldX;\n        let y = position.y - this.worldY;\n        let dist = Math.sqrt(x * x + y * y);\n        if (dist < this.radius) {\n            let theta = SwirlEffect.interpolation.apply(0, radAngle, (this.radius - dist) / this.radius);\n            let cos = Math.cos(theta);\n            let sin = Math.sin(theta);\n            position.x = cos * x - sin * y + this.worldX;\n            position.y = sin * x + cos * y + this.worldY;\n        }\n    }\n    end() {\n    }\n}\nSwirlEffect.interpolation = new PowOut(2);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3dpcmxFZmZlY3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdmVydGV4ZWZmZWN0cy9Td2lybEVmZmVjdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OytFQTJCK0U7QUFHL0UsT0FBTyxFQUFFLE1BQU0sRUFBa0IsU0FBUyxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBRzdELE1BQU0sT0FBTyxXQUFXO0lBU3ZCLFlBQWEsTUFBYztRQVAzQixZQUFPLEdBQUcsQ0FBQyxDQUFDO1FBQ1osWUFBTyxHQUFHLENBQUMsQ0FBQztRQUNaLFdBQU0sR0FBRyxDQUFDLENBQUM7UUFDWCxVQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ0YsV0FBTSxHQUFHLENBQUMsQ0FBQztRQUNYLFdBQU0sR0FBRyxDQUFDLENBQUM7UUFHbEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7SUFDdEIsQ0FBQztJQUVELEtBQUssQ0FBRSxRQUFrQjtRQUN4QixJQUFJLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUN4QyxJQUFJLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUN6QyxDQUFDO0lBRUQsU0FBUyxDQUFFLFFBQWlCLEVBQUUsRUFBVyxFQUFFLEtBQVksRUFBRSxJQUFXO1FBQ25FLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLGdCQUFnQixDQUFDO1FBQ3ZELElBQUksQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUNqQyxJQUFJLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDakMsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNwQyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ3ZCLElBQUksS0FBSyxHQUFHLFdBQVcsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM3RixJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzFCLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDMUIsUUFBUSxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUM3QyxRQUFRLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1NBQzdDO0lBQ0YsQ0FBQztJQUVELEdBQUc7SUFDSCxDQUFDOztBQWhDTSx5QkFBYSxHQUFHLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDIn0=","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { Utils, Color, RegionAttachment, MeshAttachment } from \"./../spine-core/index\";\nexport class SkeletonRenderer {\n    constructor(context) {\n        this.triangleRendering = false;\n        this.debugRendering = false;\n        this.vertices = Utils.newFloatArray(8 * 1024);\n        this.tempColor = new Color();\n        this.ctx = context;\n    }\n    draw(skeleton) {\n        if (this.triangleRendering)\n            this.drawTriangles(skeleton);\n        else\n            this.drawImages(skeleton);\n    }\n    drawImages(skeleton) {\n        let ctx = this.ctx;\n        let color = this.tempColor;\n        let skeletonColor = skeleton.color;\n        let drawOrder = skeleton.drawOrder;\n        if (this.debugRendering)\n            ctx.strokeStyle = \"green\";\n        for (let i = 0, n = drawOrder.length; i < n; i++) {\n            let slot = drawOrder[i];\n            let bone = slot.bone;\n            if (!bone.active)\n                continue;\n            let attachment = slot.getAttachment();\n            if (!(attachment instanceof RegionAttachment))\n                continue;\n            let region = attachment.region;\n            let image = region.page.texture.getImage();\n            let slotColor = slot.color;\n            let regionColor = attachment.color;\n            color.set(skeletonColor.r * slotColor.r * regionColor.r, skeletonColor.g * slotColor.g * regionColor.g, skeletonColor.b * slotColor.b * regionColor.b, skeletonColor.a * slotColor.a * regionColor.a);\n            ctx.save();\n            ctx.transform(bone.a, bone.c, bone.b, bone.d, bone.worldX, bone.worldY);\n            ctx.translate(attachment.offset[0], attachment.offset[1]);\n            ctx.rotate(attachment.rotation * Math.PI / 180);\n            let atlasScale = attachment.width / region.originalWidth;\n            ctx.scale(atlasScale * attachment.scaleX, atlasScale * attachment.scaleY);\n            let w = region.width, h = region.height;\n            ctx.translate(w / 2, h / 2);\n            if (attachment.region.degrees == 90) {\n                let t = w;\n                w = h;\n                h = t;\n                ctx.rotate(-Math.PI / 2);\n            }\n            ctx.scale(1, -1);\n            ctx.translate(-w / 2, -h / 2);\n            if (color.r != 1 || color.g != 1 || color.b != 1 || color.a != 1) {\n                ctx.globalAlpha = color.a;\n                // experimental tinting via compositing, doesn't work\n                // ctx.globalCompositeOperation = \"source-atop\";\n                // ctx.fillStyle = \"rgba(\" + (color.r * 255 | 0) + \", \" + (color.g * 255 | 0)  + \", \" + (color.b * 255 | 0) + \", \" + color.a + \")\";\n                // ctx.fillRect(0, 0, w, h);\n            }\n            ctx.drawImage(image, region.x, region.y, w, h, 0, 0, w, h);\n            if (this.debugRendering)\n                ctx.strokeRect(0, 0, w, h);\n            ctx.restore();\n        }\n    }\n    drawTriangles(skeleton) {\n        let ctx = this.ctx;\n        let color = this.tempColor;\n        let skeletonColor = skeleton.color;\n        let drawOrder = skeleton.drawOrder;\n        let blendMode = null;\n        let vertices = this.vertices;\n        let triangles = null;\n        for (let i = 0, n = drawOrder.length; i < n; i++) {\n            let slot = drawOrder[i];\n            let attachment = slot.getAttachment();\n            let texture;\n            let region;\n            if (attachment instanceof RegionAttachment) {\n                let regionAttachment = attachment;\n                vertices = this.computeRegionVertices(slot, regionAttachment, false);\n                triangles = SkeletonRenderer.QUAD_TRIANGLES;\n                region = regionAttachment.region;\n                texture = region.page.texture.getImage();\n            }\n            else if (attachment instanceof MeshAttachment) {\n                let mesh = attachment;\n                vertices = this.computeMeshVertices(slot, mesh, false);\n                triangles = mesh.triangles;\n                texture = mesh.region.renderObject.page.texture.getImage();\n            }\n            else\n                continue;\n            if (texture) {\n                if (slot.data.blendMode != blendMode)\n                    blendMode = slot.data.blendMode;\n                let slotColor = slot.color;\n                let attachmentColor = attachment.color;\n                color.set(skeletonColor.r * slotColor.r * attachmentColor.r, skeletonColor.g * slotColor.g * attachmentColor.g, skeletonColor.b * slotColor.b * attachmentColor.b, skeletonColor.a * slotColor.a * attachmentColor.a);\n                if (color.r != 1 || color.g != 1 || color.b != 1 || color.a != 1) {\n                    ctx.globalAlpha = color.a;\n                    // experimental tinting via compositing, doesn't work\n                    // ctx.globalCompositeOperation = \"source-atop\";\n                    // ctx.fillStyle = \"rgba(\" + (color.r * 255 | 0) + \", \" + (color.g * 255 | 0) + \", \" + (color.b * 255 | 0) + \", \" + color.a + \")\";\n                    // ctx.fillRect(0, 0, w, h);\n                }\n                for (var j = 0; j < triangles.length; j += 3) {\n                    let t1 = triangles[j] * 8, t2 = triangles[j + 1] * 8, t3 = triangles[j + 2] * 8;\n                    let x0 = vertices[t1], y0 = vertices[t1 + 1], u0 = vertices[t1 + 6], v0 = vertices[t1 + 7];\n                    let x1 = vertices[t2], y1 = vertices[t2 + 1], u1 = vertices[t2 + 6], v1 = vertices[t2 + 7];\n                    let x2 = vertices[t3], y2 = vertices[t3 + 1], u2 = vertices[t3 + 6], v2 = vertices[t3 + 7];\n                    this.drawTriangle(texture, x0, y0, u0, v0, x1, y1, u1, v1, x2, y2, u2, v2);\n                    if (this.debugRendering) {\n                        ctx.strokeStyle = \"green\";\n                        ctx.beginPath();\n                        ctx.moveTo(x0, y0);\n                        ctx.lineTo(x1, y1);\n                        ctx.lineTo(x2, y2);\n                        ctx.lineTo(x0, y0);\n                        ctx.stroke();\n                    }\n                }\n            }\n        }\n        this.ctx.globalAlpha = 1;\n    }\n    // Adapted from http://extremelysatisfactorytotalitarianism.com/blog/?p=2120\n    // Apache 2 licensed\n    drawTriangle(img, x0, y0, u0, v0, x1, y1, u1, v1, x2, y2, u2, v2) {\n        let ctx = this.ctx;\n        u0 *= img.width;\n        v0 *= img.height;\n        u1 *= img.width;\n        v1 *= img.height;\n        u2 *= img.width;\n        v2 *= img.height;\n        ctx.beginPath();\n        ctx.moveTo(x0, y0);\n        ctx.lineTo(x1, y1);\n        ctx.lineTo(x2, y2);\n        ctx.closePath();\n        x1 -= x0;\n        y1 -= y0;\n        x2 -= x0;\n        y2 -= y0;\n        u1 -= u0;\n        v1 -= v0;\n        u2 -= u0;\n        v2 -= v0;\n        var det = 1 / (u1 * v2 - u2 * v1), \n        // linear transformation\n        a = (v2 * x1 - v1 * x2) * det, b = (v2 * y1 - v1 * y2) * det, c = (u1 * x2 - u2 * x1) * det, d = (u1 * y2 - u2 * y1) * det, \n        // translation\n        e = x0 - a * u0 - c * v0, f = y0 - b * u0 - d * v0;\n        ctx.save();\n        ctx.transform(a, b, c, d, e, f);\n        ctx.clip();\n        ctx.drawImage(img, 0, 0);\n        ctx.restore();\n    }\n    computeRegionVertices(slot, region, pma) {\n        let skeletonColor = slot.bone.skeleton.color;\n        let slotColor = slot.color;\n        let regionColor = region.color;\n        let alpha = skeletonColor.a * slotColor.a * regionColor.a;\n        let multiplier = pma ? alpha : 1;\n        let color = this.tempColor;\n        color.set(skeletonColor.r * slotColor.r * regionColor.r * multiplier, skeletonColor.g * slotColor.g * regionColor.g * multiplier, skeletonColor.b * slotColor.b * regionColor.b * multiplier, alpha);\n        region.computeWorldVertices(slot.bone, this.vertices, 0, SkeletonRenderer.VERTEX_SIZE);\n        let vertices = this.vertices;\n        let uvs = region.uvs;\n        vertices[RegionAttachment.C1R] = color.r;\n        vertices[RegionAttachment.C1G] = color.g;\n        vertices[RegionAttachment.C1B] = color.b;\n        vertices[RegionAttachment.C1A] = color.a;\n        vertices[RegionAttachment.U1] = uvs[0];\n        vertices[RegionAttachment.V1] = uvs[1];\n        vertices[RegionAttachment.C2R] = color.r;\n        vertices[RegionAttachment.C2G] = color.g;\n        vertices[RegionAttachment.C2B] = color.b;\n        vertices[RegionAttachment.C2A] = color.a;\n        vertices[RegionAttachment.U2] = uvs[2];\n        vertices[RegionAttachment.V2] = uvs[3];\n        vertices[RegionAttachment.C3R] = color.r;\n        vertices[RegionAttachment.C3G] = color.g;\n        vertices[RegionAttachment.C3B] = color.b;\n        vertices[RegionAttachment.C3A] = color.a;\n        vertices[RegionAttachment.U3] = uvs[4];\n        vertices[RegionAttachment.V3] = uvs[5];\n        vertices[RegionAttachment.C4R] = color.r;\n        vertices[RegionAttachment.C4G] = color.g;\n        vertices[RegionAttachment.C4B] = color.b;\n        vertices[RegionAttachment.C4A] = color.a;\n        vertices[RegionAttachment.U4] = uvs[6];\n        vertices[RegionAttachment.V4] = uvs[7];\n        return vertices;\n    }\n    computeMeshVertices(slot, mesh, pma) {\n        let skeletonColor = slot.bone.skeleton.color;\n        let slotColor = slot.color;\n        let regionColor = mesh.color;\n        let alpha = skeletonColor.a * slotColor.a * regionColor.a;\n        let multiplier = pma ? alpha : 1;\n        let color = this.tempColor;\n        color.set(skeletonColor.r * slotColor.r * regionColor.r * multiplier, skeletonColor.g * slotColor.g * regionColor.g * multiplier, skeletonColor.b * slotColor.b * regionColor.b * multiplier, alpha);\n        let vertexCount = mesh.worldVerticesLength / 2;\n        let vertices = this.vertices;\n        if (vertices.length < mesh.worldVerticesLength)\n            this.vertices = vertices = Utils.newFloatArray(mesh.worldVerticesLength);\n        mesh.computeWorldVertices(slot, 0, mesh.worldVerticesLength, vertices, 0, SkeletonRenderer.VERTEX_SIZE);\n        let uvs = mesh.uvs;\n        for (let i = 0, u = 0, v = 2; i < vertexCount; i++) {\n            vertices[v++] = color.r;\n            vertices[v++] = color.g;\n            vertices[v++] = color.b;\n            vertices[v++] = color.a;\n            vertices[v++] = uvs[u++];\n            vertices[v++] = uvs[u++];\n            v += 2;\n        }\n        return vertices;\n    }\n}\nSkeletonRenderer.QUAD_TRIANGLES = [0, 1, 2, 2, 3, 0];\nSkeletonRenderer.VERTEX_SIZE = 2 + 2 + 4;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2tlbGV0b25SZW5kZXJlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9Ta2VsZXRvblJlbmRlcmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K0VBMkIrRTtBQUUvRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBWSxnQkFBZ0IsRUFBaUMsY0FBYyxFQUFRLE1BQU0sOEJBQThCLENBQUM7QUFHN0ksTUFBTSxPQUFPLGdCQUFnQjtJQVc1QixZQUFhLE9BQWlDO1FBTHZDLHNCQUFpQixHQUFHLEtBQUssQ0FBQztRQUMxQixtQkFBYyxHQUFHLEtBQUssQ0FBQztRQUN0QixhQUFRLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDekMsY0FBUyxHQUFHLElBQUksS0FBSyxFQUFFLENBQUM7UUFHL0IsSUFBSSxDQUFDLEdBQUcsR0FBRyxPQUFPLENBQUM7SUFDcEIsQ0FBQztJQUVELElBQUksQ0FBRSxRQUFrQjtRQUN2QixJQUFJLElBQUksQ0FBQyxpQkFBaUI7WUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDOztZQUNwRCxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFTyxVQUFVLENBQUUsUUFBa0I7UUFDckMsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUNuQixJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQzNCLElBQUksYUFBYSxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUM7UUFDbkMsSUFBSSxTQUFTLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQztRQUVuQyxJQUFJLElBQUksQ0FBQyxjQUFjO1lBQUUsR0FBRyxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUM7UUFFbkQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUs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Z0JBQWdCLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUN6QyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdkMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDekMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDekMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDekMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDekMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXZDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkMsUUFB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","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { Texture } from \"./../spine-core/index\";\nexport class CanvasTexture extends Texture {\n    constructor(image) {\n        super(image);\n    }\n    setFilters(minFilter, magFilter) { }\n    setWraps(uWrap, vWrap) { }\n    dispose() { }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2FudmFzVGV4dHVyZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9DYW52YXNUZXh0dXJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K0VBMkIrRTtBQUUvRSxPQUFPLEVBQUUsT0FBTyxFQUE4QixNQUFNLDhCQUE4QixDQUFDO0FBRW5GLE1BQU0sT0FBTyxhQUFjLFNBQVEsT0FBTztJQUN6QyxZQUFhLEtBQXVCO1FBQ25DLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNkLENBQUM7SUFFRCxVQUFVLENBQUUsU0FBd0IsRUFBRSxTQUF3QixJQUFJLENBQUM7SUFDbkUsUUFBUSxDQUFFLEtBQWtCLEVBQUUsS0FBa0IsSUFBSSxDQUFDO0lBQ3JELE9BQU8sS0FBTSxDQUFDO0NBQ2QifQ==","/******************************************************************************\n * Spine Runtimes License Agreement\n * Last updated January 1, 2020. Replaces all prior versions.\n *\n * Copyright (c) 2013-2020, Esoteric Software LLC\n *\n * Integration of the Spine Runtimes into software or otherwise creating\n * derivative works of the Spine Runtimes is permitted under the terms and\n * conditions of Section 2 of the Spine Editor License Agreement:\n * http://esotericsoftware.com/spine-editor-license\n *\n * Otherwise, it is permitted to integrate the Spine Runtimes into software\n * or otherwise create derivative works of the Spine Runtimes (collectively,\n * \"Products\"), provided that each user of the Products must obtain their own\n * Spine Editor license and redistribution of the Products in any form must\n * include this license and copyright notice.\n *\n * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,\n * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *****************************************************************************/\nimport { AssetManagerBase } from \"./../spine-core/AssetManagerBase\";\nimport { CanvasTexture } from \"./CanvasTexture\";\nexport class AssetManager extends AssetManagerBase {\n    constructor(onLoad = () => {}, pathPrefix = \"\", downloader = null) {\n        super(onLoad, (image) => { return new CanvasTexture(image); }, pathPrefix, downloader);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXNzZXRNYW5hZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL0Fzc2V0TWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OytFQTJCK0U7QUFFL0UsT0FBTyxFQUFFLGdCQUFnQixFQUFjLE1BQU0sOEJBQThCLENBQUE7QUFDM0UsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRWhELE1BQU0sT0FBTyxZQUFhLFNBQVEsZ0JBQWdCO0lBQ2pELFlBQWEsYUFBcUIsRUFBRSxFQUFFLGFBQXlCLElBQUk7UUFDbEUsS0FBSyxDQUFDLENBQUMsS0FBdUIsRUFBRSxFQUFFLEdBQUcsT0FBTyxJQUFJLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxVQUFVLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDbEcsQ0FBQztDQUNEIn0=","// karasmesh\nimport karas from 'karas';\nimport { SkeletonRenderer } from './spine-canvas/SkeletonRenderer';\nimport { AssetManager } from './spine-canvas/AssetManager';\nimport { TextureAtlas } from './spine-core/TextureAtlas';\nimport { AtlasAttachmentLoader } from './spine-core/AtlasAttachmentLoader';\nimport { SkeletonJson } from './spine-core/SkeletonJson';\nimport { Skeleton } from './spine-core/Skeleton';\nimport { Vector2 } from './spine-core/Utils';\nimport { AnimationState } from './spine-core/AnimationState';\nimport { AnimationStateData } from './spine-core/AnimationStateData';\n\n// spinekarasnspinenkarascanvas\nconst GlobalSpineRendererMap = new WeakMap();\n\n/**\n * props\n * atlas url\n * image url\n * json url\n * \n * animation idleidle\n * skin default\n * loopCount \n * onLoop \n * onStart \n * onEnd \n * debugger\n */\nexport default class Spine extends karas.Component {\n\n  verticesData = [];\n  renderer = null;\n  isParsed = false;\n\n  lastTime = Date.now();\n  currentTime = Date.now();\n\n  constructor(props) {\n    super(props);\n\n    this.animationName = props.animation || 'idle';\n    this.skinName = props.skin || 'default';\n    this.loopCount = props.loopCount || Infinity;\n    // \n    this.load();\n  }\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  playAnimation = (animationName = this.animationName, loop = this.loopCount, skinName = this.skinName) => {\n    this.loopCount = loop;\n    let data = this.loadSkeleton(animationName, skinName); // \n    this.state = data.state;\n    this.skeleton = data.skeleton;\n    this.bounds = data.bounds;\n    this.isParsed = true;\n    this.lastTime = Date.now() / 1000;\n    this.currentTime = Date.now() / 1000;\n    this.animationsList = data.animations;\n  }\n\n  load() {\n    this.assetManager = new AssetManager(this.playAnimation);\n    this.assetManager.loadText(this.props.atlas);\n    this.assetManager.loadText(this.props.json);\n    this.assetManager.loadTexture(this.props.image);\n  }\n\n  initRender(ctx) {\n    this.ctx = ctx;\n    this.renderer = GlobalSpineRendererMap.get(this.ctx);\n    if (!this.renderer) {\n      this.renderer = new SkeletonRenderer(ctx);\n      GlobalSpineRendererMap.set(this.ctx, this.renderer);\n    }\n  }\n\n  componentDidMount() {\n    let fake = this.ref.fake;\n    fake.clearAnimate();\n\n    fake.animate([\n      {\n        backgroundColor: '#000',\n      },\n      {\n        backgroundColor: '#fff',\n      },\n    ], {\n      duration: 10000,\n      iterations: Infinity,\n    });\n\n    fake.render = (renderMode, lv, ctx, cache, dx = 0, dy = 0) => {\n      if (!this.bounds) {\n        return\n      }\n      let fitSize = this.props.fitSize;\n      let size = fake.getComputedStyle(['width', 'height']);\n      // console.log(size)\n      let x = this.bounds.offset.x;\n      let y = this.bounds.offset.y;\n      let width = this.bounds.size.x;\n      let height = this.bounds.size.y;\n      let centerX = x + width * 0.5;\n      let centerY = y + height * 0.5;\n      // let matrix = mesh.matrixEvent;\n      this.currentTime = Date.now() / 1000;\n\n      let delta = this.currentTime - this.lastTime;\n      this.lastTime = this.currentTime;\n      // matrix4matrix2_3\n      // ctx.setTransform(matrix[0], matrix[1], matrix[4], matrix[5], matrix[12] + (this.bounds?.size.x || 0) * matrix[0], matrix[13] + (this.bounds?.size.y || 0) * matrix[5]);\n      ctx.translate(fake.sx + dx, fake.sy + dy);\n      let scale = 1;\n      if (fitSize) {\n        let scx = width / size.width;\n        let scy = height / size.height;\n        scale = fitSize === 'cover' ? Math.min(scx, scy) : Math.max(scx, scy);\n        if (scale !== 1) {\n          ctx.scale(1 / scale, 1 / scale);\n        }\n\n        // console.log(scale, size)\n      }\n      ctx.translate(-centerX, -centerY);\n      ctx.translate(size.width * 0.5 * scale, size.height * 0.5 * scale);\n\n      if (!this.renderer) {\n        this.initRender(ctx);\n      }\n      if (this.isParsed) {\n        if(this.props.debug) {\n          this.renderer.debugRendering = true;\n        }\n        if(this.props.triangle) {\n          this.renderer.triangleRendering = true;\n        }\n        this.state.update(delta);\n        this.state.apply(this.skeleton);\n        this.skeleton.updateWorldTransform();\n        this.renderer.draw(this.skeleton);\n      }\n      // debugger\n    };\n  }\n\n  loadSkeleton(initialAnimation, skin) {\n    if (skin === undefined) skin = \"default\";\n    let assetManager = this.assetManager;\n    let atlas = new TextureAtlas(assetManager.require(this.props.atlas));\n    atlas.setTextures(assetManager, this.props.image);\n\n    let atlasLoader = new AtlasAttachmentLoader(atlas);\n    var skeletonJson = new SkeletonJson(atlasLoader);\n\n    var skeletonData = skeletonJson.readSkeletonData(assetManager.require(this.props.json));\n    var skeleton = new Skeleton(skeletonData);\n    skeleton.scaleY = -1;\n    var bounds = calculateBounds(skeleton);\n    skeleton.setSkinByName(skin);\n\n\n    var animationState = new AnimationState(new AnimationStateData(skeleton.data));\n    animationState.setAnimation(0, initialAnimation, 0);\n    this.props.onStart?.(initialAnimation, this.loopCount);\n    animationState.addListener({\n      complete: () => {\n        this.loopCount--;\n        this.props.onLoop?.(initialAnimation, this.loopCount);\n\n        if (this.loopCount > 0) {\n          animationState.setAnimation(0, initialAnimation, 0);\n        } else {\n          this.props.onEnd?.(initialAnimation);\n        }\n      },\n    })\n\n    return { skeleton: skeleton, state: animationState, bounds: bounds };\n  }\n\n  render() {\n    return <div ref=\"mesh\" style={this.props.style || {}}>\n      <$polyline ref=\"fake\" style={{\n        width: '100%',\n        height: '100%',\n      }} />\n    </div>;;\n  }\n}\n\nfunction calculateBounds(skeleton) {\n  skeleton.setToSetupPose();\n  skeleton.updateWorldTransform();\n  var offset = new Vector2();\n  var size = new Vector2();\n  skeleton.getBounds(offset, size, []);\n  return { offset: offset, size: size };\n}\n\n"],"names":["StringSet","constructor","entries","size","add","value","contains","addAll","values","oldSize","i","n","length","clear","Color","r","g","b","a","set","clamp","setFromColor","c","setFromString","hex","charAt","substr","parseInt","rgba8888ToColor","color","rgb888ToColor","fromString","WHITE","RED","GREEN","BLUE","MAGENTA","MathUtils","min","max","cosDeg","degrees","Math","cos","degRad","sinDeg","sin","signum","toInt","x","floor","ceil","cbrt","y","pow","abs","randomTriangular","randomTriangularWith","mode","u","random","d","sqrt","isPowerOfTwo","PI","PI2","radiansToDegrees","radDeg","degreesToRadians","Interpolation","apply","start","end","applyInternal","Pow","power","PowOut","Utils","arrayCopy","source","sourceStart","dest","destStart","numElements","j","arrayFill","array","fromIndex","toIndex","setArraySize","ensureArrayCapacity","newArray","defaultValue","Array","newFloatArray","SUPPORTS_TYPED_ARRAYS","Float32Array","newShortArray","Int16Array","toFloatArray","toSinglePrecision","fround","webkit602BugfixHelper","alpha","blend","element","identity","enumValue","type","name","toUpperCase","slice","Pool","instantiator","items","obtain","pop","free","item","reset","push","freeAll","Vector2","normalize","len","Animation","timelines","duration","Error","setTimelines","timelineIds","getPropertyIds","hasTimeline","ids","skeleton","lastTime","time","loop","events","direction","MixBlend","MixDirection","Property","rotate","scaleX","scaleY","shearX","shearY","rgb","rgb2","attachment","deform","event","drawOrder","ikConstraint","transformConstraint","pathConstraintPosition","pathConstraintSpacing","pathConstraintMix","Timeline","frameCount","propertyIds","frames","getFrameEntries","getFrameCount","getDuration","search1","search","step","CurveTimeline","bezierCount","curves","setLinear","frame","setStepped","shrink","newCurves","setBezier","bezier","time1","value1","cx1","cy1","cx2","cy2","time2","value2","tmpx","tmpy","dddx","dddy","ddx","ddy","dx","dy","getBezierValue","frameIndex","valueOffset","CurveTimeline1","propertyId","setFrame","getCurveValue","ii","curveType","before","CurveTimeline2","propertyId1","propertyId2","RotateTimeline","boneIndex","bone","bones","active","setup","rotation","data","first","replace","TranslateTimeline","t","TranslateXTimeline","TranslateYTimeline","ScaleTimeline","bx","by","mixOut","ScaleXTimeline","ScaleYTimeline","ShearTimeline","ShearXTimeline","ShearYTimeline","RGBATimeline","slotIndex","slot","slots","RGBTimeline","AlphaTimeline","RGBA2Timeline","r2","g2","b2","light","dark","darkColor","setupLight","setupDark","RGB2Timeline","AttachmentTimeline","attachmentNames","attachmentName","setAttachment","getAttachment","DeformTimeline","id","vertices","getCurvePercent","firedEvents","slotAttachment","VertexAttachment","deformAttachment","vertexCount","vertexAttachment","setupVertices","lastVertices","percent","prevVertices","nextVertices","prev","EventTimeline","Number","MAX_VALUE","frameTime","DrawOrderTimeline","drawOrders","drawOrderToSetupIndex","IkConstraintTimeline","ikConstraintIndex","mix","softness","bendDirection","compress","stretch","constraint","ikConstraints","mixIn","TransformConstraintTimeline","transformConstraintIndex","mixRotate","mixX","mixY","mixScaleX","mixScaleY","mixShearY","transformConstraints","PathConstraintPositionTimeline","pathConstraintIndex","pathConstraints","position","PathConstraintSpacingTimeline","spacing","PathConstraintMixTimeline","AnimationState","tracks","timeScale","unkeyedState","listeners","queue","EventQueue","propertyIDs","animationsChanged","trackEntryPool","TrackEntry","emptyAnimation","_emptyAnimation","update","delta","current","animationLast","nextAnimationLast","trackLast","nextTrackLast","currentDelta","delay","next","nextTime","trackTime","setCurrent","mixingFrom","mixTime","trackEnd","clearNext","updateMixingFrom","from","mixingTo","drain","to","finished","mixDuration","totalAlpha","interruptAlpha","_animationsChanged","applied","mixBlend","applyMixingFrom","animationTime","getAnimationTime","applyTime","applyEvents","reverse","animation","timelineCount","timeline","applyAttachmentTimeline","timelineMode","firstFrame","timelinesRotation","timelineBlend","SUBSEQUENT","applyRotateTimeline","queueEvents","setupState","SETUP","attachmentState","index","attachments","attachmentThreshold","drawOrderThreshold","alphaHold","alphaMix","eventThreshold","timelineHoldMix","FIRST","HOLD_SUBSEQUENT","HOLD_FIRST","holdMix","CURRENT","r1","total","diff","lastTotal","lastDiff","dir","entry","animationStart","animationEnd","trackLastWrapped","complete","clearTracks","oldDrainDisabled","drainDisabled","clearTrack","trackIndex","interrupt","expandToIndex","previous","setAnimation","animationName","skeletonData","findAnimation","setAnimationWith","trackEntry","addAnimation","addAnimationWith","last","getTrackComplete","setEmptyAnimation","addEmptyAnimation","setEmptyAnimations","holdPrevious","getMix","dispose","computeHold","timelinesCount","outer","HOLD_MIX","getCurrent","addListener","listener","removeListener","indexOf","splice","clearListeners","clearListenerNotifications","setAnimationLast","isComplete","resetRotationDirections","animState","objects","EventType","AnimationStateData","animationToMixTime","defaultMix","setMix","fromName","toName","setMixWith","key","undefined","Texture","image","_image","getImage","TextureFilter","TextureWrap","TextureRegion","v","u2","v2","width","height","offsetX","offsetY","originalWidth","originalHeight","TextureAtlas","atlasText","pages","regions","reader","TextureAtlasReader","page","region","pageFields","minFilter","magFilter","uWrap","Repeat","vWrap","pma","regionFields","line","readLine","trim","readEntry","names","TextureAtlasPage","field","TextureAtlasRegion","count","entryValues","findRegion","setTextures","assetManager","path","setTexture","get","texture","text","lines","split","colon","lastMatch","comma","Nearest","ClampToEdge","setFilters","setWraps","AtlasAttachmentLoader","atlas","newRegionAttachment","skin","renderObject","RegionAttachment","setRegion","newMeshAttachment","MeshAttachment","newBoundingBoxAttachment","BoundingBoxAttachment","newPathAttachment","PathAttachment","newPointAttachment","PointAttachment","newClippingAttachment","ClippingAttachment","BoneData","parent","transformMode","TransformMode","Normal","skinRequired","Bone","children","ax","ay","arotation","ascaleX","ascaleY","ashearX","ashearY","worldY","worldX","sorted","setToSetupPose","isActive","updateWorldTransformWith","updateWorldTransform","rotationY","sx","sy","pa","pb","pc","pd","la","lb","lc","ld","OnlyTranslation","NoRotationOrReflection","s","prx","atan2","rx","ry","NoScale","NoScaleOrReflection","za","zc","zb","zd","getWorldRotationX","getWorldRotationY","getWorldScaleX","getWorldScaleY","updateAppliedTransform","pid","ia","ib","ic","ra","rb","rc","rd","det","worldToLocal","world","invDet","localToWorld","local","worldToLocalRotation","worldRotation","localToWorldRotation","localRotation","rotateWorld","ConstraintData","order","AssetManagerBase","onLoad","textureLoader","pathPrefix","downloader","assets","errors","toLoad","loaded","Downloader","success","callback","asset","error","message","setRawDataURI","rawDataUris","loadBinary","downloadBinary","status","responseText","loadText","downloadText","loadJson","downloadJson","loadTexture","isBrowser","window","navigator","document","isWebWorker","fetch","then","response","ok","blob","createImageBitmap","premultiplyAlpha","colorSpaceConversion","bitmap","Image","crossOrigin","onload","onerror","src","loadTextureAtlas","lastIndexOf","substring","abort","imagePath","e","require","remove","removeAll","isLoadingComplete","getToLoad","getLoaded","hasErrors","Object","keys","getErrors","callbacks","dataUriToString","dataUri","startsWith","base64Idx","atob","base64ToUint8Array","base64","binary_string","bytes","Uint8Array","charCodeAt","dataUriToUint8Array","url","finish","JSON","stringify","request","XMLHttpRequest","overrideMimeType","open","done","send","parse","responseType","args","Event","EventData","IkConstraint","findBone","target","apply1","uniform","apply2","targetX","targetY","p","rotationIK","tx","ty","sa","sc","dd","child","bendDir","px","py","psx","psy","csx","os1","os2","s2","cx","cy","cwx","cwy","pp","l1","l2","a1","a2","td","sd","acos","aa","bb","ta","c1","c2","q","r0","minAngle","minX","minDist","minY","maxAngle","maxX","maxDist","maxY","os","IkConstraintData","PathConstraintData","PositionMode","SpacingMode","RotateMode","PathConstraint","spaces","positions","lengths","segments","findSlot","tangents","rotateMode","Tangent","scale","ChainScale","boneCount","spacesCount","spacingMode","Percent","setupLength","epsilon","Proportional","sum","lengthSpacing","Length","computeWorldPositions","boneX","boneY","offsetRotation","tip","Chain","out","closed","verticesLength","worldVerticesLength","curveCount","prevCurve","NONE","constantSpeed","pathLength","positionMode","multiplier","o","curve","space","BEFORE","computeWorldVertices","addBeforePosition","AFTER","addAfterPosition","addCurvePosition","x1","y1","x2","y2","dddfx","dddfy","ddfx","ddfy","dfx","dfy","w","curveLength","segment","temp","isNaN","tt","ttt","uu","uuu","ut","ut3","uut3","utt3","Slot","getSkeleton","attachmentTime","setAttachmentTime","getAttachmentTime","TransformConstraint","relative","applyRelativeLocal","applyAbsoluteLocal","applyRelativeWorld","applyAbsoluteWorld","translate","tb","tc","degRadReflect","offsetShearY","offsetScaleX","offsetScaleY","Skeleton","_updateCache","boneData","slotData","ikConstraintData","transformConstraintData","pathConstraintData","updateCache","skinBones","ikCount","transformCount","pathCount","constraintCount","sortIkConstraint","sortTransformConstraint","sortPathConstraint","sortBone","constraints","constrained","sortReset","slotBone","sortPathConstraintAttachment","defaultSkin","skins","sortPathConstraintAttachmentWith","pathBones","nn","rootBone","getRootBone","updatable","setBonesToSetupPose","setSlotsToSetupPose","boneName","slotName","setSkinByName","skinName","findSkin","setSkin","newSkin","attachAll","getAttachmentByName","findIkConstraint","constraintName","findTransformConstraint","findPathConstraint","getBounds","offset","POSITIVE_INFINITY","NEGATIVE_INFINITY","mesh","SkeletonData","animations","fps","findEvent","eventDataName","SkinEntry","Skin","addSkin","contained","getAttachments","copySkin","newLinkedMesh","copy","dictionary","removeAttachment","slotAttachments","getAttachmentsForSlot","oldSkin","skinAttachment","SlotData","BlendMode","AttachmentType","SkeletonJson","attachmentLoader","linkedMeshes","readSkeletonData","json","root","skeletonMap","hash","version","spine","imagesPath","images","boneMap","parentName","getValue","slotMap","blendMode","ik","constraintMap","transform","TransformConstraintData","targetName","Fixed","skinMap","entryName","readAttachment","linkedMesh","inheritDeform","setParentMesh","updateUVs","eventName","eventMap","intValue","floatValue","stringValue","audioPath","volume","balance","animationMap","readAnimation","map","updateOffset","box","readVertices","LinkedMesh","uvs","triangles","regionUVs","edges","hullLength","point","clip","endSlot","scaledVertices","weights","timelineName","timelineMap","keyMap","nextMap","newColor","readCurve","readTimeline1","color2","newColor2","readTimeline2","constraintIndex","mix2","softness2","mixRotate2","mixX2","mixY2","mixScaleX2","mixScaleY2","mixShearY2","deformName","deformMap","weighted","deformLength","verticesValue","slotCount","drawOrderMap","offsets","unchanged","originalIndex","unchangedIndex","offsetMap","eventData","name1","name2","nvalue1","nvalue2","property","GlobalSpineRendererMap","WeakMap","Spine","props","Date","now","loopCount","loadSkeleton","state","bounds","isParsed","currentTime","animationsList","Infinity","load","AssetManager","playAnimation","ctx","renderer","SkeletonRenderer","fake","ref","clearAnimate","animate","backgroundColor","iterations","render","renderMode","lv","cache","fitSize","getComputedStyle","centerX","centerY","scx","scy","initRender","debug","debugRendering","triangle","triangleRendering","draw","initialAnimation","atlasLoader","skeletonJson","calculateBounds","animationState","onStart","onLoop","onEnd","style","karas","Component"],"mappings":"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"}